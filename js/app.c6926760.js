(function(){"use strict";var e={6015:function(e,t,s){var i=s(3751),a=(s(8111),s(2489),s(641)),n=s(33);const o={class:"st-reader"},r={key:0,class:"upload-area"},l={class:"upload-container"},c={key:1,class:"chat-container"},g={class:"chat-header"},d={class:"header-content"},h={class:"chat-title"},u={class:"chat-meta"},p={key:0},m={class:"message-count"},v={class:"header-actions"},f={key:0},x={key:0},k={key:0},b={key:0,class:"search-bar"},S={class:"search-input-wrapper"},y={class:"search-info"},F={key:0},C={key:1,class:"regex-manager tag-filter-manager"},L={class:"regex-header"},w={class:"regex-actions"},T={key:0,class:"script-form"},M={class:"form-group"},E={class:"form-group"},P={class:"form-group"},I={class:"form-group checkbox-group"},_={class:"form-buttons"},R={class:"script-list"},D={key:0,class:"no-scripts"},N={class:"script-info"},$={class:"script-name"},U={class:"script-regex"},X={class:"script-controls"},H=["onClick","disabled"],O=["onClick","disabled"],A=["onClick"],z=["onClick"],Q=["onClick"],W={key:2,class:"regex-manager"},V={class:"regex-header"},J={class:"regex-actions"},B=["disabled"],G={key:0,class:"script-form"},j={class:"form-group"},Y={class:"form-group"},K={class:"form-group"},q={class:"form-group checkbox-group"},Z={class:"form-buttons"},ee={class:"script-list"},te={key:0,class:"no-scripts"},se=["onDragstart","onDrop"],ie={class:"script-info"},ae={class:"script-name"},ne={class:"script-regex"},oe={class:"script-controls"},re=["onClick","disabled"],le=["onClick","disabled"],ce=["onClick"],ge=["onClick"],de=["onClick"],he={key:3,class:"regex-manager favorites-panel"},ue={class:"regex-header"},pe={class:"regex-actions"},me=["disabled"],ve=["disabled"],fe={class:"script-list favorites-list"},xe={key:0,class:"no-scripts"},ke=["onClick"],be={class:"favorite-content"},Se={class:"favorite-type"},ye={class:"favorite-text"},Fe={class:"favorite-meta"},Ce={key:0},Le={class:"favorite-actions"},we=["onClick"],Te=["onClick"],Me={key:4,class:"regex-manager style-panel"},Ee={class:"regex-header"},Pe={class:"regex-actions"},Ie={class:"style-settings"},_e={class:"style-group"},Re={key:0,label:"è‡ªå®šä¹‰å­—ä½“"},De=["value"],Ne={class:"style-group"},$e={class:"style-slider-row"},Ue={class:"style-value"},Xe={class:"style-group"},He={class:"style-slider-row"},Oe={class:"style-value"},Ae={class:"style-group"},ze={class:"style-slider-row"},Qe={class:"style-value"},We={class:"style-group"},Ve={class:"color-options"},Je=["onClick","title"],Be={class:"style-group"},Ge={class:"align-options"},je={class:"style-preview"},Ye={key:0,class:"custom-fonts-section"},Ke={class:"custom-font-list"},qe={class:"custom-font-name"},Ze=["onClick"],et={class:"modal-dialog custom-font-dialog"},tt={class:"modal-header"},st={class:"modal-body"},it={class:"form-group"},at={class:"import-tabs"},nt={class:"import-method"},ot=["disabled"],rt={class:"import-method"},lt=["disabled"],ct={key:0,class:"file-selected"},gt={class:"modal-footer"},dt={key:7,class:"messages-wrapper"},ht={class:"message-header"},ut={class:"speaker-name"},pt={class:"message-info"},mt={key:0,class:"timestamp"},vt={key:1,class:"model-tag"},ft=["onClick","title"],xt=["onClick","title"],kt={key:0,class:"message-edit-form"},bt={class:"edit-actions"},St=["onMouseup"],yt=["innerHTML"],Ft={key:1,class:"message-content-html"},Ct={class:"html-preview-header"},Lt=["onClick"],wt=["srcdoc"],Tt={key:1,class:"html-code"},Mt=["innerHTML","onMouseup"],Et={key:2,class:"swipe-controls"},Pt=["onClick","disabled"],It={class:"swipe-indicator"},_t=["onClick","disabled"],Rt={key:8,class:"reading-view",ref:"readingView"},Dt=["innerHTML"],Nt={class:"reading-progress"},$t={class:"reading-floor"},Ut={class:"reading-controls"},Xt=["disabled"],Ht=["disabled"],Ot={key:9,class:"pagination-bar pagination-bottom"},At={class:"pagination-info"},zt={key:0,class:"filter-hint"},Qt={class:"pagination-controls"},Wt=["disabled"],Vt=["disabled"],Jt={class:"page-indicator"},Bt=["disabled"],Gt=["disabled"],jt={class:"export-dialog"},Yt={class:"export-dialog-header"},Kt={class:"export-dialog-body"},qt={class:"export-range"},Zt={class:"range-inputs"},es={class:"range-input-group"},ts=["max"],ss={class:"range-input-group"},is=["max"],as={class:"range-hint"},ns={class:"export-options"},os={class:"export-option"},rs={class:"export-option"},ls={class:"export-preview"},cs={class:"export-preview-content"},gs={class:"export-dialog-footer"};function ds(e,t,s,ds,hs,us){return(0,a.uX)(),(0,a.CE)("div",o,[hs.messages.length?((0,a.uX)(),(0,a.CE)("div",c,[(0,a.Lk)("div",g,[(0,a.Lk)("div",d,[(0,a.Lk)("h1",h,(0,n.v_)(hs.metadata.character_name||"èŠå¤©è®°å½•"),1),(0,a.Lk)("div",u,[hs.metadata.create_date?((0,a.uX)(),(0,a.CE)("span",p,(0,n.v_)(hs.metadata.create_date),1)):(0,a.Q3)("",!0),(0,a.Lk)("span",m,(0,n.v_)(hs.messages.length)+" æ¡æ¶ˆæ¯",1)])]),(0,a.Lk)("div",v,[(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>us.toggleSearchBar&&us.toggleSearchBar(...e)),class:(0,n.C4)(["action-button","search-toggle",{active:hs.showSearchBar}])}," æœç´¢ ",2),(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>us.toggleTagFilterManager&&us.toggleTagFilterManager(...e)),class:(0,n.C4)(["action-button",{active:hs.showTagFilterManager}])},[t[84]||(t[84]=(0,a.eW)(" æ ‡ç­¾è¿‡æ»¤ ",-1)),hs.tagFilters.length?((0,a.uX)(),(0,a.CE)("span",f,"("+(0,n.v_)(hs.tagFilters.filter(e=>!e.disabled).length)+")",1)):(0,a.Q3)("",!0)],2),(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>us.toggleRegexManager&&us.toggleRegexManager(...e)),class:"action-button regex-button"},[t[85]||(t[85]=(0,a.eW)(" æ­£åˆ™è„šæœ¬ ",-1)),hs.regexScripts.length?((0,a.uX)(),(0,a.CE)("span",x,"("+(0,n.v_)(hs.regexScripts.filter(e=>!e.disabled).length)+")",1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>us.toggleFavoritesPanel&&us.toggleFavoritesPanel(...e)),class:(0,n.C4)(["action-button",{active:hs.showFavoritesPanel}])},[t[86]||(t[86]=(0,a.eW)(" æ”¶è—å¤¹ ",-1)),hs.favorites.length?((0,a.uX)(),(0,a.CE)("span",k,"("+(0,n.v_)(hs.favorites.length)+")",1)):(0,a.Q3)("",!0)],2),(0,a.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>us.openExportRangeDialog&&us.openExportRangeDialog(...e)),class:"action-button"}," å¯¼å‡º "),(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>us.toggleStylePanel&&us.toggleStylePanel(...e)),class:(0,n.C4)(["action-button",{active:hs.showStylePanel}])}," æ ·å¼ ",2),(0,a.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>us.toggleReadingMode&&us.toggleReadingMode(...e)),class:(0,n.C4)(["action-button","reading-mode-btn",{active:hs.readingMode}])},(0,n.v_)(hs.readingMode?"é€€å‡ºé˜…è¯»":"é˜…è¯»æ¨¡å¼"),3),(0,a.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>us.resetReader&&us.resetReader(...e)),class:"reset-button"},"é‡æ–°åŠ è½½")])]),hs.showSearchBar?((0,a.uX)(),(0,a.CE)("div",b,[(0,a.Lk)("div",S,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>hs.searchQuery=e),onInput:t[10]||(t[10]=(...e)=>us.onSearchInput&&us.onSearchInput(...e)),type:"text",class:"search-input",placeholder:"æœç´¢æ¶ˆæ¯å†…å®¹æˆ–å‘è¨€è€…..."},null,544),[[i.Jo,hs.searchQuery]]),hs.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[11]||(t[11]=(...e)=>us.clearSearch&&us.clearSearch(...e)),class:"search-clear",title:"æ¸…é™¤"},"âœ•")):(0,a.Q3)("",!0)]),(0,a.Lk)("div",y,[hs.searchQuery?((0,a.uX)(),(0,a.CE)("span",F," æ‰¾åˆ° "+(0,n.v_)(us.filteredMessages.length)+" æ¡åŒ¹é… ",1)):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),hs.showTagFilterManager?((0,a.uX)(),(0,a.CE)("div",C,[(0,a.Lk)("div",L,[t[87]||(t[87]=(0,a.Lk)("h2",null,"æ ‡ç­¾è¿‡æ»¤ï¼ˆä¼˜å…ˆäºæ­£åˆ™ï¼‰",-1)),(0,a.Lk)("div",w,[(0,a.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>us.addNewTagFilter&&us.addNewTagFilter(...e)),class:"btn btn-primary"},"æ·»åŠ è¿‡æ»¤")])]),hs.tagFilterForm.id?((0,a.uX)(),(0,a.CE)("div",T,[(0,a.Lk)("div",M,[t[88]||(t[88]=(0,a.Lk)("label",null,"è¿‡æ»¤å™¨åç§°",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>hs.tagFilterForm.name=e),type:"text",placeholder:"å¦‚ï¼šç§»é™¤æ€ç»´é“¾"},null,512),[[i.Jo,hs.tagFilterForm.name]])]),(0,a.Lk)("div",E,[t[89]||(t[89]=(0,a.Lk)("label",null,"æ ‡ç­¾åï¼ˆä¸å«å°–æ‹¬å·ï¼‰",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>hs.tagFilterForm.tagName=e),type:"text",placeholder:"å¦‚ï¼šthink æˆ– thinking"},null,512),[[i.Jo,hs.tagFilterForm.tagName]]),t[90]||(t[90]=(0,a.Lk)("div",{class:"form-hint"},"æ”¯æŒå¤šä¸ªæ ‡ç­¾ï¼Œç”¨é€—å·åˆ†éš”ï¼Œå¦‚ï¼šthink,thinking,disclaimer",-1))]),(0,a.Lk)("div",P,[t[92]||(t[92]=(0,a.Lk)("label",null,"è¿‡æ»¤æ¨¡å¼",-1)),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[15]||(t[15]=e=>hs.tagFilterForm.mode=e),class:"form-select"},[...t[91]||(t[91]=[(0,a.Lk)("option",{value:"remove"},"åˆ é™¤è¿™äº›æ ‡ç­¾åŠå…¶å†…å®¹",-1),(0,a.Lk)("option",{value:"keep"},"åªä¿ç•™è¿™äº›æ ‡ç­¾å†…çš„å†…å®¹",-1),(0,a.Lk)("option",{value:"unwrap"},"ç§»é™¤æ ‡ç­¾ä½†ä¿ç•™å†…å®¹",-1)])],512),[[i.u1,hs.tagFilterForm.mode]])]),(0,a.Lk)("div",I,[(0,a.Lk)("label",null,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>hs.tagFilterForm.disabled=e),type:"checkbox"},null,512),[[i.lH,hs.tagFilterForm.disabled]]),t[93]||(t[93]=(0,a.eW)(" ç¦ç”¨æ­¤è¿‡æ»¤å™¨ ",-1))])]),(0,a.Lk)("div",_,[(0,a.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>us.cancelEditTagFilter&&us.cancelEditTagFilter(...e)),class:"btn btn-secondary"},"å–æ¶ˆ"),(0,a.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>us.saveTagFilter&&us.saveTagFilter(...e)),class:"btn btn-primary"},"ä¿å­˜")])])):(0,a.Q3)("",!0),(0,a.Lk)("div",R,[hs.tagFilters.length?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",D,' æš‚æ— æ ‡ç­¾è¿‡æ»¤å™¨ï¼Œç‚¹å‡»"æ·»åŠ è¿‡æ»¤"æ¥åˆ›å»º ')),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(hs.tagFilters,(e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:(0,n.C4)(["script-item",{disabled:e.disabled}])},[(0,a.Lk)("div",N,[(0,a.Lk)("div",$,(0,n.v_)(e.name),1),(0,a.Lk)("div",U,(0,n.v_)("remove"===e.mode?"åˆ é™¤":"keep"===e.mode?"åªä¿ç•™":"è§£åŒ…")+": <"+(0,n.v_)(e.tagName)+"> ",1)]),(0,a.Lk)("div",X,[(0,a.Lk)("button",{onClick:e=>us.moveTagFilterUp(t),disabled:0===t,class:"btn-icon",title:"ä¸Šç§»"},"â†‘",8,H),(0,a.Lk)("button",{onClick:e=>us.moveTagFilterDown(t),disabled:t===hs.tagFilters.length-1,class:"btn-icon",title:"ä¸‹ç§»"},"â†“",8,O),(0,a.Lk)("button",{onClick:t=>us.toggleTagFilter(e),class:(0,n.C4)(["btn-toggle",{active:!e.disabled}])},(0,n.v_)(e.disabled?"å·²ç¦ç”¨":"å·²å¯ç”¨"),11,A),(0,a.Lk)("button",{onClick:t=>us.editTagFilter(e),class:"btn-icon",title:"ç¼–è¾‘"},"âœ",8,z),(0,a.Lk)("button",{onClick:t=>us.deleteTagFilter(e.id),class:"btn-icon btn-danger",title:"åˆ é™¤"},"âœ•",8,Q)])],2))),128))])])):(0,a.Q3)("",!0),hs.showRegexManager?((0,a.uX)(),(0,a.CE)("div",W,[(0,a.Lk)("div",V,[t[94]||(t[94]=(0,a.Lk)("h2",null,"æ­£åˆ™è„šæœ¬ç®¡ç†",-1)),(0,a.Lk)("div",J,[(0,a.Lk)("button",{onClick:t[19]||(t[19]=(...e)=>us.importScripts&&us.importScripts(...e)),class:"btn btn-secondary"},"å¯¼å…¥JSON"),(0,a.Lk)("button",{onClick:t[20]||(t[20]=(...e)=>us.importFromPNG&&us.importFromPNG(...e)),class:"btn btn-secondary"},"ä»è§’è‰²å¡å¯¼å…¥"),(0,a.Lk)("button",{onClick:t[21]||(t[21]=(...e)=>us.exportScripts&&us.exportScripts(...e)),class:"btn btn-secondary",disabled:!hs.regexScripts.length},"å¯¼å‡º",8,B),(0,a.Lk)("button",{onClick:t[22]||(t[22]=(...e)=>us.addNewScript&&us.addNewScript(...e)),class:"btn btn-primary"},"æ·»åŠ è„šæœ¬")])]),hs.scriptForm.id?((0,a.uX)(),(0,a.CE)("div",G,[(0,a.Lk)("div",j,[t[95]||(t[95]=(0,a.Lk)("label",null,"è„šæœ¬åç§°",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[23]||(t[23]=e=>hs.scriptForm.scriptName=e),type:"text",placeholder:"å¦‚ï¼šç§»é™¤æ€ç»´é“¾å†…å®¹"},null,512),[[i.Jo,hs.scriptForm.scriptName]])]),(0,a.Lk)("div",Y,[t[96]||(t[96]=(0,a.Lk)("label",null,"æ­£åˆ™è¡¨è¾¾å¼",-1)),(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":t[24]||(t[24]=e=>hs.scriptForm.findRegex=e),placeholder:"å¦‚ï¼š/(<think>[\\s\\S]*?</think>)/gs",rows:"3"},null,512),[[i.Jo,hs.scriptForm.findRegex]]),t[97]||(t[97]=(0,a.Lk)("div",{class:"form-hint"},"æ”¯æŒæ ¼å¼ï¼š/pattern/flags æˆ–ç›´æ¥è¾“å…¥æ¨¡å¼ï¼ˆé»˜è®¤æ·»åŠ  g æ ‡å¿—ï¼‰",-1))]),(0,a.Lk)("div",K,[t[98]||(t[98]=(0,a.Lk)("label",null,"æ›¿æ¢å†…å®¹",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[25]||(t[25]=e=>hs.scriptForm.replaceString=e),type:"text",placeholder:"ç•™ç©ºè¡¨ç¤ºåˆ é™¤åŒ¹é…å†…å®¹"},null,512),[[i.Jo,hs.scriptForm.replaceString]])]),(0,a.Lk)("div",q,[(0,a.Lk)("label",null,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[26]||(t[26]=e=>hs.scriptForm.disabled=e),type:"checkbox"},null,512),[[i.lH,hs.scriptForm.disabled]]),t[99]||(t[99]=(0,a.eW)(" ç¦ç”¨æ­¤è„šæœ¬ ",-1))])]),(0,a.Lk)("div",Z,[(0,a.Lk)("button",{onClick:t[27]||(t[27]=(...e)=>us.cancelEdit&&us.cancelEdit(...e)),class:"btn btn-secondary"},"å–æ¶ˆ"),(0,a.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>us.saveScript&&us.saveScript(...e)),class:"btn btn-primary"},"ä¿å­˜")])])):(0,a.Q3)("",!0),(0,a.Lk)("div",ee,[hs.regexScripts.length?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",te,' æš‚æ— æ­£åˆ™è„šæœ¬ï¼Œç‚¹å‡»"æ·»åŠ è„šæœ¬"æˆ–"å¯¼å…¥"æ¥åˆ›å»º ')),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(hs.regexScripts,(e,s)=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:(0,n.C4)(["script-item",{disabled:e.disabled,dragging:hs.dragIndex===s}]),draggable:"true",onDragstart:e=>us.handleDragStart(s),onDragover:t[29]||(t[29]=(...e)=>us.handleDragOver&&us.handleDragOver(...e)),onDrop:e=>us.handleDrop(e,s),onDragend:t[30]||(t[30]=(...e)=>us.handleDragEnd&&us.handleDragEnd(...e))},[t[100]||(t[100]=(0,a.Lk)("div",{class:"script-drag-handle"},"â‹®â‹®",-1)),(0,a.Lk)("div",ie,[(0,a.Lk)("div",ae,(0,n.v_)(e.scriptName),1),(0,a.Lk)("div",ne,(0,n.v_)(e.findRegex.substring(0,60))+(0,n.v_)(e.findRegex.length>60?"...":""),1)]),(0,a.Lk)("div",oe,[(0,a.Lk)("button",{onClick:e=>us.moveScriptUp(s),disabled:0===s,class:"btn-icon",title:"ä¸Šç§»"},"â†‘",8,re),(0,a.Lk)("button",{onClick:e=>us.moveScriptDown(s),disabled:s===hs.regexScripts.length-1,class:"btn-icon",title:"ä¸‹ç§»"},"â†“",8,le),(0,a.Lk)("button",{onClick:t=>us.toggleScript(e),class:(0,n.C4)(["btn-toggle",{active:!e.disabled}])},(0,n.v_)(e.disabled?"å·²ç¦ç”¨":"å·²å¯ç”¨"),11,ce),(0,a.Lk)("button",{onClick:t=>us.editScript(e),class:"btn-icon",title:"ç¼–è¾‘"},"âœ",8,ge),(0,a.Lk)("button",{onClick:t=>us.deleteScript(e.id),class:"btn-icon btn-danger",title:"åˆ é™¤"},"âœ•",8,de)])],42,se))),128))])])):(0,a.Q3)("",!0),hs.showFavoritesPanel?((0,a.uX)(),(0,a.CE)("div",he,[(0,a.Lk)("div",ue,[t[101]||(t[101]=(0,a.Lk)("h2",null,"æ”¶è—å¤¹",-1)),(0,a.Lk)("div",pe,[(0,a.Lk)("button",{onClick:t[31]||(t[31]=(...e)=>us.exportFavorites&&us.exportFavorites(...e)),class:"btn btn-secondary",disabled:!hs.favorites.length},"å¯¼å‡º",8,me),(0,a.Lk)("button",{onClick:t[32]||(t[32]=(...e)=>us.clearAllFavorites&&us.clearAllFavorites(...e)),class:"btn btn-secondary",disabled:!hs.favorites.length},"æ¸…ç©º",8,ve)])]),(0,a.Lk)("div",fe,[hs.favorites.length?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",xe,' æš‚æ— æ”¶è—ï¼Œç‚¹å‡»æ¶ˆæ¯å³ä¸Šè§’çš„ â˜† æ”¶è—æ•´æ¡æ¶ˆæ¯ï¼Œæˆ–é€‰ä¸­æ–‡å­—åç‚¹å‡»"æ”¶è—" ')),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(hs.favorites,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"favorite-item",onClick:t=>us.navigateToFavorite(e),title:"ç‚¹å‡»è·³è½¬åˆ°å¯¹åº”æ¥¼å±‚"},[(0,a.Lk)("div",be,[(0,a.Lk)("div",Se,(0,n.v_)("message"===e.type?"ğŸ“‹ æ¥¼å±‚":"ğŸ“ å¥å­")+" #"+(0,n.v_)(e.messageIndex+1),1),(0,a.Lk)("div",ye,(0,n.v_)(e.text.substring(0,100))+(0,n.v_)(e.text.length>100?"...":""),1),(0,a.Lk)("div",Fe,[e.speaker?((0,a.uX)(),(0,a.CE)("span",Ce,(0,n.v_)(e.speaker),1)):(0,a.Q3)("",!0),(0,a.Lk)("span",null,(0,n.v_)(us.formatFavoriteTime(e.createdAt)),1)])]),(0,a.Lk)("div",Le,[(0,a.Lk)("button",{onClick:(0,i.D$)(t=>us.copyFavorite(e),["stop"]),class:"btn-icon",title:"å¤åˆ¶"},"ğŸ“‹",8,we),(0,a.Lk)("button",{onClick:(0,i.D$)(t=>us.deleteFavorite(e.id),["stop"]),class:"btn-icon btn-danger",title:"åˆ é™¤"},"âœ•",8,Te)])],8,ke))),128))])])):(0,a.Q3)("",!0),hs.showStylePanel?((0,a.uX)(),(0,a.CE)("div",Me,[(0,a.Lk)("div",Ee,[t[102]||(t[102]=(0,a.Lk)("h2",null,"æ­£æ–‡æ ·å¼è®¾ç½®",-1)),(0,a.Lk)("div",Pe,[(0,a.Lk)("button",{onClick:t[33]||(t[33]=(...e)=>us.resetStyles&&us.resetStyles(...e)),class:"btn btn-secondary"},"æ¢å¤é»˜è®¤")])]),(0,a.Lk)("div",Ie,[(0,a.Lk)("div",_e,[t[104]||(t[104]=(0,a.Lk)("label",{class:"style-label"},"å­—ä½“",-1)),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[34]||(t[34]=e=>hs.textStyles.fontFamily=e),onChange:t[35]||(t[35]=(...e)=>us.saveStylesToStorage&&us.saveStylesToStorage(...e)),class:"style-select"},[t[103]||(t[103]=(0,a.Fv)('<optgroup label="ç³»ç»Ÿå­—ä½“" data-v-b1287fc0><option value="system" data-v-b1287fc0>ç³»ç»Ÿé»˜è®¤</option><option value="serif" data-v-b1287fc0>å®‹ä½“ / è¡¬çº¿ä½“</option><option value="sans-serif" data-v-b1287fc0>é»‘ä½“ / æ— è¡¬çº¿ä½“</option><option value="kaiti" data-v-b1287fc0>æ¥·ä½“</option><option value="fangsong" data-v-b1287fc0>ä»¿å®‹</option><option value="monospace" data-v-b1287fc0>ç­‰å®½å­—ä½“</option></optgroup><optgroup label="åœ¨çº¿å­—ä½“" data-v-b1287fc0><option value="alegreya" data-v-b1287fc0>Alegreya</option><option value="cangeryunhei" data-v-b1287fc0>ä»“è€³äº‘é»‘</option><option value="huiwenmingchao" data-v-b1287fc0>æ±‡æ–‡æ˜æœ</option><option value="kongmingchao" data-v-b1287fc0>ç©ºæ˜æœï¼ˆç¹ä½“/æ—¥æ–‡ï¼‰</option><option value="pingxianzhensong" data-v-b1287fc0>å±æ˜¾è‡»å®‹</option><option value="wenyueminguofangsong" data-v-b1287fc0>æ–‡æ‚¦æ°‘å›½ä»¿å®‹</option></optgroup>',2)),hs.customFonts.length?((0,a.uX)(),(0,a.CE)("optgroup",Re,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(hs.customFonts,e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:"custom-"+e.id},(0,n.v_)(e.name),9,De))),128))])):(0,a.Q3)("",!0)],544),[[i.u1,hs.textStyles.fontFamily]]),(0,a.Lk)("button",{onClick:t[36]||(t[36]=e=>hs.showCustomFontDialog=!0),class:"btn btn-secondary btn-sm add-font-btn"}," + å¯¼å…¥å­—ä½“ ")]),(0,a.Lk)("div",Ne,[t[105]||(t[105]=(0,a.Lk)("label",{class:"style-label"},"å­—å·",-1)),(0,a.Lk)("div",$e,[(0,a.bo)((0,a.Lk)("input",{type:"range","onUpdate:modelValue":t[37]||(t[37]=e=>hs.textStyles.fontSize=e),onInput:t[38]||(t[38]=(...e)=>us.handleStyleChange&&us.handleStyleChange(...e)),min:"12",max:"32",step:"1",class:"style-slider"},null,544),[[i.Jo,hs.textStyles.fontSize,void 0,{number:!0}]]),(0,a.Lk)("span",Ue,(0,n.v_)(hs.textStyles.fontSize)+"px",1)])]),(0,a.Lk)("div",Xe,[t[106]||(t[106]=(0,a.Lk)("label",{class:"style-label"},"è¡Œé—´è·",-1)),(0,a.Lk)("div",He,[(0,a.bo)((0,a.Lk)("input",{type:"range","onUpdate:modelValue":t[39]||(t[39]=e=>hs.textStyles.lineHeight=e),onInput:t[40]||(t[40]=(...e)=>us.handleStyleChange&&us.handleStyleChange(...e)),min:"1.2",max:"3",step:"0.1",class:"style-slider"},null,544),[[i.Jo,hs.textStyles.lineHeight,void 0,{number:!0}]]),(0,a.Lk)("span",Oe,(0,n.v_)(hs.textStyles.lineHeight.toFixed(1)),1)])]),(0,a.Lk)("div",Ae,[t[107]||(t[107]=(0,a.Lk)("label",{class:"style-label"},"æ®µè½é—´è·",-1)),(0,a.Lk)("div",ze,[(0,a.bo)((0,a.Lk)("input",{type:"range","onUpdate:modelValue":t[41]||(t[41]=e=>hs.textStyles.paragraphSpacing=e),onInput:t[42]||(t[42]=(...e)=>us.handleStyleChange&&us.handleStyleChange(...e)),min:"0",max:"2",step:"0.1",class:"style-slider"},null,544),[[i.Jo,hs.textStyles.paragraphSpacing,void 0,{number:!0}]]),(0,a.Lk)("span",Qe,(0,n.v_)(hs.textStyles.paragraphSpacing.toFixed(1))+"em",1)])]),(0,a.Lk)("div",We,[t[108]||(t[108]=(0,a.Lk)("label",{class:"style-label"},"æ–‡å­—é¢œè‰²",-1)),(0,a.Lk)("div",Ve,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(hs.colorOptions,e=>((0,a.uX)(),(0,a.CE)("button",{key:e.value,onClick:t=>us.setTextColor(e.value),class:(0,n.C4)(["color-btn",{active:hs.textStyles.textColor===e.value}]),style:(0,n.Tr)({backgroundColor:e.value}),title:e.name},null,14,Je))),128))])]),(0,a.Lk)("div",Be,[t[109]||(t[109]=(0,a.Lk)("label",{class:"style-label"},"å¯¹é½æ–¹å¼",-1)),(0,a.Lk)("div",Ge,[(0,a.Lk)("button",{onClick:t[43]||(t[43]=e=>us.setTextAlign("left")),class:(0,n.C4)(["align-btn",{active:"left"===hs.textStyles.textAlign}]),title:"å·¦å¯¹é½"},"â—§",2),(0,a.Lk)("button",{onClick:t[44]||(t[44]=e=>us.setTextAlign("justify")),class:(0,n.C4)(["align-btn",{active:"justify"===hs.textStyles.textAlign}]),title:"ä¸¤ç«¯å¯¹é½"},"â–£",2),(0,a.Lk)("button",{onClick:t[45]||(t[45]=e=>us.setTextAlign("center")),class:(0,n.C4)(["align-btn",{active:"center"===hs.textStyles.textAlign}]),title:"å±…ä¸­"},"â—«",2)])])]),(0,a.Lk)("div",je,[t[111]||(t[111]=(0,a.Lk)("div",{class:"style-preview-label"},"é¢„è§ˆæ•ˆæœï¼š",-1)),(0,a.Lk)("div",{class:"style-preview-content",style:(0,n.Tr)(us.getPreviewStyles())},[...t[110]||(t[110]=[(0,a.eW)(" è¿™æ˜¯ä¸€æ®µç¤ºä¾‹æ–‡å­—ï¼Œç”¨äºé¢„è§ˆå½“å‰çš„æ ·å¼è®¾ç½®æ•ˆæœã€‚æ®µè½ä¹‹é—´ä¼šæœ‰é€‚å½“çš„é—´è·ã€‚ ",-1),(0,a.Lk)("br",null,null,-1),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" ç¬¬äºŒæ®µæ–‡å­—ã€‚é€šè¿‡è°ƒæ•´ä¸Šæ–¹çš„è®¾ç½®ï¼Œå¯ä»¥æ”¹å˜æ­£æ–‡çš„æ˜¾ç¤ºæ•ˆæœï¼ŒåŒ…æ‹¬å­—ä½“ã€å­—å·ã€è¡Œé—´è·ç­‰ã€‚ ",-1)])],4)]),hs.customFonts.length?((0,a.uX)(),(0,a.CE)("div",Ye,[t[112]||(t[112]=(0,a.Lk)("div",{class:"style-label"},"å·²å¯¼å…¥çš„è‡ªå®šä¹‰å­—ä½“",-1)),(0,a.Lk)("div",Ke,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(hs.customFonts,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"custom-font-item"},[(0,a.Lk)("span",qe,(0,n.v_)(e.name),1),(0,a.Lk)("button",{onClick:t=>us.deleteCustomFont(e.id),class:"btn-icon btn-danger",title:"åˆ é™¤"},"âœ•",8,Ze)]))),128))])])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),hs.showCustomFontDialog?((0,a.uX)(),(0,a.CE)("div",{key:5,class:"modal-overlay",onClick:t[52]||(t[52]=(0,i.D$)(e=>hs.showCustomFontDialog=!1,["self"]))},[(0,a.Lk)("div",et,[(0,a.Lk)("div",tt,[t[113]||(t[113]=(0,a.Lk)("h3",null,"å¯¼å…¥è‡ªå®šä¹‰å­—ä½“",-1)),(0,a.Lk)("button",{onClick:t[46]||(t[46]=e=>hs.showCustomFontDialog=!1),class:"modal-close"},"âœ•")]),(0,a.Lk)("div",st,[(0,a.Lk)("div",it,[t[114]||(t[114]=(0,a.Lk)("label",null,[(0,a.eW)("å­—ä½“åç§° "),(0,a.Lk)("span",{class:"required"},"*")],-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[47]||(t[47]=e=>hs.customFontForm.name=e),type:"text",placeholder:"ç»™å­—ä½“èµ·ä¸ªåå­—",class:"form-input"},null,512),[[i.Jo,hs.customFontForm.name]])]),(0,a.Lk)("div",at,[(0,a.Lk)("div",nt,[t[115]||(t[115]=(0,a.Lk)("div",{class:"import-method-header"},"æ–¹å¼ä¸€ï¼šä»URLå¯¼å…¥",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[48]||(t[48]=e=>hs.customFontForm.url=e),type:"text",placeholder:"è¾“å…¥å­—ä½“æ–‡ä»¶çš„URLï¼ˆæ”¯æŒ ttf/otf/woff/woff2ï¼‰",class:"form-input",disabled:!!hs.customFontForm.file},null,8,ot),[[i.Jo,hs.customFontForm.url]])]),t[117]||(t[117]=(0,a.Lk)("div",{class:"import-divider"},"æˆ–",-1)),(0,a.Lk)("div",rt,[t[116]||(t[116]=(0,a.Lk)("div",{class:"import-method-header"},"æ–¹å¼äºŒï¼šä»æ–‡ä»¶å¯¼å…¥",-1)),(0,a.Lk)("input",{ref:"fontFileInput",type:"file",accept:".ttf,.otf,.woff,.woff2",onChange:t[49]||(t[49]=(...e)=>us.handleFontFileSelect&&us.handleFontFileSelect(...e)),class:"form-file-input",disabled:!!hs.customFontForm.url},null,40,lt),hs.customFontForm.file?((0,a.uX)(),(0,a.CE)("div",ct," å·²é€‰æ‹©: "+(0,n.v_)(hs.customFontForm.file.name),1)):(0,a.Q3)("",!0)])]),t[118]||(t[118]=(0,a.Lk)("div",{class:"form-hint"},[(0,a.eW)(" æ”¯æŒçš„æ ¼å¼ï¼šTTFã€OTFã€WOFFã€WOFF2"),(0,a.Lk)("br"),(0,a.eW)(" æ³¨æ„ï¼šé€šè¿‡æ–‡ä»¶å¯¼å…¥çš„å­—ä½“ä¼šè½¬æ¢ä¸ºBase64å­˜å‚¨åœ¨æµè§ˆå™¨ä¸­ ")],-1))]),(0,a.Lk)("div",gt,[(0,a.Lk)("button",{onClick:t[50]||(t[50]=(...e)=>us.resetCustomFontForm&&us.resetCustomFontForm(...e)),class:"btn btn-secondary"},"æ¸…ç©º"),(0,a.Lk)("button",{onClick:t[51]||(t[51]=(...e)=>us.addCustomFont&&us.addCustomFont(...e)),class:"btn btn-primary"},"å¯¼å…¥å­—ä½“")])])])):(0,a.Q3)("",!0),hs.highlightMenu.show?((0,a.uX)(),(0,a.CE)("div",{key:6,class:"highlight-menu",style:(0,n.Tr)({left:hs.highlightMenu.x+"px",top:hs.highlightMenu.y+"px"})},[(0,a.Lk)("button",{onClick:t[53]||(t[53]=(...e)=>us.removeHighlightFromMenu&&us.removeHighlightFromMenu(...e)),class:"selection-btn"},"âœ• å–æ¶ˆåˆ’çº¿")],4)):(0,a.Q3)("",!0),hs.readingMode?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",dt,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(us.paginatedMessages,(e,s)=>((0,a.uX)(),(0,a.CE)("div",{key:us.currentRange.start+s,class:(0,n.C4)(["message-block",{"user-message":e.is_user}])},[(0,a.Lk)("div",ht,[(0,a.Lk)("span",ut,(0,n.v_)(e.name),1),(0,a.Lk)("div",pt,[e.send_date?((0,a.uX)(),(0,a.CE)("span",mt,(0,n.v_)(e.send_date),1)):(0,a.Q3)("",!0),e.model?((0,a.uX)(),(0,a.CE)("span",vt,(0,n.v_)(e.model),1)):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t=>us.toggleFavoriteMessage(us.getGlobalMessageIndex(s),e),class:(0,n.C4)(["edit-btn",{favorited:us.isMessageFavorited(us.getGlobalMessageIndex(s))}]),title:us.isMessageFavorited(us.getGlobalMessageIndex(s))?"å–æ¶ˆæ”¶è—":"æ”¶è—æ¥¼å±‚"},(0,n.v_)(us.isMessageFavorited(us.getGlobalMessageIndex(s))?"â˜…":"â˜†"),11,ft),(0,a.Lk)("button",{onClick:e=>us.toggleEditMessage(us.getGlobalMessageIndex(s)),class:"edit-btn",title:hs.editingMessageIndex===us.getGlobalMessageIndex(s)?"å–æ¶ˆç¼–è¾‘":"ç¼–è¾‘æ¶ˆæ¯"},(0,n.v_)(hs.editingMessageIndex===us.getGlobalMessageIndex(s)?"âœ•":"âœ"),9,xt)])]),hs.editingMessageIndex===us.getGlobalMessageIndex(s)?((0,a.uX)(),(0,a.CE)("div",kt,[(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":t[54]||(t[54]=e=>hs.editingContent=e),class:"edit-textarea",rows:"10"},null,512),[[i.Jo,hs.editingContent]]),(0,a.Lk)("div",bt,[(0,a.Lk)("button",{onClick:t[55]||(t[55]=(...e)=>us.cancelEditMessage&&us.cancelEditMessage(...e)),class:"btn btn-secondary"},"å–æ¶ˆ"),(0,a.Lk)("button",{onClick:t[56]||(t[56]=(...e)=>us.saveEditMessage&&us.saveEditMessage(...e)),class:"btn btn-primary"},"ä¿å­˜")])])):(0,a.Q3)("",!0),hs.editingMessageIndex!==us.getGlobalMessageIndex(s)?((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[us.hasHTMLCodeBlock(us.getMessageContent(e))?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"message-content-mixed",style:(0,n.Tr)(us.getContentStyles()),onMouseup:t=>us.handleTextSelection(t,us.getGlobalMessageIndex(s),e)},[(0,a.Lk)("div",{class:"message-content",style:(0,n.Tr)(us.getContentStyles()),innerHTML:us.renderContentWithHTMLPlaceholder(us.getMessageContent(e),us.getGlobalMessageIndex(s))},null,12,yt)],44,St)):us.isFullHTML(us.getMessageContent(e))?((0,a.uX)(),(0,a.CE)("div",Ft,[(0,a.Lk)("div",Ct,[t[119]||(t[119]=(0,a.Lk)("span",{class:"html-tag"},"HTML æ–‡æ¡£",-1)),(0,a.Lk)("button",{onClick:e=>us.toggleHTMLPreview(us.getGlobalMessageIndex(s)),class:"preview-toggle"},(0,n.v_)(e.showPreview?"éšè—é¢„è§ˆ":"æ˜¾ç¤ºé¢„è§ˆ"),9,Lt)]),e.showPreview?((0,a.uX)(),(0,a.CE)("iframe",{key:0,srcdoc:us.getMessageContent(e),class:"html-iframe",sandbox:"allow-scripts allow-same-origin"},null,8,wt)):((0,a.uX)(),(0,a.CE)("pre",Tt,(0,n.v_)(us.getMessageContent(e)),1))])):((0,a.uX)(),(0,a.CE)("div",{key:2,class:"message-content",style:(0,n.Tr)(us.getContentStyles()),innerHTML:us.renderContent(us.getMessageContent(e),us.getGlobalMessageIndex(s)),onMouseup:t=>us.handleTextSelection(t,us.getGlobalMessageIndex(s),e)},null,44,Mt))],64)):(0,a.Q3)("",!0),e.swipes&&e.swipes.length>1?((0,a.uX)(),(0,a.CE)("div",Et,[(0,a.Lk)("button",{onClick:e=>us.prevSwipe(us.getGlobalMessageIndex(s)),disabled:0===e.currentSwipeIndex,class:"swipe-btn",title:"ä¸Šä¸€æ¡"}," â—€ ",8,Pt),(0,a.Lk)("span",It,(0,n.v_)(e.currentSwipeIndex+1)+" / "+(0,n.v_)(e.swipes.length),1),(0,a.Lk)("button",{onClick:e=>us.nextSwipe(us.getGlobalMessageIndex(s)),disabled:e.currentSwipeIndex===e.swipes.length-1,class:"swipe-btn",title:"ä¸‹ä¸€æ¡"}," â–¶ ",8,_t)])):(0,a.Q3)("",!0)],2))),128))])),hs.readingMode?((0,a.uX)(),(0,a.CE)("div",Rt,[(0,a.Lk)("div",{class:"reading-content",ref:"readingContentEl",style:(0,n.Tr)(us.getReadingTransform()),innerHTML:hs.readingFullHtml,onMouseup:t[57]||(t[57]=(...e)=>us.onReadingMouseUp&&us.onReadingMouseUp(...e)),onTouchstart:t[58]||(t[58]=(...e)=>us.onReadingTouchStart&&us.onReadingTouchStart(...e)),onTouchend:t[59]||(t[59]=(...e)=>us.onReadingTouchEnd&&us.onReadingTouchEnd(...e))},null,44,Dt),(0,a.Lk)("div",{class:"reading-nav-left",onClick:t[60]||(t[60]=(...e)=>us.readingPrevPage&&us.readingPrevPage(...e))}),(0,a.Lk)("div",{class:"reading-nav-right",onClick:t[61]||(t[61]=(...e)=>us.readingNextPage&&us.readingNextPage(...e))}),(0,a.Lk)("div",{class:"reading-nav-center",onClick:t[62]||(t[62]=(...e)=>us.toggleToolbar&&us.toggleToolbar(...e))}),(0,a.Lk)("div",{class:(0,n.C4)(["reading-footer",{visible:hs.toolbarVisible}])},[(0,a.Lk)("div",Nt,[(0,a.Lk)("span",null,(0,n.v_)(hs.readingCurrentPage)+" / "+(0,n.v_)(hs.readingTotalPages)+" é¡µ",1),(0,a.Lk)("span",$t,"æ¥¼å±‚ "+(0,n.v_)(us.getReadingFloorRange()),1)]),(0,a.Lk)("div",Ut,[(0,a.Lk)("button",{onClick:t[63]||(t[63]=(...e)=>us.readingPrevPage&&us.readingPrevPage(...e)),disabled:hs.readingCurrentPage<=1,class:"reading-btn"},"â—€",8,Xt),(0,a.Lk)("button",{onClick:t[64]||(t[64]=(...e)=>us.toggleReadingMode&&us.toggleReadingMode(...e)),class:"reading-btn reading-exit"},"é€€å‡º"),(0,a.Lk)("button",{onClick:t[65]||(t[65]=(...e)=>us.readingNextPage&&us.readingNextPage(...e)),disabled:hs.readingCurrentPage>=hs.readingTotalPages,class:"reading-btn"},"â–¶",8,Ht)])],2)],512)):(0,a.Q3)("",!0),hs.readingMode?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",Ot,[(0,a.Lk)("div",At,[(0,a.eW)(" æ˜¾ç¤ºç¬¬ "+(0,n.v_)(us.currentRange.start)+"-"+(0,n.v_)(us.currentRange.end)+" æ¡ï¼Œå…± "+(0,n.v_)(us.filteredMessages.length)+" æ¡ ",1),hs.searchQuery?((0,a.uX)(),(0,a.CE)("span",zt,"ï¼ˆå·²è¿‡æ»¤ï¼‰")):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Qt,[(0,a.Lk)("button",{onClick:t[66]||(t[66]=e=>us.goToPage(1)),disabled:1===hs.currentPage,class:"page-btn",title:"é¦–é¡µ"},"âŸ¨âŸ¨",8,Wt),(0,a.Lk)("button",{onClick:t[67]||(t[67]=(...e)=>us.prevPage&&us.prevPage(...e)),disabled:1===hs.currentPage,class:"page-btn",title:"ä¸Šä¸€é¡µ"},"âŸ¨",8,Vt),(0,a.Lk)("span",Jt,(0,n.v_)(hs.currentPage)+" / "+(0,n.v_)(us.totalPages),1),(0,a.Lk)("button",{onClick:t[68]||(t[68]=(...e)=>us.nextPage&&us.nextPage(...e)),disabled:hs.currentPage===us.totalPages,class:"page-btn",title:"ä¸‹ä¸€é¡µ"},"âŸ©",8,Bt),(0,a.Lk)("button",{onClick:t[69]||(t[69]=e=>us.goToPage(us.totalPages)),disabled:hs.currentPage===us.totalPages,class:"page-btn",title:"æœ«é¡µ"},"âŸ©âŸ©",8,Gt),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[70]||(t[70]=e=>hs.pageSize=e),onChange:t[71]||(t[71]=(...e)=>us.onPageSizeChange&&us.onPageSizeChange(...e)),class:"page-size-select"},[...t[120]||(t[120]=[(0,a.Lk)("option",{value:10},"10æ¡/é¡µ",-1),(0,a.Lk)("option",{value:20},"20æ¡/é¡µ",-1),(0,a.Lk)("option",{value:50},"50æ¡/é¡µ",-1),(0,a.Lk)("option",{value:100},"100æ¡/é¡µ",-1)])],544),[[i.u1,hs.pageSize,void 0,{number:!0}]])])]))])):((0,a.uX)(),(0,a.CE)("div",r,[(0,a.Lk)("div",l,[(0,a.Lk)("input",{type:"file",ref:"fileInput",onChange:t[0]||(t[0]=(...e)=>us.handleFileUpload&&us.handleFileUpload(...e)),accept:".jsonl",id:"file-input",class:"file-input"},null,544),t[83]||(t[83]=(0,a.Lk)("label",{for:"file-input",class:"upload-label"},[(0,a.Lk)("div",{class:"upload-text"},"é€‰æ‹© JSONL æ–‡ä»¶"),(0,a.Lk)("div",{class:"upload-hint"},"SillyTavern å¯¼å‡ºçš„èŠå¤©è®°å½•")],-1))])])),hs.selectionMenu.show?((0,a.uX)(),(0,a.CE)("div",{key:2,class:"selection-menu",style:(0,n.Tr)({left:hs.selectionMenu.x+"px",top:hs.selectionMenu.y+"px"})},[(0,a.Lk)("button",{onClick:t[72]||(t[72]=(...e)=>us.favoriteSelectedText&&us.favoriteSelectedText(...e)),class:"selection-btn"},"â˜† æ”¶è—"),(0,a.Lk)("button",{onClick:t[73]||(t[73]=(...e)=>us.highlightSelectedText&&us.highlightSelectedText(...e)),class:"selection-btn"},"ğŸ– åˆ’çº¿"),(0,a.Lk)("button",{onClick:t[74]||(t[74]=(...e)=>us.copySelectedText&&us.copySelectedText(...e)),class:"selection-btn"},"ğŸ“‹ å¤åˆ¶")],4)):(0,a.Q3)("",!0),hs.exportDialog.show?((0,a.uX)(),(0,a.CE)("div",{key:3,class:"export-dialog-overlay",onClick:t[82]||(t[82]=(0,i.D$)((...e)=>us.closeExportDialog&&us.closeExportDialog(...e),["self"]))},[(0,a.Lk)("div",jt,[(0,a.Lk)("div",Yt,[t[121]||(t[121]=(0,a.Lk)("h3",null,"å¯¼å‡ºæ¥¼å±‚èŒƒå›´",-1)),(0,a.Lk)("button",{onClick:t[75]||(t[75]=(...e)=>us.closeExportDialog&&us.closeExportDialog(...e)),class:"btn-icon"},"âœ•")]),(0,a.Lk)("div",Kt,[(0,a.Lk)("div",qt,[(0,a.Lk)("div",Zt,[(0,a.Lk)("div",es,[t[122]||(t[122]=(0,a.Lk)("label",null,"èµ·å§‹æ¥¼å±‚",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t[76]||(t[76]=e=>hs.exportDialog.startFloor=e),min:1,max:us.filteredMessages.length,class:"range-input"},null,8,ts),[[i.Jo,hs.exportDialog.startFloor,void 0,{number:!0}]])]),t[124]||(t[124]=(0,a.Lk)("span",{class:"range-separator"},"è‡³",-1)),(0,a.Lk)("div",ss,[t[123]||(t[123]=(0,a.Lk)("label",null,"ç»“æŸæ¥¼å±‚",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t[77]||(t[77]=e=>hs.exportDialog.endFloor=e),min:1,max:us.filteredMessages.length,class:"range-input"},null,8,is),[[i.Jo,hs.exportDialog.endFloor,void 0,{number:!0}]])])]),(0,a.Lk)("div",as," å…± "+(0,n.v_)(us.filteredMessages.length)+" æ¡æ¶ˆæ¯ï¼Œå°†å¯¼å‡º "+(0,n.v_)(us.getExportCount())+" æ¡ ",1)]),(0,a.Lk)("div",ns,[(0,a.Lk)("label",os,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[78]||(t[78]=e=>hs.exportDialog.includeName=e)},null,512),[[i.lH,hs.exportDialog.includeName]]),t[125]||(t[125]=(0,a.eW)(" åŒ…å«å‘è¨€è€…åç§° ",-1))]),(0,a.Lk)("label",rs,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[79]||(t[79]=e=>hs.exportDialog.includeTime=e)},null,512),[[i.lH,hs.exportDialog.includeTime]]),t[126]||(t[126]=(0,a.eW)(" åŒ…å«å‘é€æ—¶é—´ ",-1))])]),(0,a.Lk)("div",ls,[t[127]||(t[127]=(0,a.Lk)("div",{class:"export-preview-label"},"é¢„è§ˆï¼ˆå‰ 3 æ¡ï¼‰ï¼š",-1)),(0,a.Lk)("pre",cs,(0,n.v_)(us.getExportPreview()),1)])]),(0,a.Lk)("div",gs,[(0,a.Lk)("button",{onClick:t[80]||(t[80]=(...e)=>us.closeExportDialog&&us.closeExportDialog(...e)),class:"btn btn-secondary"},"å–æ¶ˆ"),(0,a.Lk)("button",{onClick:t[81]||(t[81]=(...e)=>us.doExportRange&&us.doExportRange(...e)),class:"btn btn-primary"},"å¯¼å‡º TXT")])])])):(0,a.Q3)("",!0)])}s(4114),s(6573),s(8100),s(7936),s(116),s(7588),s(1701),s(3579),s(3110),s(9577),s(8335),s(1549),s(9797),s(9631),s(5623),s(4979),s(4603),s(7566),s(8721);var hs=s(23),us=s(9418),ps={name:"STReader",data(){return{metadata:{},messages:[],rawData:[],regexScripts:[],showRegexManager:!1,editingScript:null,scriptForm:{id:"",scriptName:"",findRegex:"",replaceString:"",disabled:!1},dragIndex:null,currentPage:1,pageSize:10,searchQuery:"",searchResults:[],currentSearchIndex:-1,showSearchBar:!1,editingMessageIndex:null,editingContent:"",tagFilters:[],showTagFilterManager:!1,editingTagFilter:null,tagFilterForm:{id:"",name:"",tagName:"",mode:"remove",disabled:!1},favorites:[],highlights:[],showFavoritesPanel:!1,selectionMenu:{show:!1,x:0,y:0,text:"",messageIndex:null},highlightMenu:{show:!1,x:0,y:0,highlightId:null},exportDialog:{show:!1,startFloor:1,endFloor:1,includeName:!0,includeTime:!0},showStylePanel:!1,textStyles:{fontFamily:"system",fontSize:16,lineHeight:1.8,paragraphSpacing:1,textColor:"#1a1a1a",textAlign:"justify"},colorOptions:[{name:"é»˜è®¤é»‘",value:"#1a1a1a"},{name:"æ·±ç°",value:"#333333"},{name:"ä¸­ç°",value:"#555555"},{name:"æµ…ç°",value:"#666666"},{name:"æ£•è‰²",value:"#5d4037"},{name:"æ·±è“",value:"#1a237e"}],customFonts:[],showCustomFontDialog:!1,customFontForm:{name:"",url:"",file:null},readingMode:!1,toolbarVisible:!1,readingCurrentPage:1,readingTotalPages:1,readingFullHtml:"",readingTouchStartX:0,readingTouchStartY:0,toolbarTimeout:null,windowWidth:0,resizeTimer:null}},computed:{filteredMessages(){if(!this.searchQuery.trim())return this.messages;const e=this.searchQuery.toLowerCase();return this.messages.filter((t,s)=>{const i=this.getMessageContent(t).toLowerCase(),a=(t.name||"").toLowerCase(),n=i.includes(e)||a.includes(e);return n&&(t._originalIndex=s),n})},totalPages(){return Math.ceil(this.filteredMessages.length/this.pageSize)},paginatedMessages(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.filteredMessages.slice(e,t)},currentRange(){const e=(this.currentPage-1)*this.pageSize+1,t=Math.min(this.currentPage*this.pageSize,this.filteredMessages.length);return{start:e,end:t}}},mounted(){document.body.style.overflow="",this.loadScriptsFromStorage(),this.loadTagFiltersFromStorage(),this.loadFavoritesFromStorage(),this.loadHighlightsFromStorage(),this.loadStylesFromStorage(),this.loadCustomFonts(),this.replaceHTMLPlaceholders(),document.addEventListener("mousedown",this.hideSelectionMenu)},updated(){this.replaceHTMLPlaceholders(),document.addEventListener("mousedown",this.hideHighlightMenu),document.addEventListener("click",this.onHighlightClick)},beforeUnmount(){document.removeEventListener("mousedown",this.hideSelectionMenu),document.removeEventListener("mousedown",this.hideHighlightMenu),document.removeEventListener("click",this.onHighlightClick),window.removeEventListener("resize",this.handleResize),document.body.style.overflow="",this.toolbarTimeout&&clearTimeout(this.toolbarTimeout),this.resizeTimer&&clearTimeout(this.resizeTimer)},methods:{handleFileUpload(e){const t=e.target.files[0];if(!t)return;const s=new FileReader;s.onload=e=>{this.parseJSONL(e.target.result)},s.readAsText(t)},parseJSONL(e){const t=e.trim().split("\n");this.rawData=[],this.messages=[],this.metadata={},t.forEach((e,t)=>{try{const s=JSON.parse(e);if(0!==t||s.mes){let e=!1;!0!==s.is_user&&1!==s.is_user&&"true"!==s.is_user||(e=!0);let t=[];s.swipes&&Array.isArray(s.swipes)&&s.swipes.length>1&&(t=s.swipes);const i={name:s.name||"æœªçŸ¥",is_user:e,mes:s.mes||"",send_date:s.send_date||null,model:s.extra?.model||null,force_avatar:s.force_avatar||null,showPreview:!1,swipes:t,currentSwipeIndex:s.swipe_id||0};this.messages.push(i)}else this.metadata=s}catch(s){console.error(`è§£æç¬¬ ${t+1} è¡Œæ—¶å‡ºé”™:`,s)}})},hasHTMLCodeBlock(e){if(!e)return!1;const t=/```(?:html)?\s*([\s\S]*?)```/i,s=e.match(t);if(!s)return!1;const i=s[1].trim(),a=/<!DOCTYPE\s+html>/i.test(i),n=/<html[\s>]/i.test(i);return a&&n},extractHTMLFromCodeBlock(e){if(!e)return"";const t=/```(?:html)?\s*([\s\S]*?)```/i,s=e.match(t);return s?s[1].trim():""},renderContentWithoutCodeBlock(e){if(!e)return"";let t=this.applyTagFilters(e);t=this.applyRegexScripts(t);const s=t.replace(/```(?:html)?\s*[\s\S]*?```/gi,"").trim();return this.renderMarkdown(s)},renderContentWithHTMLPlaceholder(e,t){if(!e)return"";let s=this.applyTagFilters(e);s=this.applyRegexScripts(s);const i=this.extractHTMLFromCodeBlock(s);if(!i)return this.renderMarkdown(s);const a=btoa(unescape(encodeURIComponent(i))),n=`<div class="html-preview-placeholder" data-html-base64="${a}" data-message-idx="${t}"></div>`,o=s.replace(/```(?:html)?\s*[\s\S]*?```/gi,n);return this.renderMarkdown(o)},replaceHTMLPlaceholders(){const e=this.$el?.querySelectorAll(".html-preview-placeholder")||[];e.forEach(e=>{const t=e.getAttribute("data-html-base64");if(t&&e.parentNode)try{const s=decodeURIComponent(escape(atob(t))),i=document.createElement("iframe");i.className="html-iframe",i.setAttribute("sandbox","allow-scripts allow-same-origin"),i.srcdoc=s;const a=document.createElement("div");a.className="html-preview-section",a.appendChild(i),e.parentNode.replaceChild(a,e)}catch(s){console.error("æ›¿æ¢HTMLå ä½ç¬¦å¤±è´¥:",s)}})},renderMarkdown(e){if(!e)return"";hs.xI.setOptions({breaks:!0,gfm:!0,sanitize:!1,mangle:!1,headerIds:!1});let t=hs.xI.parse(e);return t=us.A.sanitize(t,this.getDOMPurifyConfig()),t},getDOMPurifyConfig(){return{ALLOWED_TAGS:["p","br","strong","em","u","del","code","pre","blockquote","h1","h2","h3","h4","h5","h6","ul","ol","li","a","img","span","div","b","i","s","strike","sub","sup","table","thead","tbody","tr","th","td","hr","details","summary","style","mark","small","big","abbr","cite","q","dl","dt","dd","figure","figcaption","main","section","article","header","footer","nav","aside","address","time","ruby","rt","rp","button","label","input","select","option","textarea","fieldset","legend","meter","progress","output","canvas","svg","path","circle","rect","line","polygon","polyline","g","defs","use","symbol","text","tspan"],ALLOWED_ATTR:["href","src","alt","title","class","style","width","height","align","target","rel","id","name","type","value","placeholder","disabled","readonly","checked","min","max","step","pattern","required","multiple","rows","cols","wrap","for","form","open","datetime","cite","download","d","fill","stroke","stroke-width","viewBox","xmlns","cx","cy","r","rx","ry","x","y","x1","y1","x2","y2","points","transform","opacity","font-size","text-anchor","onclick","onchange","oninput","data-floor"],ALLOW_DATA_ATTR:!0}},isFullHTML(e){if(!e)return!1;const t=e.trim();if(/^```/.test(t))return!1;const s=/<!DOCTYPE\s+html>/i.test(t),i=/<html[\s>]/i.test(t),a=/^<html[\s>]/i.test(t);return s&&i||a},toggleHTMLPreview(e){this.messages[e].showPreview=!this.messages[e].showPreview},getMessageContent(e){return e.swipes&&e.swipes.length>0&&e.swipes[e.currentSwipeIndex]||e.mes},prevSwipe(e){const t=this.messages[e];t.swipes&&t.currentSwipeIndex>0&&t.currentSwipeIndex--},nextSwipe(e){const t=this.messages[e];t.swipes&&t.currentSwipeIndex<t.swipes.length-1&&t.currentSwipeIndex++},getGlobalMessageIndex(e){return(this.currentPage-1)*this.pageSize+e},toggleEditMessage(e){if(this.editingMessageIndex===e)this.cancelEditMessage();else{const t=this.messages[e];this.editingContent=this.getMessageContent(t),this.editingMessageIndex=e}},cancelEditMessage(){this.editingMessageIndex=null,this.editingContent=""},saveEditMessage(){if(null===this.editingMessageIndex)return;const e=this.messages[this.editingMessageIndex];e.swipes&&e.swipes.length>0?e.swipes[e.currentSwipeIndex]=this.editingContent:e.mes=this.editingContent,this.cancelEditMessage()},renderContent(e,t){if(!e)return"";let s=this.applyTagFilters(e);s=this.applyRegexScripts(s);const i=[];let a=s;const n=e=>`{ST_READER_HTML_BLOCK_${e}}`,o=a.indexOf("<style");if(-1!==o){let e=a.length;const t=a.substring(o);let s=-1,r=t.indexOf("</div>",0);while(-1!==r)s=r+6,r=t.indexOf("</div>",r+1);if(-1!==s){const i=t.substring(s).trim();i.startsWith("<")&&!i.startsWith("</")||(e=o+s)}const l=a.substring(o,e);i.push(l),a=a.substring(0,o)+n(0)+a.substring(e)}a=a.replace(/<details[\s\S]*?<\/details>/gi,e=>(i.push(e),n(i.length-1))),hs.xI.setOptions({breaks:!0,gfm:!0,sanitize:!1,mangle:!1,headerIds:!1});let r=hs.xI.parse(a);return i.forEach((e,t)=>{const s=n(t);r=r.includes(`<p>${s}</p>`)?r.replace(`<p>${s}</p>`,e):r.replace(s,e)}),r=us.A.sanitize(r,this.getDOMPurifyConfig()),void 0!==t&&(r=this.applyHighlights(r,t)),r},applyHighlights(e,t){if(!this.highlights||0===this.highlights.length)return e;let s=e;for(const a of this.highlights)if(a.text&&a.messageIndex===t){const e=a.text.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");try{const t=new RegExp(`(${e})`);s=s.replace(t,`<span class="user-highlight" data-highlight-id="${a.id}">$1</span>`)}catch(i){}}return s},formatDate(e){if(!e)return"";let t;if("number"===typeof e)t=new Date(e);else{if("string"!==typeof e)return"";t=new Date(e),isNaN(t.getTime())&&(t=new Date(parseInt(e)))}if(isNaN(t.getTime()))return"";const s=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),n=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0");return`${s}-${i}-${a} ${n}:${o}`},resetReader(){this.metadata={},this.messages=[],this.rawData=[],this.currentPage=1,this.$refs.fileInput&&(this.$refs.fileInput.value="")},prevPage(){this.currentPage>1&&(this.currentPage--,this.scrollToTop())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.scrollToTop())},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.scrollToTop())},onPageSizeChange(){this.currentPage>this.totalPages&&(this.currentPage=this.totalPages||1),this.scrollToTop()},scrollToTop(){this.$nextTick(()=>{const e=document.querySelector(".messages-wrapper");e&&e.scrollIntoView({behavior:"smooth",block:"start"})})},toggleSearchBar(){this.showSearchBar=!this.showSearchBar,this.showSearchBar?this.$nextTick(()=>{const e=document.querySelector(".search-input");e&&e.focus()}):this.clearSearch()},onSearchInput(){this.currentPage=1},clearSearch(){this.searchQuery="",this.currentPage=1},loadFavoritesFromStorage(){try{const e=localStorage.getItem("st_reader_favorites");e&&(this.favorites=JSON.parse(e))}catch(e){console.error("åŠ è½½æ”¶è—å¤±è´¥:",e)}},saveFavoritesToStorage(){try{localStorage.setItem("st_reader_favorites",JSON.stringify(this.favorites))}catch(e){console.error("ä¿å­˜æ”¶è—å¤±è´¥:",e)}},loadHighlightsFromStorage(){try{const e=localStorage.getItem("st_reader_highlights");e&&(this.highlights=JSON.parse(e))}catch(e){console.error("åŠ è½½é«˜äº®å¤±è´¥:",e)}},saveHighlightsToStorage(){try{localStorage.setItem("st_reader_highlights",JSON.stringify(this.highlights))}catch(e){console.error("ä¿å­˜é«˜äº®å¤±è´¥:",e)}},toggleFavoritesPanel(){this.showFavoritesPanel=!this.showFavoritesPanel},toggleFavoriteMessage(e,t){const s=this.favorites.findIndex(t=>"message"===t.type&&t.messageIndex===e);-1!==s?this.favorites.splice(s,1):this.favorites.unshift({id:this.generateUUID(),type:"message",messageIndex:e,text:this.getMessageContent(t),speaker:t.name,createdAt:Date.now()}),this.saveFavoritesToStorage()},isMessageFavorited(e){return this.favorites.some(t=>"message"===t.type&&t.messageIndex===e)},handleTextSelection(e,t,s){const i=window.getSelection(),a=i.toString().trim();a.length>0&&(this.selectionMenu={show:!0,x:e.clientX,y:e.clientY-40,text:a,messageIndex:t,speaker:s.name})},hideSelectionMenu(e){e.target.closest(".selection-menu")||(this.selectionMenu.show=!1)},favoriteSelectedText(){this.selectionMenu.text&&(this.favorites.unshift({id:this.generateUUID(),type:"text",messageIndex:this.selectionMenu.messageIndex,text:this.selectionMenu.text,speaker:this.selectionMenu.speaker,createdAt:Date.now()}),this.saveFavoritesToStorage(),this.selectionMenu.show=!1,window.getSelection().removeAllRanges())},highlightSelectedText(){this.selectionMenu.text&&(this.highlights.push({id:this.generateUUID(),messageIndex:this.selectionMenu.messageIndex,text:this.selectionMenu.text,createdAt:Date.now()}),this.saveHighlightsToStorage(),this.selectionMenu.show=!1,window.getSelection().removeAllRanges(),this.readingMode&&this.generateReadingContent())},deleteHighlight(e){const t=this.highlights.findIndex(t=>t.id===e);-1!==t&&(this.highlights.splice(t,1),this.saveHighlightsToStorage(),this.readingMode&&this.generateReadingContent())},onHighlightClick(e){const t=e.target.closest(".user-highlight");t&&t.dataset.highlightId&&(e.preventDefault(),e.stopPropagation(),this.highlightMenu={show:!0,x:e.clientX,y:e.clientY,highlightId:t.dataset.highlightId})},removeHighlightFromMenu(){this.highlightMenu.highlightId&&this.deleteHighlight(this.highlightMenu.highlightId),this.highlightMenu.show=!1},hideHighlightMenu(e){e&&e.target.closest(".highlight-menu")||(this.highlightMenu.show=!1)},navigateToFavorite(e){if(void 0===e.messageIndex||null===e.messageIndex)return;const t=e.messageIndex,s=Math.floor(t/this.pageSize)+1;s!==this.currentPage&&(this.currentPage=s),this.showFavoritesPanel=!1,this.$nextTick(()=>{const e=t%this.pageSize,s=document.querySelectorAll(".message-block");s[e]&&(s[e].scrollIntoView({behavior:"smooth",block:"center"}),s[e].classList.add("highlight-flash"),setTimeout(()=>{s[e].classList.remove("highlight-flash")},2e3))})},copySelectedText(){this.selectionMenu.text&&navigator.clipboard.writeText(this.selectionMenu.text).then(()=>{this.selectionMenu.show=!1})},copyFavorite(e){navigator.clipboard.writeText(e.text)},deleteFavorite(e){this.favorites=this.favorites.filter(t=>t.id!==e),this.saveFavoritesToStorage()},clearAllFavorites(){confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æ”¶è—å—ï¼Ÿ")&&(this.favorites=[],this.saveFavoritesToStorage())},exportFavorites(){const e=JSON.stringify(this.favorites,null,2),t=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(t),i=document.createElement("a");i.href=s,i.download="favorites.json",i.click(),URL.revokeObjectURL(s)},formatFavoriteTime(e){const t=new Date(e);return`${t.getMonth()+1}/${t.getDate()} ${t.getHours()}:${String(t.getMinutes()).padStart(2,"0")}`},loadTagFiltersFromStorage(){try{const e=localStorage.getItem("st_reader_tag_filters");e&&(this.tagFilters=JSON.parse(e))}catch(e){console.error("åŠ è½½æ ‡ç­¾è¿‡æ»¤å™¨å¤±è´¥:",e)}},saveTagFiltersToStorage(){try{localStorage.setItem("st_reader_tag_filters",JSON.stringify(this.tagFilters))}catch(e){console.error("ä¿å­˜æ ‡ç­¾è¿‡æ»¤å™¨å¤±è´¥:",e)}},toggleTagFilterManager(){this.showTagFilterManager=!this.showTagFilterManager,this.showTagFilterManager||this.resetTagFilterForm()},resetTagFilterForm(){this.editingTagFilter=null,this.tagFilterForm={id:"",name:"",tagName:"",mode:"remove",disabled:!1}},addNewTagFilter(){this.resetTagFilterForm(),this.tagFilterForm.id=this.generateUUID()},editTagFilter(e){this.editingTagFilter=e.id,this.tagFilterForm={...e}},saveTagFilter(){if(this.tagFilterForm.name&&this.tagFilterForm.tagName){if(this.editingTagFilter){const e=this.tagFilters.findIndex(e=>e.id===this.editingTagFilter);-1!==e&&this.tagFilters.splice(e,1,{...this.tagFilterForm})}else this.tagFilters.push({...this.tagFilterForm});this.saveTagFiltersToStorage(),this.resetTagFilterForm()}else alert("è¯·å¡«å†™è¿‡æ»¤å™¨åç§°å’Œæ ‡ç­¾å")},cancelEditTagFilter(){this.resetTagFilterForm()},deleteTagFilter(e){confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªè¿‡æ»¤å™¨å—ï¼Ÿ")&&(this.tagFilters=this.tagFilters.filter(t=>t.id!==e),this.saveTagFiltersToStorage())},toggleTagFilter(e){e.disabled=!e.disabled,this.saveTagFiltersToStorage()},moveTagFilterUp(e){if(e>0){const t=this.tagFilters[e];this.tagFilters.splice(e,1),this.tagFilters.splice(e-1,0,t),this.saveTagFiltersToStorage()}},moveTagFilterDown(e){if(e<this.tagFilters.length-1){const t=this.tagFilters[e];this.tagFilters.splice(e,1),this.tagFilters.splice(e+1,0,t),this.saveTagFiltersToStorage()}},applyTagFilters(e){if(!e)return e;let t=e;for(const i of this.tagFilters)if(!i.disabled)try{const s=i.tagName.split(",").map(e=>e.trim()).filter(e=>e);for(const a of s){const s=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");if("remove"===i.mode){const e=new RegExp(`<${s}[^>]*>[\\s\\S]*?<\\/${s}>`,"gi");t=t.replace(e,"");const i=new RegExp(`<${s}[^>]*/?>`,"gi");t=t.replace(i,"")}else if("keep"===i.mode){const i=new RegExp(`<${s}[^>]*>([\\s\\S]*?)<\\/${s}>`,"gi"),a=[];let n;while(null!==(n=i.exec(e)))a.push(n[1]);a.length>0&&(t=a.join("\n\n"))}else if("unwrap"===i.mode){const e=new RegExp(`<${s}[^>]*>([\\s\\S]*?)<\\/${s}>`,"gi");t=t.replace(e,"$1");const i=new RegExp(`<${s}[^>]*/?>`,"gi");t=t.replace(i,"")}}}catch(s){console.error(`æ ‡ç­¾è¿‡æ»¤å™¨ "${i.name}" æ‰§è¡Œå¤±è´¥:`,s)}return t},loadScriptsFromStorage(){try{const e=localStorage.getItem("st_reader_regex_scripts");e&&(this.regexScripts=JSON.parse(e))}catch(e){console.error("åŠ è½½æ­£åˆ™è„šæœ¬å¤±è´¥:",e)}},saveScriptsToStorage(){try{localStorage.setItem("st_reader_regex_scripts",JSON.stringify(this.regexScripts))}catch(e){console.error("ä¿å­˜æ­£åˆ™è„šæœ¬å¤±è´¥:",e)}},toggleRegexManager(){this.showRegexManager=!this.showRegexManager,this.showRegexManager||this.resetScriptForm()},resetScriptForm(){this.editingScript=null,this.scriptForm={id:"",scriptName:"",findRegex:"",replaceString:"",disabled:!1}},addNewScript(){this.resetScriptForm(),this.scriptForm.id=this.generateUUID()},editScript(e){this.editingScript=e.id,this.scriptForm={...e}},saveScript(){if(this.scriptForm.scriptName&&this.scriptForm.findRegex){if(this.editingScript){const e=this.regexScripts.findIndex(e=>e.id===this.editingScript);-1!==e&&this.regexScripts.splice(e,1,{...this.scriptForm})}else this.regexScripts.push({...this.scriptForm});this.saveScriptsToStorage(),this.resetScriptForm()}else alert("è¯·å¡«å†™è„šæœ¬åç§°å’Œæ­£åˆ™è¡¨è¾¾å¼")},cancelEdit(){this.resetScriptForm()},deleteScript(e){confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæ­£åˆ™è„šæœ¬å—ï¼Ÿ")&&(this.regexScripts=this.regexScripts.filter(t=>t.id!==e),this.saveScriptsToStorage())},toggleScript(e){e.disabled=!e.disabled,this.saveScriptsToStorage()},moveScriptUp(e){if(e>0){const t=this.regexScripts[e];this.regexScripts.splice(e,1),this.regexScripts.splice(e-1,0,t),this.saveScriptsToStorage()}},moveScriptDown(e){if(e<this.regexScripts.length-1){const t=this.regexScripts[e];this.regexScripts.splice(e,1),this.regexScripts.splice(e+1,0,t),this.saveScriptsToStorage()}},handleDragStart(e){this.dragIndex=e},handleDragOver(e){e.preventDefault()},handleDrop(e,t){if(e.preventDefault(),null!==this.dragIndex&&this.dragIndex!==t){const e=this.regexScripts[this.dragIndex];this.regexScripts.splice(this.dragIndex,1),this.regexScripts.splice(t,0,e),this.saveScriptsToStorage()}this.dragIndex=null},handleDragEnd(){this.dragIndex=null},generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0,s="x"===e?t:3&t|8;return s.toString(16)})},importScripts(){const e=document.createElement("input");e.type="file",e.accept=".json",e.multiple=!0,e.onchange=async e=>{const t=Array.from(e.target.files);if(!t.length)return;let s=0,i=0;const a=e=>new Promise(t=>{const s=new FileReader;s.onload=s=>{try{const e=JSON.parse(s.target.result);t(e)}catch(i){console.error(`è§£ææ–‡ä»¶ ${e.name} å¤±è´¥:`,i),t(null)}},s.readAsText(e)}),n=await Promise.all(t.map(e=>a(e)));n.forEach(e=>{if(!e)return;s++;const t=Array.isArray(e)?e:[e];t.forEach(e=>{if(e.findRegex){const t={id:e.id||this.generateUUID(),scriptName:e.scriptName||"æœªå‘½åè„šæœ¬",findRegex:e.findRegex,replaceString:e.replaceString||"",disabled:e.disabled||!1},s=this.regexScripts.findIndex(e=>e.id===t.id);-1!==s?this.regexScripts.splice(s,1,t):this.regexScripts.push(t),i++}})}),i>0?(this.saveScriptsToStorage(),alert(`æˆåŠŸä» ${s} ä¸ªæ–‡ä»¶ä¸­å¯¼å…¥äº† ${i} ä¸ªè„šæœ¬`)):alert("æœªæ‰¾åˆ°æœ‰æ•ˆçš„æ­£åˆ™è„šæœ¬æ•°æ®")},e.click()},exportScripts(){const e=JSON.stringify(this.regexScripts,null,2),t=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(t),i=document.createElement("a");i.href=s,i.download="regex_scripts.json",i.click(),URL.revokeObjectURL(s)},importFromPNG(){const e=document.createElement("input");e.type="file",e.accept=".png",e.onchange=async e=>{const t=e.target.files[0];if(t)try{const e=await t.arrayBuffer(),s=this.extractPNGChara(e);if(!s)return void alert("æœªèƒ½ä» PNG ä¸­è¯»å–è§’è‰²æ•°æ®ï¼Œè¯·ç¡®ä¿è¿™æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„è§’è‰²å¡æ–‡ä»¶ã€‚");const i=JSON.parse(s);let a=null;if(i.data?.extensions?.regex_scripts?a=i.data.extensions.regex_scripts:i.extensions?.regex_scripts?a=i.extensions.regex_scripts:i.regex_scripts&&(a=i.regex_scripts),!a||!Array.isArray(a)||0===a.length)return void alert("è¯¥è§’è‰²å¡ä¸­æ²¡æœ‰æ‰¾åˆ°æ­£åˆ™è„šæœ¬ã€‚");let n=0;a.forEach(e=>{if(e.findRegex){const t={id:e.id||this.generateUUID(),scriptName:e.scriptName||"æœªå‘½åè„šæœ¬",findRegex:e.findRegex,replaceString:e.replaceString||"",disabled:e.disabled||!1},s=this.regexScripts.findIndex(e=>e.id===t.id||e.scriptName===t.scriptName);-1!==s?confirm(`è„šæœ¬ "${t.scriptName}" å·²å­˜åœ¨ï¼Œæ˜¯å¦è¦†ç›–ï¼Ÿ`)&&(this.regexScripts.splice(s,1,t),n++):(this.regexScripts.push(t),n++)}}),this.saveScriptsToStorage(),alert(`æˆåŠŸä»è§’è‰²å¡å¯¼å…¥ ${n} ä¸ªæ­£åˆ™è„šæœ¬ï¼`)}catch(s){console.error("å¯¼å…¥å¤±è´¥:",s),alert("å¯¼å…¥å¤±è´¥: "+s.message)}},e.click()},extractPNGChara(e){const t=new Uint8Array(e),s=[137,80,78,71,13,10,26,10];for(let n=0;n<8;n++)if(t[n]!==s[n])throw new Error("ä¸æ˜¯æœ‰æ•ˆçš„ PNG æ–‡ä»¶");let i=8;while(i<t.length){const e=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3];i+=4;const s=String.fromCharCode(t[i],t[i+1],t[i+2],t[i+3]);if(i+=4,"tEXt"===s){const s=t.slice(i,i+e);let n=-1;for(let e=0;e<s.length;e++)if(0===s[e]){n=e;break}if(-1!==n){const e=(new TextDecoder).decode(s.slice(0,n));if("chara"===e){const e=(new TextDecoder).decode(s.slice(n+1));try{return this.decodeBase64UTF8(e)}catch(a){console.error("Base64 è§£ç å¤±è´¥:",a)}}}}if(i+=e+4,"IEND"===s)break}return null},decodeBase64UTF8(e){const t=atob(e),s=new Uint8Array(t.length);for(let i=0;i<t.length;i++)s[i]=t.charCodeAt(i);return new TextDecoder("utf-8").decode(s)},applyRegexScripts(e){if(!e)return e;let t=e;for(const i of this.regexScripts)if(!i.disabled)try{const e=i.findRegex.match(/^\/(.*)\/([gimsuy]*)$/);let s;s=e?new RegExp(e[1],e[2]):new RegExp(i.findRegex,"g"),t=t.replace(s,i.replaceString)}catch(s){console.error(`æ­£åˆ™è„šæœ¬ "${i.scriptName}" æ‰§è¡Œå¤±è´¥:`,s)}return t},openExportRangeDialog(){this.exportDialog={show:!0,startFloor:1,endFloor:this.filteredMessages.length,includeName:!0,includeTime:!0}},closeExportDialog(){this.exportDialog.show=!1},getExportCount(){const e=Math.max(1,Math.min(this.exportDialog.startFloor,this.filteredMessages.length)),t=Math.max(1,Math.min(this.exportDialog.endFloor,this.filteredMessages.length));return Math.max(0,t-e+1)},formatMessageForExport(e,t){let s=this.getMessageContent(e);s=this.applyTagFilters(s),s=this.applyRegexScripts(s),s=this.stripHtmlTags(s);let i="";return i+=`========== ç¬¬ ${t} æ¥¼ ==========\n`,this.exportDialog.includeName&&(i+=`ã€${e.name}ã€‘`),this.exportDialog.includeTime&&e.send_date&&(this.exportDialog.includeName&&(i+=" "),i+=`[${e.send_date}]`),(this.exportDialog.includeName||this.exportDialog.includeTime)&&(i+="\n\n"),i+=s,i},getExportPreview(){const e=Math.max(1,Math.min(this.exportDialog.startFloor,this.filteredMessages.length)),t=Math.max(1,Math.min(this.exportDialog.endFloor,this.filteredMessages.length));if(e>t||e<1)return"æ— æ•ˆçš„æ¥¼å±‚èŒƒå›´";const s=Math.min(3,t-e+1);let i="";for(let a=0;a<s;a++){const t=e+a,s=this.filteredMessages[t-1];s&&(a>0&&(i+="\n\n"),i+=this.formatMessageForExport(s,t))}return t-e+1>3&&(i+="\n\n...(è¿˜æœ‰ "+(t-e+1-3)+" æ¡æ¶ˆæ¯)"),i.length>800&&(i=i.substring(0,800)+"\n...(é¢„è§ˆå·²æˆªæ–­)"),i},stripHtmlTags(e){if(!e)return"";const t=document.createElement("div");t.innerHTML=e;let s=t.textContent||t.innerText||"";return s=s.replace(/\n{3,}/g,"\n\n"),s.trim()},doExportRange(){const e=Math.max(1,Math.min(this.exportDialog.startFloor,this.filteredMessages.length)),t=Math.max(1,Math.min(this.exportDialog.endFloor,this.filteredMessages.length));if(e>t||e<1)return void alert("è¯·è¾“å…¥æœ‰æ•ˆçš„æ¥¼å±‚èŒƒå›´");let s="";for(let l=e;l<=t;l++){const t=this.filteredMessages[l-1];t&&(l>e&&(s+="\n\n\n"),s+=this.formatMessageForExport(t,l))}const i=new Blob([s],{type:"text/plain;charset=utf-8"}),a=URL.createObjectURL(i),n=document.createElement("a");n.href=a;const o=(new Date).toISOString().slice(0,10),r=this.metadata.character_name||"èŠå¤©è®°å½•";n.download=`${r}_æ¥¼å±‚${e}-${t}_${o}.txt`,n.click(),URL.revokeObjectURL(a),this.closeExportDialog()},toggleStylePanel(){this.showStylePanel=!this.showStylePanel},loadStylesFromStorage(){try{const e=localStorage.getItem("st_reader_text_styles");if(e){const t=JSON.parse(e);this.textStyles={...this.textStyles,...t}}}catch(e){console.error("åŠ è½½æ ·å¼è®¾ç½®å¤±è´¥:",e)}},saveStylesToStorage(){try{localStorage.setItem("st_reader_text_styles",JSON.stringify(this.textStyles))}catch(e){console.error("ä¿å­˜æ ·å¼è®¾ç½®å¤±è´¥:",e)}},handleStyleChange(){this.saveStylesToStorage(),this.readingMode&&this.handleResize()},resetStyles(){this.textStyles={fontFamily:"system",fontSize:16,lineHeight:1.8,paragraphSpacing:1,textColor:"#1a1a1a",textAlign:"justify"},this.saveStylesToStorage()},setTextColor(e){this.textStyles.textColor=e,this.saveStylesToStorage()},setTextAlign(e){this.textStyles.textAlign=e,this.saveStylesToStorage()},loadCustomFonts(){try{const e=localStorage.getItem("st_reader_custom_fonts");e&&(this.customFonts=JSON.parse(e),this.customFonts.forEach(e=>{this.registerFontFace(e)}))}catch(e){console.error("åŠ è½½è‡ªå®šä¹‰å­—ä½“å¤±è´¥:",e)}},saveCustomFonts(){try{localStorage.setItem("st_reader_custom_fonts",JSON.stringify(this.customFonts))}catch(e){console.error("ä¿å­˜è‡ªå®šä¹‰å­—ä½“å¤±è´¥:",e)}},registerFontFace(e){const t=document.createElement("style");t.id=`custom-font-${e.id}`,t.textContent=`\n        @font-face {\n          font-family: "${e.name}";\n          src: url("${e.url}") format("${e.format}");\n          font-weight: normal;\n          font-style: normal;\n          font-display: swap;\n        }\n      `,document.head.appendChild(t)},unregisterFontFace(e){const t=document.getElementById(`custom-font-${e}`);t&&t.remove()},async addCustomFont(){if(!this.customFontForm.name)return void alert("è¯·è¾“å…¥å­—ä½“åç§°");let e="",t="truetype";if(this.customFontForm.file)try{e=await this.fileToDataUrl(this.customFontForm.file),t=this.getFontFormat(this.customFontForm.file.name)}catch(a){return void alert("è¯»å–å­—ä½“æ–‡ä»¶å¤±è´¥: "+a.message)}else{if(!this.customFontForm.url)return void alert("è¯·é€‰æ‹©å­—ä½“æ–‡ä»¶æˆ–è¾“å…¥å­—ä½“URL");e=this.customFontForm.url,t=this.getFontFormat(this.customFontForm.url)}const s=Date.now().toString(),i={id:s,name:this.customFontForm.name,url:e,format:t};this.registerFontFace(i),this.customFonts.push(i),this.saveCustomFonts(),this.resetCustomFontForm(),this.showCustomFontDialog=!1,this.textStyles.fontFamily="custom-"+s,this.saveStylesToStorage()},deleteCustomFont(e){confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªè‡ªå®šä¹‰å­—ä½“å—ï¼Ÿ")&&(this.textStyles.fontFamily==="custom-"+e&&(this.textStyles.fontFamily="system",this.saveStylesToStorage()),this.unregisterFontFace(e),this.customFonts=this.customFonts.filter(t=>t.id!==e),this.saveCustomFonts())},fileToDataUrl(e){return new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=s,i.readAsDataURL(e)})},getFontFormat(e){const t=e.split(".").pop().toLowerCase(),s={ttf:"truetype",otf:"opentype",woff:"woff",woff2:"woff2"};return s[t]||"truetype"},handleFontFileSelect(e){const t=e.target.files[0];t&&(this.customFontForm.file=t,this.customFontForm.name||(this.customFontForm.name=t.name.replace(/\.(ttf|otf|woff2?|TTF|OTF|WOFF2?)$/,"")))},resetCustomFontForm(){this.customFontForm={name:"",url:"",file:null};const e=this.$refs.fontFileInput;e&&(e.value="")},getPreviewStyles(){return{fontFamily:this.getFontFamily(),fontSize:this.textStyles.fontSize+"px",lineHeight:this.textStyles.lineHeight,color:this.textStyles.textColor,textAlign:this.textStyles.textAlign}},getContentStyles(){return{fontFamily:this.getFontFamily(),fontSize:this.textStyles.fontSize+"px",lineHeight:this.textStyles.lineHeight,color:this.textStyles.textColor,textAlign:this.textStyles.textAlign,"--paragraph-spacing":this.textStyles.paragraphSpacing+"em","--content-font":this.getFontFamily()}},getFontFamily(){const e={system:'-apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif',serif:'"Noto Serif SC", "Source Han Serif SC", "SimSun", "å®‹ä½“", serif',"sans-serif":'"Noto Sans SC", "Source Han Sans SC", "Microsoft YaHei", "å¾®è½¯é›…é»‘", sans-serif',kaiti:'"KaiTi", "æ¥·ä½“", "STKaiti", "åæ–‡æ¥·ä½“", serif',fangsong:'"FangSong", "ä»¿å®‹", "STFangsong", "åæ–‡ä»¿å®‹", serif',monospace:'"Consolas", "Monaco", "Source Code Pro", monospace',alegreya:'"Alegreya", serif',cangeryunhei:'"ä»“è€³äº‘é»‘", sans-serif',huiwenmingchao:'"æ±‡æ–‡æ˜æœ", serif',kongmingchao:'"ç©ºæ˜æœ", serif',pingxianzhensong:'"å±æ˜¾è‡»å®‹", serif',wenyueminguofangsong:'"æ–‡æ‚¦æ°‘å›½ä»¿å®‹", serif'};if(this.textStyles.fontFamily.startsWith("custom-")){const e=this.textStyles.fontFamily.replace("custom-",""),t=this.customFonts.find(t=>t.id===e);if(t)return`"${t.name}", sans-serif`}return e[this.textStyles.fontFamily]||e["system"]},toggleReadingMode(){this.readingMode=!this.readingMode,this.readingMode?(this.toolbarVisible=!1,this.showSearchBar=!1,this.showRegexManager=!1,this.showTagFilterManager=!1,this.showFavoritesPanel=!1,this.showStylePanel=!1,this.selectionMenu.show=!1,this.readingCurrentPage=1,document.body.style.overflow="hidden",this.generateReadingContent(),window.addEventListener("resize",this.handleResize)):(document.body.style.overflow="",this.toolbarVisible=!1,window.removeEventListener("resize",this.handleResize))},generateReadingContent(){let e="";for(let s=0;s<this.filteredMessages.length;s++){const t=this.filteredMessages[s];let i=this.getMessageContent(t);i=this.renderContent(i,s),s>0&&(e+='<div class="reading-separator"></div>'),e+=`<div class="reading-message" data-floor="${s}">`,t.name&&(e+=`<p class="reading-speaker-name">ã€${t.name}ã€‘</p>`),e+=i,e+="</div>"}const t=this.readingCurrentPage||1;this.readingFullHtml=e,this.$nextTick(()=>{const e=this.$refs.readingContentEl;e&&(e.style.width=""),this.updateColumnWidth(),this.$nextTick(()=>{setTimeout(()=>{this.calculateTotalPages(),this.readingCurrentPage=Math.min(t,this.readingTotalPages)},50)})})},updateColumnWidth(){const e=this.$refs.readingContentEl;e&&(e.style.columnWidth=`${window.innerWidth}px`)},calculateTotalPages(){const e=this.$refs.readingContentEl;if(!e)return;const t=window.innerWidth,s=e.scrollWidth;s>e.offsetWidth&&(e.style.width=`${s}px`),this.windowWidth=t,this.readingTotalPages=Math.max(1,Math.ceil(s/t)),this.readingCurrentPage>this.readingTotalPages&&(this.readingCurrentPage=this.readingTotalPages)},handleResize(){this.resizeTimer&&clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(()=>{const e=this.$refs.readingContentEl;e&&(e.style.width=""),this.updateColumnWidth(),this.$nextTick(()=>{setTimeout(()=>{this.calculateTotalPages()},50)})},100)},getReadingTransform(){const e=(this.readingCurrentPage-1)*this.windowWidth;return{transform:`translateX(-${e}px)`,...this.getContentStyles()}},getReadingFloorRange(){return`${this.readingCurrentPage} / ${this.readingTotalPages}`},readingPrevPage(){this.readingCurrentPage>1&&this.readingCurrentPage--},readingNextPage(){this.readingCurrentPage<this.readingTotalPages&&this.readingCurrentPage++},handleReadingClick(e){const t=window.innerWidth,s=e.clientX;s<.3*t?this.readingPrevPage():s>.7*t?this.readingNextPage():(this.toolbarVisible=!this.toolbarVisible,this.toolbarVisible&&(this.toolbarTimeout&&clearTimeout(this.toolbarTimeout),this.toolbarTimeout=setTimeout(()=>{this.toolbarVisible=!1},3e3)))},onReadingTouchStart(e){this.readingTouchStartX=e.touches[0].clientX,this.readingTouchStartY=e.touches[0].clientY},onReadingTouchEnd(e){const t=e.changedTouches[0].clientX,s=e.changedTouches[0].clientY,i=t-this.readingTouchStartX,a=s-this.readingTouchStartY;Math.abs(i)>Math.abs(a)&&Math.abs(i)>50&&(i>0?this.readingPrevPage():this.readingNextPage())},onReadingMouseUp(e){const t=window.getSelection(),s=t.toString().trim();if(s.length>0){let i=null;const a=t.getRangeAt(0),n=a.commonAncestorContainer;let o=3===n.nodeType?n.parentElement:n;while(o&&o!==document.body){if(o.classList&&o.classList.contains("reading-message")&&o.hasAttribute("data-floor")){i=parseInt(o.getAttribute("data-floor"));break}o=o.parentElement}this.selectionMenu={show:!0,x:e.clientX,y:e.clientY-40,text:s,messageIndex:i,speaker:null!==i&&this.filteredMessages[i]?this.filteredMessages[i].name:""}}},toggleToolbar(){this.toolbarVisible=!this.toolbarVisible,this.toolbarVisible&&(this.toolbarTimeout&&clearTimeout(this.toolbarTimeout),this.toolbarTimeout=setTimeout(()=>{this.toolbarVisible=!1},3e3))}}},ms=s(6262);const vs=(0,ms.A)(ps,[["render",ds],["__scopeId","data-v-b1287fc0"]]);var fs=vs;(0,i.Ef)(fs).mount("#app")}},t={};function s(i){var a=t[i];if(void 0!==a)return a.exports;var n=t[i]={exports:{}};return e[i].call(n.exports,n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,i,a,n){if(!i){var o=1/0;for(g=0;g<e.length;g++){i=e[g][0],a=e[g][1],n=e[g][2];for(var r=!0,l=0;l<i.length;l++)(!1&n||o>=n)&&Object.keys(s.O).every(function(e){return s.O[e](i[l])})?i.splice(l--,1):(r=!1,n<o&&(o=n));if(r){e.splice(g--,1);var c=a();void 0!==c&&(t=c)}}return t}n=n||0;for(var g=e.length;g>0&&e[g-1][2]>n;g--)e[g]=e[g-1];e[g]=[i,a,n]}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,n,o=i[0],r=i[1],l=i[2],c=0;if(o.some(function(t){return 0!==e[t]})){for(a in r)s.o(r,a)&&(s.m[a]=r[a]);if(l)var g=l(s)}for(t&&t(i);c<o.length;c++)n=o[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(g)},i=self["webpackChunkst_reader"]=self["webpackChunkst_reader"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[504],function(){return s(6015)});i=s.O(i)})();
//# sourceMappingURL=app.c6926760.js.map