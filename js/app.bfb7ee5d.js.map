{"version":3,"file":"js/app.bfb7ee5d.js","mappings":"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","sources":["webpack://st_reader/./src/App.vue","webpack://st_reader/./src/App.vue?7ccd","webpack://st_reader/./src/main.js","webpack://st_reader/webpack/bootstrap","webpack://st_reader/webpack/runtime/chunk loaded","webpack://st_reader/webpack/runtime/define property getters","webpack://st_reader/webpack/runtime/global","webpack://st_reader/webpack/runtime/hasOwnProperty shorthand","webpack://st_reader/webpack/runtime/jsonp chunk loading","webpack://st_reader/webpack/startup"],"sourcesContent":["<template>\n  <div class=\"st-reader\">\n    <div v-if=\"!messages.length\" class=\"upload-area\">\n      <div class=\"upload-container\">\n        <input\n          type=\"file\"\n          ref=\"fileInput\"\n          @change=\"handleFileUpload\"\n          accept=\".jsonl\"\n          id=\"file-input\"\n          class=\"file-input\"\n        />\n        <label for=\"file-input\" class=\"upload-label\">\n          <div class=\"upload-text\"> JSONL </div>\n          <div class=\"upload-hint\">SillyTavern </div>\n        </label>\n      </div>\n    </div>\n\n    <div v-else class=\"chat-container\">\n      <div class=\"chat-header\">\n        <div class=\"header-content\">\n          <h1 class=\"chat-title\">{{ metadata.character_name || '' }}</h1>\n          <div class=\"chat-meta\">\n            <span v-if=\"metadata.create_date\">{{ metadata.create_date }}</span>\n            <span class=\"message-count\">{{ messages.length }} </span>\n          </div>\n        </div>\n        <div class=\"header-actions\">\n          <button @click=\"toggleSearchBar\" :class=\"['action-button', 'search-toggle', { 'active': showSearchBar }]\">\n            \n          </button>\n          <button @click=\"toggleTagFilterManager\" :class=\"['action-button', { 'active': showTagFilterManager }]\">\n             <span v-if=\"tagFilters.length\">({{ tagFilters.filter(f => !f.disabled).length }})</span>\n          </button>\n          <button @click=\"toggleRegexManager\" class=\"action-button regex-button\">\n             <span v-if=\"regexScripts.length\">({{ regexScripts.filter(s => !s.disabled).length }})</span>\n          </button>\n          <button @click=\"toggleFavoritesPanel\" :class=\"['action-button', { 'active': showFavoritesPanel }]\">\n             <span v-if=\"favorites.length\">({{ favorites.length }})</span>\n          </button>\n          <button @click=\"openExportRangeDialog\" class=\"action-button\">\n            \n          </button>\n          <button @click=\"toggleStylePanel\" :class=\"['action-button', { 'active': showStylePanel }]\">\n            \n          </button>\n          <button @click=\"toggleReadingMode\" :class=\"['action-button', 'reading-mode-btn', { 'active': readingMode }]\">\n            {{ readingMode ? '' : '' }}\n          </button>\n          <button @click=\"resetReader\" class=\"reset-button\"></button>\n        </div>\n      </div>\n\n      <div v-if=\"showSearchBar\" class=\"search-bar\">\n        <div class=\"search-input-wrapper\">\n          <input \n            v-model=\"searchQuery\"\n            @input=\"onSearchInput\"\n            type=\"text\" \n            class=\"search-input\"\n            placeholder=\"...\"\n          />\n          <button v-if=\"searchQuery\" @click=\"clearSearch\" class=\"search-clear\" title=\"\"></button>\n        </div>\n        <div class=\"search-info\">\n          <span v-if=\"searchQuery\">\n             {{ filteredMessages.length }} \n          </span>\n        </div>\n      </div>\n\n      <div v-if=\"showTagFilterManager\" class=\"regex-manager tag-filter-manager\">\n        <div class=\"regex-header\">\n          <h2></h2>\n          <div class=\"regex-actions\">\n            <button @click=\"addNewTagFilter\" class=\"btn btn-primary\"></button>\n          </div>\n        </div>\n\n        <div v-if=\"tagFilterForm.id\" class=\"script-form\">\n          <div class=\"form-group\">\n            <label></label>\n            <input v-model=\"tagFilterForm.name\" type=\"text\" placeholder=\"\" />\n          </div>\n          <div class=\"form-group\">\n            <label></label>\n            <input v-model=\"tagFilterForm.tagName\" type=\"text\" placeholder=\"think  thinking\" />\n            <div class=\"form-hint\">think,thinking,disclaimer</div>\n          </div>\n          <div class=\"form-group\">\n            <label></label>\n            <select v-model=\"tagFilterForm.mode\" class=\"form-select\">\n              <option value=\"remove\"></option>\n              <option value=\"keep\"></option>\n              <option value=\"unwrap\"></option>\n            </select>\n          </div>\n          <div class=\"form-group checkbox-group\">\n            <label>\n              <input v-model=\"tagFilterForm.disabled\" type=\"checkbox\" />\n              \n            </label>\n          </div>\n          <div class=\"form-buttons\">\n            <button @click=\"cancelEditTagFilter\" class=\"btn btn-secondary\"></button>\n            <button @click=\"saveTagFilter\" class=\"btn btn-primary\"></button>\n          </div>\n        </div>\n\n        <div class=\"script-list\">\n          <div v-if=\"!tagFilters.length\" class=\"no-scripts\">\n            \"\"\n          </div>\n          <div\n            v-for=\"(filter, index) in tagFilters\"\n            :key=\"filter.id\"\n            :class=\"['script-item', { 'disabled': filter.disabled }]\"\n          >\n            <div class=\"script-info\">\n              <div class=\"script-name\">{{ filter.name }}</div>\n              <div class=\"script-regex\">\n                {{ filter.mode === 'remove' ? '' : filter.mode === 'keep' ? '' : '' }}: \n                &lt;{{ filter.tagName }}&gt;\n              </div>\n            </div>\n            <div class=\"script-controls\">\n              <button @click=\"moveTagFilterUp(index)\" :disabled=\"index === 0\" class=\"btn-icon\" title=\"\"></button>\n              <button @click=\"moveTagFilterDown(index)\" :disabled=\"index === tagFilters.length - 1\" class=\"btn-icon\" title=\"\"></button>\n              <button @click=\"toggleTagFilter(filter)\" :class=\"['btn-toggle', { 'active': !filter.disabled }]\">\n                {{ filter.disabled ? '' : '' }}\n              </button>\n              <button @click=\"editTagFilter(filter)\" class=\"btn-icon\" title=\"\"></button>\n              <button @click=\"deleteTagFilter(filter.id)\" class=\"btn-icon btn-danger\" title=\"\"></button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div v-if=\"showRegexManager\" class=\"regex-manager\">\n        <div class=\"regex-header\">\n          <h2></h2>\n          <div class=\"regex-actions\">\n            <button @click=\"importScripts\" class=\"btn btn-secondary\">JSON</button>\n            <button @click=\"importFromPNG\" class=\"btn btn-secondary\"></button>\n            <button @click=\"exportScripts\" class=\"btn btn-secondary\" :disabled=\"!regexScripts.length\"></button>\n            <button @click=\"addNewScript\" class=\"btn btn-primary\"></button>\n          </div>\n        </div>\n\n        <div v-if=\"scriptForm.id\" class=\"script-form\">\n          <div class=\"form-group\">\n            <label></label>\n            <input v-model=\"scriptForm.scriptName\" type=\"text\" placeholder=\"\" />\n          </div>\n          <div class=\"form-group\">\n            <label></label>\n            <textarea v-model=\"scriptForm.findRegex\" placeholder=\"/(<think>[\\s\\S]*?</think>)/gs\" rows=\"3\"></textarea>\n            <div class=\"form-hint\">/pattern/flags  g </div>\n          </div>\n          <div class=\"form-group\">\n            <label></label>\n            <input v-model=\"scriptForm.replaceString\" type=\"text\" placeholder=\"\" />\n          </div>\n          <div class=\"form-group checkbox-group\">\n            <label>\n              <input v-model=\"scriptForm.disabled\" type=\"checkbox\" />\n              \n            </label>\n          </div>\n          <div class=\"form-buttons\">\n            <button @click=\"cancelEdit\" class=\"btn btn-secondary\"></button>\n            <button @click=\"saveScript\" class=\"btn btn-primary\"></button>\n          </div>\n        </div>\n\n        <div class=\"script-list\">\n          <div v-if=\"!regexScripts.length\" class=\"no-scripts\">\n            \"\"\"\"\n          </div>\n          <div\n            v-for=\"(script, index) in regexScripts\"\n            :key=\"script.id\"\n            :class=\"['script-item', { 'disabled': script.disabled, 'dragging': dragIndex === index }]\"\n            draggable=\"true\"\n            @dragstart=\"handleDragStart(index)\"\n            @dragover=\"handleDragOver\"\n            @drop=\"(e) => handleDrop(e, index)\"\n            @dragend=\"handleDragEnd\"\n          >\n            <div class=\"script-drag-handle\"></div>\n            <div class=\"script-info\">\n              <div class=\"script-name\">{{ script.scriptName }}</div>\n              <div class=\"script-regex\">{{ script.findRegex.substring(0, 60) }}{{ script.findRegex.length > 60 ? '...' : '' }}</div>\n            </div>\n            <div class=\"script-controls\">\n              <button @click=\"moveScriptUp(index)\" :disabled=\"index === 0\" class=\"btn-icon\" title=\"\"></button>\n              <button @click=\"moveScriptDown(index)\" :disabled=\"index === regexScripts.length - 1\" class=\"btn-icon\" title=\"\"></button>\n              <button @click=\"toggleScript(script)\" :class=\"['btn-toggle', { 'active': !script.disabled }]\">\n                {{ script.disabled ? '' : '' }}\n              </button>\n              <button @click=\"editScript(script)\" class=\"btn-icon\" title=\"\"></button>\n              <button @click=\"deleteScript(script.id)\" class=\"btn-icon btn-danger\" title=\"\"></button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div v-if=\"showFavoritesPanel\" class=\"regex-manager favorites-panel\">\n        <div class=\"regex-header\">\n          <h2></h2>\n          <div class=\"regex-actions\">\n            <button @click=\"exportFavorites\" class=\"btn btn-secondary\" :disabled=\"!favorites.length\"></button>\n            <button @click=\"clearAllFavorites\" class=\"btn btn-secondary\" :disabled=\"!favorites.length\"></button>\n          </div>\n        </div>\n        <div class=\"script-list favorites-list\">\n          <div v-if=\"!favorites.length\" class=\"no-scripts\">\n              \"\"\n          </div>\n          <div v-for=\"fav in favorites\" :key=\"fav.id\" class=\"favorite-item\" @click=\"navigateToFavorite(fav)\" title=\"\">\n            <div class=\"favorite-content\">\n              <div class=\"favorite-type\">{{ fav.type === 'message' ? ' ' : ' ' }} #{{ fav.messageIndex + 1 }}</div>\n              <div class=\"favorite-text\">{{ fav.text.substring(0, 100) }}{{ fav.text.length > 100 ? '...' : '' }}</div>\n              <div class=\"favorite-meta\">\n                <span v-if=\"fav.speaker\">{{ fav.speaker }}</span>\n                <span>{{ formatFavoriteTime(fav.createdAt) }}</span>\n              </div>\n            </div>\n            <div class=\"favorite-actions\">\n              <button @click.stop=\"copyFavorite(fav)\" class=\"btn-icon\" title=\"\"></button>\n              <button @click.stop=\"deleteFavorite(fav.id)\" class=\"btn-icon btn-danger\" title=\"\"></button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div v-if=\"showStylePanel\" class=\"regex-manager style-panel\">\n        <div class=\"regex-header\">\n          <h2></h2>\n          <div class=\"regex-actions\">\n            <button @click=\"resetStyles\" class=\"btn btn-secondary\"></button>\n          </div>\n        </div>\n        \n        <div class=\"style-settings\">\n          <div class=\"style-group\">\n            <label class=\"style-label\"></label>\n            <select v-model=\"textStyles.fontFamily\" @change=\"saveStylesToStorage\" class=\"style-select\">\n              <optgroup label=\"\">\n                <option value=\"system\"></option>\n                <option value=\"serif\"> / </option>\n                <option value=\"sans-serif\"> / </option>\n                <option value=\"kaiti\"></option>\n                <option value=\"fangsong\"></option>\n                <option value=\"monospace\"></option>\n              </optgroup>\n              <optgroup label=\"\">\n                <option value=\"alegreya\">Alegreya</option>\n                <option value=\"cangeryunhei\"></option>\n                <option value=\"huiwenmingchao\"></option>\n                <option value=\"kongmingchao\">/</option>\n                <option value=\"pingxianzhensong\"></option>\n                <option value=\"wenyueminguofangsong\"></option>\n              </optgroup>\n              <optgroup v-if=\"customFonts.length\" label=\"\">\n                <option v-for=\"font in customFonts\" :key=\"font.id\" :value=\"'custom-' + font.id\">\n                  {{ font.name }}\n                </option>\n              </optgroup>\n            </select>\n            <button @click=\"showCustomFontDialog = true\" class=\"btn btn-secondary btn-sm add-font-btn\">\n              + \n            </button>\n          </div>\n\n          <div class=\"style-group\">\n            <label class=\"style-label\"></label>\n            <div class=\"style-slider-row\">\n              <input \n                type=\"range\" \n                v-model.number=\"textStyles.fontSize\" \n                @input=\"handleStyleChange\"\n                min=\"12\" \n                max=\"32\" \n                step=\"1\"\n                class=\"style-slider\"\n              />\n              <span class=\"style-value\">{{ textStyles.fontSize }}px</span>\n            </div>\n          </div>\n\n          <div class=\"style-group\">\n            <label class=\"style-label\"></label>\n            <div class=\"style-slider-row\">\n              <input \n                type=\"range\" \n                v-model.number=\"textStyles.lineHeight\" \n                @input=\"handleStyleChange\"\n                min=\"1.2\" \n                max=\"3\" \n                step=\"0.1\"\n                class=\"style-slider\"\n              />\n              <span class=\"style-value\">{{ textStyles.lineHeight.toFixed(1) }}</span>\n            </div>\n          </div>\n\n          <div class=\"style-group\">\n            <label class=\"style-label\"></label>\n            <div class=\"style-slider-row\">\n              <input \n                type=\"range\" \n                v-model.number=\"textStyles.paragraphSpacing\" \n                @input=\"handleStyleChange\"\n                min=\"0\" \n                max=\"2\" \n                step=\"0.1\"\n                class=\"style-slider\"\n              />\n              <span class=\"style-value\">{{ textStyles.paragraphSpacing.toFixed(1) }}em</span>\n            </div>\n          </div>\n\n          <div class=\"style-group\">\n            <label class=\"style-label\"></label>\n            <div class=\"color-options\">\n              <button \n                v-for=\"color in colorOptions\" \n                :key=\"color.value\"\n                @click=\"setTextColor(color.value)\"\n                :class=\"['color-btn', { 'active': textStyles.textColor === color.value }]\"\n                :style=\"{ backgroundColor: color.value }\"\n                :title=\"color.name\"\n              ></button>\n            </div>\n          </div>\n\n          <div class=\"style-group\">\n            <label class=\"style-label\"></label>\n            <div class=\"align-options\">\n              <button \n                @click=\"setTextAlign('left')\" \n                :class=\"['align-btn', { 'active': textStyles.textAlign === 'left' }]\"\n                title=\"\"\n              ></button>\n              <button \n                @click=\"setTextAlign('justify')\" \n                :class=\"['align-btn', { 'active': textStyles.textAlign === 'justify' }]\"\n                title=\"\"\n              ></button>\n              <button \n                @click=\"setTextAlign('center')\" \n                :class=\"['align-btn', { 'active': textStyles.textAlign === 'center' }]\"\n                title=\"\"\n              ></button>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"style-preview\">\n          <div class=\"style-preview-label\"></div>\n          <div class=\"style-preview-content\" :style=\"getPreviewStyles()\">\n            \n            <br><br>\n            \n          </div>\n        </div>\n\n        <div v-if=\"customFonts.length\" class=\"custom-fonts-section\">\n          <div class=\"style-label\"></div>\n          <div class=\"custom-font-list\">\n            <div v-for=\"font in customFonts\" :key=\"font.id\" class=\"custom-font-item\">\n              <span class=\"custom-font-name\">{{ font.name }}</span>\n              <button @click=\"deleteCustomFont(font.id)\" class=\"btn-icon btn-danger\" title=\"\"></button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!--  -->\n      <div v-if=\"showCustomFontDialog\" class=\"modal-overlay\" @click.self=\"showCustomFontDialog = false\">\n        <div class=\"modal-dialog custom-font-dialog\">\n          <div class=\"modal-header\">\n            <h3></h3>\n            <button @click=\"showCustomFontDialog = false\" class=\"modal-close\"></button>\n          </div>\n          <div class=\"modal-body\">\n            <div class=\"form-group\">\n              <label> <span class=\"required\">*</span></label>\n              <input v-model=\"customFontForm.name\" type=\"text\" placeholder=\"\" class=\"form-input\" />\n            </div>\n            \n            <div class=\"import-tabs\">\n              <div class=\"import-method\">\n                <div class=\"import-method-header\">URL</div>\n                <input \n                  v-model=\"customFontForm.url\" \n                  type=\"text\" \n                  placeholder=\"URL ttf/otf/woff/woff2\" \n                  class=\"form-input\"\n                  :disabled=\"!!customFontForm.file\"\n                />\n              </div>\n              \n              <div class=\"import-divider\"></div>\n              \n              <div class=\"import-method\">\n                <div class=\"import-method-header\"></div>\n                <input \n                  ref=\"fontFileInput\"\n                  type=\"file\" \n                  accept=\".ttf,.otf,.woff,.woff2\"\n                  @change=\"handleFontFileSelect\"\n                  class=\"form-file-input\"\n                  :disabled=\"!!customFontForm.url\"\n                />\n                <div v-if=\"customFontForm.file\" class=\"file-selected\">\n                  : {{ customFontForm.file.name }}\n                </div>\n              </div>\n            </div>\n            \n            <div class=\"form-hint\">\n              TTFOTFWOFFWOFF2<br>\n              Base64\n            </div>\n          </div>\n          <div class=\"modal-footer\">\n            <button @click=\"resetCustomFontForm\" class=\"btn btn-secondary\"></button>\n            <button @click=\"addCustomFont\" class=\"btn btn-primary\"></button>\n          </div>\n        </div>\n      </div>\n\n      <div \n        v-if=\"highlightMenu.show\" \n        class=\"highlight-menu\"\n        :style=\"{ left: highlightMenu.x + 'px', top: highlightMenu.y + 'px' }\"\n      >\n        <button @click=\"removeHighlightFromMenu\" class=\"selection-btn\"> </button>\n      </div>\n\n      <div v-if=\"!readingMode\" class=\"messages-wrapper\">\n        <div\n          v-for=\"(message, index) in paginatedMessages\"\n          :key=\"currentRange.start + index\"\n          :class=\"['message-block', { 'user-message': message.is_user }]\"\n        >\n          <div class=\"message-header\">\n            <span class=\"speaker-name\">{{ message.name }}</span>\n            <div class=\"message-info\">\n              <span v-if=\"message.send_date\" class=\"timestamp\">{{ message.send_date }}</span>\n              <span v-if=\"message.model\" class=\"model-tag\">{{ message.model }}</span>\n              <button \n                @click=\"toggleFavoriteMessage(getGlobalMessageIndex(index), message)\"\n                :class=\"['edit-btn', { 'favorited': isMessageFavorited(getGlobalMessageIndex(index)) }]\"\n                :title=\"isMessageFavorited(getGlobalMessageIndex(index)) ? '' : ''\"\n              >\n                {{ isMessageFavorited(getGlobalMessageIndex(index)) ? '' : '' }}\n              </button>\n              <button \n                @click=\"toggleEditMessage(getGlobalMessageIndex(index))\" \n                class=\"edit-btn\"\n                :title=\"editingMessageIndex === getGlobalMessageIndex(index) ? '' : ''\"\n              >\n                {{ editingMessageIndex === getGlobalMessageIndex(index) ? '' : '' }}\n              </button>\n            </div>\n          </div>\n\n          <div v-if=\"editingMessageIndex === getGlobalMessageIndex(index)\" class=\"message-edit-form\">\n            <textarea \n              v-model=\"editingContent\"\n              class=\"edit-textarea\"\n              rows=\"10\"\n            ></textarea>\n            <div class=\"edit-actions\">\n              <button @click=\"cancelEditMessage\" class=\"btn btn-secondary\"></button>\n              <button @click=\"saveEditMessage\" class=\"btn btn-primary\"></button>\n            </div>\n          </div>\n\n          <template v-if=\"editingMessageIndex !== getGlobalMessageIndex(index)\">\n          <div \n            v-if=\"hasHTMLCodeBlock(getMessageContent(message))\" \n            class=\"message-content-mixed\"\n            :style=\"getContentStyles()\"\n            @mouseup=\"handleTextSelection($event, getGlobalMessageIndex(index), message)\"\n          >\n            <div class=\"message-content\" :style=\"getContentStyles()\" v-html=\"renderContentWithHTMLPlaceholder(getMessageContent(message), getGlobalMessageIndex(index))\"></div>\n          </div>\n          <div v-else-if=\"isFullHTML(getMessageContent(message))\" class=\"message-content-html\">\n            <div class=\"html-preview-header\">\n              <span class=\"html-tag\">HTML </span>\n              <button @click=\"toggleHTMLPreview(getGlobalMessageIndex(index))\" class=\"preview-toggle\">\n                {{ message.showPreview ? '' : '' }}\n              </button>\n            </div>\n            <iframe \n              v-if=\"message.showPreview\"\n              :srcdoc=\"getMessageContent(message)\" \n              class=\"html-iframe\"\n              sandbox=\"allow-scripts allow-same-origin\"\n            ></iframe>\n            <pre v-else class=\"html-code\">{{ getMessageContent(message) }}</pre>\n          </div>\n          <div \n            v-else \n            class=\"message-content\" \n            :style=\"getContentStyles()\"\n            v-html=\"renderContent(getMessageContent(message), getGlobalMessageIndex(index))\"\n            @mouseup=\"handleTextSelection($event, getGlobalMessageIndex(index), message)\"\n          ></div>\n          </template>\n\n          <div v-if=\"message.swipes && message.swipes.length > 1\" class=\"swipe-controls\">\n            <button \n              @click=\"prevSwipe(getGlobalMessageIndex(index))\" \n              :disabled=\"message.currentSwipeIndex === 0\"\n              class=\"swipe-btn\"\n              title=\"\"\n            >\n              \n            </button>\n            <span class=\"swipe-indicator\">\n              {{ message.currentSwipeIndex + 1 }} / {{ message.swipes.length }}\n            </span>\n            <button \n              @click=\"nextSwipe(getGlobalMessageIndex(index))\" \n              :disabled=\"message.currentSwipeIndex === message.swipes.length - 1\"\n              class=\"swipe-btn\"\n              title=\"\"\n            >\n              \n            </button>\n          </div>\n        </div>\n      </div>\n\n      <div v-if=\"readingMode\" class=\"reading-view\" ref=\"readingView\">\n        <div \n          class=\"reading-content\" \n          ref=\"readingContentEl\"\n          :style=\"getReadingTransform()\"\n          v-html=\"readingFullHtml\"\n          @mouseup=\"onReadingMouseUp\"\n          @touchstart=\"onReadingTouchStart\"\n          @touchend=\"onReadingTouchEnd\"\n        ></div>\n        \n        <!--  -->\n        <div class=\"reading-nav-left\" @click=\"readingPrevPage\"></div>\n        <div class=\"reading-nav-right\" @click=\"readingNextPage\"></div>\n        <div class=\"reading-nav-center\" @click=\"toggleToolbar\"></div>\n\n        <div :class=\"['reading-footer', { 'visible': toolbarVisible }]\">\n          <div class=\"reading-progress\">\n            <span>{{ readingCurrentPage }} / {{ readingTotalPages }} </span>\n            <span class=\"reading-floor\"> {{ getReadingFloorRange() }}</span>\n          </div>\n          \n          <div class=\"reading-controls\">\n            <button @click=\"readingPrevPage\" :disabled=\"readingCurrentPage <= 1\" class=\"reading-btn\"></button>\n            <button @click=\"toggleReadingMode\" class=\"reading-btn reading-exit\"></button>\n            <button @click=\"readingNextPage\" :disabled=\"readingCurrentPage >= readingTotalPages\" class=\"reading-btn\"></button>\n          </div>\n        </div>\n      </div>\n\n      <div v-if=\"!readingMode\" class=\"pagination-bar pagination-bottom\">\n        <div class=\"pagination-info\">\n           {{ currentRange.start }}-{{ currentRange.end }}  {{ filteredMessages.length }} \n          <span v-if=\"searchQuery\" class=\"filter-hint\"></span>\n        </div>\n        <div class=\"pagination-controls\">\n          <button @click=\"goToPage(1)\" :disabled=\"currentPage === 1\" class=\"page-btn\" title=\"\"></button>\n          <button @click=\"prevPage\" :disabled=\"currentPage === 1\" class=\"page-btn\" title=\"\"></button>\n          <span class=\"page-indicator\">{{ currentPage }} / {{ totalPages }}</span>\n          <button @click=\"nextPage\" :disabled=\"currentPage === totalPages\" class=\"page-btn\" title=\"\"></button>\n          <button @click=\"goToPage(totalPages)\" :disabled=\"currentPage === totalPages\" class=\"page-btn\" title=\"\"></button>\n          <select v-model.number=\"pageSize\" @change=\"onPageSizeChange\" class=\"page-size-select\">\n            <option :value=\"10\">10/</option>\n            <option :value=\"20\">20/</option>\n            <option :value=\"50\">50/</option>\n            <option :value=\"100\">100/</option>\n          </select>\n        </div>\n      </div>\n    </div>\n\n    <div \n      v-if=\"selectionMenu.show\" \n      class=\"selection-menu\"\n      :style=\"{ left: selectionMenu.x + 'px', top: selectionMenu.y + 'px' }\"\n    >\n      <button @click=\"favoriteSelectedText\" class=\"selection-btn\"> </button>\n      <button @click=\"highlightSelectedText\" class=\"selection-btn\"> </button>\n      <button @click=\"copySelectedText\" class=\"selection-btn\"> </button>\n    </div>\n\n    <div v-if=\"exportDialog.show\" class=\"export-dialog-overlay\" @click.self=\"closeExportDialog\">\n      <div class=\"export-dialog\">\n        <div class=\"export-dialog-header\">\n          <h3></h3>\n          <button @click=\"closeExportDialog\" class=\"btn-icon\"></button>\n        </div>\n        <div class=\"export-dialog-body\">\n          <div class=\"export-range\">\n            <div class=\"range-inputs\">\n              <div class=\"range-input-group\">\n                <label></label>\n                <input \n                  type=\"number\" \n                  v-model.number=\"exportDialog.startFloor\" \n                  :min=\"1\" \n                  :max=\"filteredMessages.length\"\n                  class=\"range-input\"\n                />\n              </div>\n              <span class=\"range-separator\"></span>\n              <div class=\"range-input-group\">\n                <label></label>\n                <input \n                  type=\"number\" \n                  v-model.number=\"exportDialog.endFloor\" \n                  :min=\"1\" \n                  :max=\"filteredMessages.length\"\n                  class=\"range-input\"\n                />\n              </div>\n            </div>\n            <div class=\"range-hint\">\n               {{ filteredMessages.length }}  {{ getExportCount() }} \n            </div>\n          </div>\n\n          <div class=\"export-options\">\n            <label class=\"export-option\">\n              <input type=\"checkbox\" v-model=\"exportDialog.includeName\" />\n              \n            </label>\n            <label class=\"export-option\">\n              <input type=\"checkbox\" v-model=\"exportDialog.includeTime\" />\n              \n            </label>\n          </div>\n          <div class=\"export-preview\">\n            <div class=\"export-preview-label\"> 3 </div>\n            <pre class=\"export-preview-content\">{{ getExportPreview() }}</pre>\n          </div>\n        </div>\n        <div class=\"export-dialog-footer\">\n          <button @click=\"closeExportDialog\" class=\"btn btn-secondary\"></button>\n          <button @click=\"doExportRange\" class=\"btn btn-primary\"> TXT</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { marked } from 'marked';\nimport DOMPurify from 'dompurify';\n\nexport default {\n  name: 'STReader',\n  data() {\n    return {\n      metadata: {},\n      messages: [],\n      rawData: [],\n      // \n      regexScripts: [],\n      showRegexManager: false,\n      editingScript: null,\n      scriptForm: {\n        id: '',\n        scriptName: '',\n        findRegex: '',\n        replaceString: '',\n        disabled: false\n      },\n      dragIndex: null,\n      // \n      currentPage: 1,\n      pageSize: 10,\n      // \n      searchQuery: '',\n      searchResults: [],\n      currentSearchIndex: -1,\n      showSearchBar: false,\n      // \n      editingMessageIndex: null,\n      editingContent: '',\n      // \n      tagFilters: [],\n      showTagFilterManager: false,\n      editingTagFilter: null,\n      tagFilterForm: {\n        id: '',\n        name: '',\n        tagName: '',\n        mode: 'remove',\n        disabled: false\n      },\n      // \n      favorites: [],            // \n      highlights: [],           // \n      showFavoritesPanel: false,\n      selectionMenu: {\n        show: false,\n        x: 0,\n        y: 0,\n        text: '',\n        messageIndex: null\n      },\n      highlightMenu: {\n        show: false,\n        x: 0,\n        y: 0,\n        highlightId: null\n      },\n      // \n      exportDialog: {\n        show: false,\n        startFloor: 1,\n        endFloor: 1,\n        includeName: true,\n        includeTime: true\n      },\n      // \n      showStylePanel: false,\n      textStyles: {\n        fontFamily: 'system',\n        fontSize: 16,\n        lineHeight: 1.8,\n        paragraphSpacing: 1,\n        textColor: '#1a1a1a',\n        textAlign: 'justify'\n      },\n      colorOptions: [\n        { name: '', value: '#1a1a1a' },\n        { name: '', value: '#333333' },\n        { name: '', value: '#555555' },\n        { name: '', value: '#666666' },\n        { name: '', value: '#5d4037' },\n        { name: '', value: '#1a237e' }\n      ],\n      // \n      customFonts: [],\n      showCustomFontDialog: false,\n      customFontForm: {\n        name: '',\n        url: '',\n        file: null\n      },\n      // \n      readingMode: false,\n      toolbarVisible: false,\n      readingCurrentPage: 1,\n      readingTotalPages: 1,\n      readingFullHtml: '',      // HTML\n      readingTouchStartX: 0,\n      readingTouchStartY: 0,\n      toolbarTimeout: null,\n      windowWidth: 0,           // \n      resizeTimer: null\n    };\n  },\n  computed: {\n    // \n    filteredMessages() {\n      if (!this.searchQuery.trim()) {\n        return this.messages;\n      }\n      const query = this.searchQuery.toLowerCase();\n      return this.messages.filter((msg, index) => {\n        const content = this.getMessageContent(msg).toLowerCase();\n        const name = (msg.name || '').toLowerCase();\n        const matches = content.includes(query) || name.includes(query);\n        // \n        if (matches) {\n          msg._originalIndex = index;\n        }\n        return matches;\n      });\n    },\n    totalPages() {\n      return Math.ceil(this.filteredMessages.length / this.pageSize);\n    },\n    paginatedMessages() {\n      const start = (this.currentPage - 1) * this.pageSize;\n      const end = start + this.pageSize;\n      return this.filteredMessages.slice(start, end);\n    },\n    currentRange() {\n      const start = (this.currentPage - 1) * this.pageSize + 1;\n      const end = Math.min(this.currentPage * this.pageSize, this.filteredMessages.length);\n      return { start, end };\n    }\n  },\n  mounted() {\n    //  body \n    document.body.style.overflow = '';\n    \n    //  localStorage \n    this.loadScriptsFromStorage();\n    this.loadTagFiltersFromStorage();\n    this.loadFavoritesFromStorage();\n    this.loadHighlightsFromStorage();\n    this.loadStylesFromStorage();\n    this.loadCustomFonts();\n    \n    // HTML\n    this.replaceHTMLPlaceholders();\n    \n    // \n    document.addEventListener('mousedown', this.hideSelectionMenu);\n  },\n  \n  updated() {\n    // DOMHTML\n    this.replaceHTMLPlaceholders();\n    document.addEventListener('mousedown', this.hideHighlightMenu);\n    \n    // \n    document.addEventListener('click', this.onHighlightClick);\n    \n  },\n  beforeUnmount() {\n    document.removeEventListener('mousedown', this.hideSelectionMenu);\n    document.removeEventListener('mousedown', this.hideHighlightMenu);\n    document.removeEventListener('click', this.onHighlightClick);\n    window.removeEventListener('resize', this.handleResize);\n    //  body overflow\n    document.body.style.overflow = '';\n    if (this.toolbarTimeout) {\n      clearTimeout(this.toolbarTimeout);\n    }\n    if (this.resizeTimer) {\n      clearTimeout(this.resizeTimer);\n    }\n  },\n  methods: {\n    handleFileUpload(event) {\n      const file = event.target.files[0];\n      if (!file) return;\n\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        this.parseJSONL(e.target.result);\n      };\n      reader.readAsText(file);\n    },\n\n    parseJSONL(content) {\n      const lines = content.trim().split('\\n');\n      this.rawData = [];\n      this.messages = [];\n      this.metadata = {};\n\n      lines.forEach((line, index) => {\n        try {\n          const data = JSON.parse(line);\n          if (index === 0 && !data.mes) {\n            // \n            this.metadata = data;\n          } else {\n            // \n            //  is_user booleannumberstring\n            let isUser = false;\n            if (data.is_user === true || data.is_user === 1 || data.is_user === 'true') {\n              isUser = true;\n            }\n            \n            //  swipes\n            let swipes = [];\n            if (data.swipes && Array.isArray(data.swipes) && data.swipes.length > 1) {\n              swipes = data.swipes;\n            }\n            \n            const message = {\n              name: data.name || '',\n              is_user: isUser,\n              mes: data.mes || '',\n              send_date: data.send_date || null,\n              model: data.extra?.model || null,\n              force_avatar: data.force_avatar || null,\n              showPreview: false,  //  HTML \n              swipes: swipes,\n              currentSwipeIndex: data.swipe_id || 0  //  swipe \n            };\n            \n            this.messages.push(message);\n          }\n        } catch (error) {\n          console.error(` ${index + 1} :`, error);\n        }\n      });\n    },\n\n    hasHTMLCodeBlock(content) {\n      if (!content) return false;\n      //  ```html  ```  HTML \n      const codeBlockPattern = /```(?:html)?\\s*([\\s\\S]*?)```/i;\n      const match = content.match(codeBlockPattern);\n      if (!match) return false;\n      \n      const codeContent = match[1].trim();\n      const hasDoctype = /<!DOCTYPE\\s+html>/i.test(codeContent);\n      const hasHtmlTag = /<html[\\s>]/i.test(codeContent);\n      \n      return hasDoctype && hasHtmlTag;\n    },\n\n    extractHTMLFromCodeBlock(content) {\n      if (!content) return '';\n      const codeBlockPattern = /```(?:html)?\\s*([\\s\\S]*?)```/i;\n      const match = content.match(codeBlockPattern);\n      return match ? match[1].trim() : '';\n    },\n\n    renderContentWithoutCodeBlock(content) {\n      if (!content) return '';\n      // \n      let processedContent = this.applyTagFilters(content);\n      processedContent = this.applyRegexScripts(processedContent);\n      //  HTML \n      const withoutCodeBlock = processedContent.replace(/```(?:html)?\\s*[\\s\\S]*?```/gi, '').trim();\n      //  renderContent markdown\n      return this.renderMarkdown(withoutCodeBlock);\n    },\n\n    renderContentWithHTMLPlaceholder(content, messageIndex) {\n      if (!content) return '';\n      // \n      let processedContent = this.applyTagFilters(content);\n      processedContent = this.applyRegexScripts(processedContent);\n      \n      // HTML\n      const htmlContent = this.extractHTMLFromCodeBlock(processedContent);\n      \n      if (!htmlContent) {\n        // HTML\n        return this.renderMarkdown(processedContent);\n      }\n      \n      // HTML\n      // dataHTMLbase64\n      const base64Html = btoa(unescape(encodeURIComponent(htmlContent)));\n      const placeholder = `<div class=\"html-preview-placeholder\" data-html-base64=\"${base64Html}\" data-message-idx=\"${messageIndex}\"></div>`;\n      \n      const withPlaceholder = processedContent.replace(\n        /```(?:html)?\\s*[\\s\\S]*?```/gi, \n        placeholder\n      );\n      \n      // Markdown\n      return this.renderMarkdown(withPlaceholder);\n    },\n\n    replaceHTMLPlaceholders() {\n      // \n      const placeholders = this.$el?.querySelectorAll('.html-preview-placeholder') || [];\n      placeholders.forEach(placeholder => {\n        const base64Html = placeholder.getAttribute('data-html-base64');\n        if (base64Html && placeholder.parentNode) {\n          try {\n            const htmlContent = decodeURIComponent(escape(atob(base64Html)));\n            const iframe = document.createElement('iframe');\n            iframe.className = 'html-iframe';\n            iframe.setAttribute('sandbox', 'allow-scripts allow-same-origin');\n            iframe.srcdoc = htmlContent;\n            \n            const wrapper = document.createElement('div');\n            wrapper.className = 'html-preview-section';\n            wrapper.appendChild(iframe);\n            \n            placeholder.parentNode.replaceChild(wrapper, placeholder);\n          } catch (e) {\n            console.error('HTML:', e);\n          }\n        }\n      });\n    },\n\n    renderMarkdown(content) {\n      if (!content) return '';\n      \n      //  marked  HTML\n      marked.setOptions({\n        breaks: true,\n        gfm: true,\n        sanitize: false,\n        mangle: false,\n        headerIds: false\n      });\n\n      let html = marked.parse(content);\n      \n      //  renderContent  DOMPurify \n      html = DOMPurify.sanitize(html, this.getDOMPurifyConfig());\n\n      return html;\n    },\n\n    //  DOMPurify \n    getDOMPurifyConfig() {\n      return {\n        ALLOWED_TAGS: [\n          'p', 'br', 'strong', 'em', 'u', 'del', 'code', 'pre', 'blockquote', \n          'h1', 'h2', 'h3', 'h4', 'h5', 'h6', \n          'ul', 'ol', 'li', \n          'a', 'img', \n          'span', 'div', \n          'b', 'i', 's', 'strike', 'sub', 'sup',\n          'table', 'thead', 'tbody', 'tr', 'th', 'td',\n          'hr', 'details', 'summary',\n          //  - \n          'style', 'mark', 'small', 'big', 'abbr', 'cite', 'q',\n          'dl', 'dt', 'dd', 'figure', 'figcaption', 'main', 'section', 'article',\n          'header', 'footer', 'nav', 'aside', 'address', 'time', 'ruby', 'rt', 'rp',\n          'button', 'label', 'input', 'select', 'option', 'textarea',\n          'fieldset', 'legend', 'meter', 'progress', 'output',\n          'canvas', 'svg', 'path', 'circle', 'rect', 'line', 'polygon', 'polyline',\n          'g', 'defs', 'use', 'symbol', 'text', 'tspan'\n        ],\n        ALLOWED_ATTR: [\n          'href', 'src', 'alt', 'title', 'class', 'style', \n          'width', 'height', 'align', 'target', 'rel',\n          'id', 'name',\n          // \n          'type', 'value', 'placeholder', 'disabled', 'readonly', 'checked',\n          'min', 'max', 'step', 'pattern', 'required', 'multiple',\n          'rows', 'cols', 'wrap', 'for', 'form',\n          'open', 'datetime', 'cite', 'download',\n          // SVG \n          'd', 'fill', 'stroke', 'stroke-width', 'viewBox', 'xmlns',\n          'cx', 'cy', 'r', 'rx', 'ry', 'x', 'y', 'x1', 'y1', 'x2', 'y2',\n          'points', 'transform', 'opacity', 'font-size', 'text-anchor',\n          // \n          'onclick', 'onchange', 'oninput',\n          // Reading mode needs data attributes\n          'data-floor'\n        ],\n        ALLOW_DATA_ATTR: true\n      };\n    },\n\n    isFullHTML(content) {\n      if (!content) return false;\n      \n      const trimmed = content.trim();\n      \n      //  Markdown ``` HTML \n      if (/^```/.test(trimmed)) {\n        return false;\n      }\n      \n      //  DOCTYPE  html  <html \n      const hasDoctype = /<!DOCTYPE\\s+html>/i.test(trimmed);\n      const hasHtmlTag = /<html[\\s>]/i.test(trimmed);\n      const startsWithHtml = /^<html[\\s>]/i.test(trimmed);\n      \n      //  <!DOCTYPE  <html  HTML \n      return (hasDoctype && hasHtmlTag) || startsWithHtml;\n    },\n\n    toggleHTMLPreview(index) {\n      this.messages[index].showPreview = !this.messages[index].showPreview;\n    },\n\n    // Swipe \n    getMessageContent(message) {\n      //  swipes  swipe \n      if (message.swipes && message.swipes.length > 0) {\n        return message.swipes[message.currentSwipeIndex] || message.mes;\n      }\n      return message.mes;\n    },\n\n    prevSwipe(messageIndex) {\n      const message = this.messages[messageIndex];\n      if (message.swipes && message.currentSwipeIndex > 0) {\n        message.currentSwipeIndex--;\n      }\n    },\n\n    nextSwipe(messageIndex) {\n      const message = this.messages[messageIndex];\n      if (message.swipes && message.currentSwipeIndex < message.swipes.length - 1) {\n        message.currentSwipeIndex++;\n      }\n    },\n\n    // \n    getGlobalMessageIndex(localIndex) {\n      return (this.currentPage - 1) * this.pageSize + localIndex;\n    },\n\n    // ==========  ==========\n\n    toggleEditMessage(globalIndex) {\n      if (this.editingMessageIndex === globalIndex) {\n        // \n        this.cancelEditMessage();\n      } else {\n        // \n        const message = this.messages[globalIndex];\n        //  swipe \n        this.editingContent = this.getMessageContent(message);\n        this.editingMessageIndex = globalIndex;\n      }\n    },\n\n    cancelEditMessage() {\n      this.editingMessageIndex = null;\n      this.editingContent = '';\n    },\n\n    saveEditMessage() {\n      if (this.editingMessageIndex === null) return;\n      \n      const message = this.messages[this.editingMessageIndex];\n      \n      //  swipes swipe \n      if (message.swipes && message.swipes.length > 0) {\n        message.swipes[message.currentSwipeIndex] = this.editingContent;\n      } else {\n        //  mes\n        message.mes = this.editingContent;\n      }\n      \n      this.cancelEditMessage();\n    },\n\n    renderContent(content, messageIndex) {\n      if (!content) return '';\n      \n      // \n      let processedContent = this.applyTagFilters(content);\n      \n      // \n      processedContent = this.applyRegexScripts(processedContent);\n      \n      //  HTML \n      const htmlBlocks = [];\n      let tempContent = processedContent;\n      \n      //  Markdown \n      //  {ST_HTML_BLOCK_0}\n      const placeholder = (i) => `{ST_READER_HTML_BLOCK_${i}}`;\n      \n      //  <style>  HTML \n      const styleIndex = tempContent.indexOf('<style');\n      if (styleIndex !== -1) {\n        let htmlEnd = tempContent.length;\n        const afterStyle = tempContent.substring(styleIndex);\n        \n        let lastDivEnd = -1;\n        let divEnd = afterStyle.indexOf('</div>', 0);\n        while (divEnd !== -1) {\n          lastDivEnd = divEnd + 6;\n          divEnd = afterStyle.indexOf('</div>', divEnd + 1);\n        }\n        \n        if (lastDivEnd !== -1) {\n          const afterLastDiv = afterStyle.substring(lastDivEnd).trim();\n          if (!afterLastDiv.startsWith('<') || afterLastDiv.startsWith('</')) {\n            htmlEnd = styleIndex + lastDivEnd;\n          }\n        }\n        \n        const htmlBlock = tempContent.substring(styleIndex, htmlEnd);\n        htmlBlocks.push(htmlBlock);\n        // \n        tempContent = tempContent.substring(0, styleIndex) + placeholder(0) + tempContent.substring(htmlEnd);\n      }\n      \n      //  <details> \n      tempContent = tempContent.replace(/<details[\\s\\S]*?<\\/details>/gi, (match) => {\n        htmlBlocks.push(match);\n        // \n        return placeholder(htmlBlocks.length - 1);\n      });\n\n      //  marked\n      marked.setOptions({\n        breaks: true,\n        gfm: true,\n        sanitize: false,\n        mangle: false,\n        headerIds: false\n      });\n\n      //  Markdown\n      let html = marked.parse(tempContent);\n      \n      //  HTML \n      htmlBlocks.forEach((block, i) => {\n        const ph = placeholder(i);\n        //  p \n        //  marked  <p> \n        if (html.includes(`<p>${ph}</p>`)) {\n          html = html.replace(`<p>${ph}</p>`, block);\n        } else {\n          html = html.replace(ph, block);\n        }\n      });\n      \n      // DOMPurify \n      html = DOMPurify.sanitize(html, this.getDOMPurifyConfig());\n      \n      // \n      if (messageIndex !== undefined) {\n        html = this.applyHighlights(html, messageIndex);\n      }\n\n      return html;\n    },\n\n    // \n    applyHighlights(html, messageIndex) {\n      if (!this.highlights || this.highlights.length === 0) return html;\n      \n      let result = html;\n      for (const highlight of this.highlights) {\n        // \n        if (highlight.text && highlight.messageIndex === messageIndex) {\n          // \n          const escapedText = highlight.text.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n          try {\n            // \n            const regex = new RegExp(`(${escapedText})`);\n            result = result.replace(regex, `<span class=\"user-highlight\" data-highlight-id=\"${highlight.id}\">$1</span>`);\n          } catch (e) {\n            // \n          }\n        }\n      }\n      return result;\n    },\n\n    formatDate(timestamp) {\n      if (!timestamp) return '';\n      \n      let date;\n      \n      if (typeof timestamp === 'number') {\n        date = new Date(timestamp);\n      } else if (typeof timestamp === 'string') {\n        date = new Date(timestamp);\n        if (isNaN(date.getTime())) {\n          date = new Date(parseInt(timestamp));\n        }\n      } else {\n        return '';\n      }\n      \n      if (isNaN(date.getTime())) return '';\n\n      const year = date.getFullYear();\n      const month = String(date.getMonth() + 1).padStart(2, '0');\n      const day = String(date.getDate()).padStart(2, '0');\n      const hours = String(date.getHours()).padStart(2, '0');\n      const minutes = String(date.getMinutes()).padStart(2, '0');\n\n      return `${year}-${month}-${day} ${hours}:${minutes}`;\n    },\n\n    resetReader() {\n      this.metadata = {};\n      this.messages = [];\n      this.rawData = [];\n      this.currentPage = 1;\n      if (this.$refs.fileInput) {\n        this.$refs.fileInput.value = '';\n      }\n    },\n\n    // ==========  ==========\n    \n    prevPage() {\n      if (this.currentPage > 1) {\n        this.currentPage--;\n        this.scrollToTop();\n      }\n    },\n\n    nextPage() {\n      if (this.currentPage < this.totalPages) {\n        this.currentPage++;\n        this.scrollToTop();\n      }\n    },\n\n    goToPage(page) {\n      if (page >= 1 && page <= this.totalPages) {\n        this.currentPage = page;\n        this.scrollToTop();\n      }\n    },\n\n    onPageSizeChange() {\n      // \n      if (this.currentPage > this.totalPages) {\n        this.currentPage = this.totalPages || 1;\n      }\n      this.scrollToTop();\n    },\n\n    scrollToTop() {\n      this.$nextTick(() => {\n        const wrapper = document.querySelector('.messages-wrapper');\n        if (wrapper) {\n          wrapper.scrollIntoView({ behavior: 'smooth', block: 'start' });\n        }\n      });\n    },\n\n    // ==========  ==========\n\n    toggleSearchBar() {\n      this.showSearchBar = !this.showSearchBar;\n      if (!this.showSearchBar) {\n        this.clearSearch();\n      } else {\n        this.$nextTick(() => {\n          const input = document.querySelector('.search-input');\n          if (input) input.focus();\n        });\n      }\n    },\n\n    onSearchInput() {\n      // \n      this.currentPage = 1;\n    },\n\n    clearSearch() {\n      this.searchQuery = '';\n      this.currentPage = 1;\n    },\n\n    // ==========  ==========\n\n    loadFavoritesFromStorage() {\n      try {\n        const saved = localStorage.getItem('st_reader_favorites');\n        if (saved) {\n          this.favorites = JSON.parse(saved);\n        }\n      } catch (e) {\n        console.error(':', e);\n      }\n    },\n\n    saveFavoritesToStorage() {\n      try {\n        localStorage.setItem('st_reader_favorites', JSON.stringify(this.favorites));\n      } catch (e) {\n        console.error(':', e);\n      }\n    },\n\n    loadHighlightsFromStorage() {\n      try {\n        const saved = localStorage.getItem('st_reader_highlights');\n        if (saved) {\n          this.highlights = JSON.parse(saved);\n        }\n      } catch (e) {\n        console.error(':', e);\n      }\n    },\n\n    saveHighlightsToStorage() {\n      try {\n        localStorage.setItem('st_reader_highlights', JSON.stringify(this.highlights));\n      } catch (e) {\n        console.error(':', e);\n      }\n    },\n\n    toggleFavoritesPanel() {\n      this.showFavoritesPanel = !this.showFavoritesPanel;\n    },\n\n    // \n    toggleFavoriteMessage(globalIndex, message) {\n      const existingIndex = this.favorites.findIndex(\n        f => f.type === 'message' && f.messageIndex === globalIndex\n      );\n      \n      if (existingIndex !== -1) {\n        // \n        this.favorites.splice(existingIndex, 1);\n      } else {\n        // \n        this.favorites.unshift({\n          id: this.generateUUID(),\n          type: 'message',\n          messageIndex: globalIndex,\n          text: this.getMessageContent(message),\n          speaker: message.name,\n          createdAt: Date.now()\n        });\n      }\n      this.saveFavoritesToStorage();\n    },\n\n    isMessageFavorited(globalIndex) {\n      return this.favorites.some(f => f.type === 'message' && f.messageIndex === globalIndex);\n    },\n\n    // \n    handleTextSelection(event, messageIndex, message) {\n      const selection = window.getSelection();\n      const selectedText = selection.toString().trim();\n      \n      if (selectedText.length > 0) {\n        // \n        this.selectionMenu = {\n          show: true,\n          x: event.clientX,\n          y: event.clientY - 40,\n          text: selectedText,\n          messageIndex: messageIndex,\n          speaker: message.name\n        };\n      }\n    },\n\n    hideSelectionMenu(event) {\n      // \n      if (!event.target.closest('.selection-menu')) {\n        this.selectionMenu.show = false;\n      }\n    },\n\n    favoriteSelectedText() {\n      if (!this.selectionMenu.text) return;\n      \n      this.favorites.unshift({\n        id: this.generateUUID(),\n        type: 'text',\n        messageIndex: this.selectionMenu.messageIndex,\n        text: this.selectionMenu.text,\n        speaker: this.selectionMenu.speaker,\n        createdAt: Date.now()\n      });\n      \n      this.saveFavoritesToStorage();\n      this.selectionMenu.show = false;\n      window.getSelection().removeAllRanges();\n    },\n\n    highlightSelectedText() {\n      if (!this.selectionMenu.text) return;\n      \n      this.highlights.push({\n        id: this.generateUUID(),\n        messageIndex: this.selectionMenu.messageIndex,\n        text: this.selectionMenu.text,\n        createdAt: Date.now()\n      });\n      \n      this.saveHighlightsToStorage();\n      this.selectionMenu.show = false;\n      window.getSelection().removeAllRanges();\n      \n      // \n      if (this.readingMode) {\n        this.generateReadingContent();\n      }\n    },\n\n    deleteHighlight(id) {\n      const index = this.highlights.findIndex(h => h.id === id);\n      if (index !== -1) {\n        this.highlights.splice(index, 1);\n        this.saveHighlightsToStorage();\n        \n        // \n        if (this.readingMode) {\n          this.generateReadingContent();\n        }\n      }\n    },\n\n    onHighlightClick(event) {\n      const target = event.target.closest('.user-highlight');\n      if (target && target.dataset.highlightId) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.highlightMenu = {\n          show: true,\n          x: event.clientX,\n          y: event.clientY,\n          highlightId: target.dataset.highlightId\n        };\n      }\n    },\n\n    removeHighlightFromMenu() {\n      if (this.highlightMenu.highlightId) {\n        this.deleteHighlight(this.highlightMenu.highlightId);\n      }\n      this.highlightMenu.show = false;\n    },\n\n    hideHighlightMenu(event) {\n      // \n      if (!event || !event.target.closest('.highlight-menu')) {\n        this.highlightMenu.show = false;\n      }\n    },\n\n    // \n    navigateToFavorite(fav) {\n      if (fav.messageIndex === undefined || fav.messageIndex === null) return;\n      \n      const messageIndex = fav.messageIndex;\n      \n      // \n      const targetPage = Math.floor(messageIndex / this.pageSize) + 1;\n      \n      // \n      if (targetPage !== this.currentPage) {\n        this.currentPage = targetPage;\n      }\n      \n      // \n      this.showFavoritesPanel = false;\n      \n      //  DOM \n      this.$nextTick(() => {\n        const localIndex = messageIndex % this.pageSize;\n        const messageBlocks = document.querySelectorAll('.message-block');\n        if (messageBlocks[localIndex]) {\n          messageBlocks[localIndex].scrollIntoView({ behavior: 'smooth', block: 'center' });\n          // \n          messageBlocks[localIndex].classList.add('highlight-flash');\n          setTimeout(() => {\n            messageBlocks[localIndex].classList.remove('highlight-flash');\n          }, 2000);\n        }\n      });\n    },\n\n    copySelectedText() {\n      if (!this.selectionMenu.text) return;\n      \n      navigator.clipboard.writeText(this.selectionMenu.text).then(() => {\n        this.selectionMenu.show = false;\n      });\n    },\n\n    copyFavorite(fav) {\n      navigator.clipboard.writeText(fav.text);\n    },\n\n    deleteFavorite(id) {\n      this.favorites = this.favorites.filter(f => f.id !== id);\n      this.saveFavoritesToStorage();\n    },\n\n    clearAllFavorites() {\n      if (confirm('')) {\n        this.favorites = [];\n        this.saveFavoritesToStorage();\n      }\n    },\n\n    exportFavorites() {\n      const dataStr = JSON.stringify(this.favorites, null, 2);\n      const blob = new Blob([dataStr], { type: 'application/json' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'favorites.json';\n      a.click();\n      URL.revokeObjectURL(url);\n    },\n\n    formatFavoriteTime(timestamp) {\n      const date = new Date(timestamp);\n      return `${date.getMonth() + 1}/${date.getDate()} ${date.getHours()}:${String(date.getMinutes()).padStart(2, '0')}`;\n    },\n\n    // ==========  ==========\n\n    loadTagFiltersFromStorage() {\n      try {\n        const saved = localStorage.getItem('st_reader_tag_filters');\n        if (saved) {\n          this.tagFilters = JSON.parse(saved);\n        }\n      } catch (e) {\n        console.error(':', e);\n      }\n    },\n\n    saveTagFiltersToStorage() {\n      try {\n        localStorage.setItem('st_reader_tag_filters', JSON.stringify(this.tagFilters));\n      } catch (e) {\n        console.error(':', e);\n      }\n    },\n\n    toggleTagFilterManager() {\n      this.showTagFilterManager = !this.showTagFilterManager;\n      if (!this.showTagFilterManager) {\n        this.resetTagFilterForm();\n      }\n    },\n\n    resetTagFilterForm() {\n      this.editingTagFilter = null;\n      this.tagFilterForm = {\n        id: '',\n        name: '',\n        tagName: '',\n        mode: 'remove',\n        disabled: false\n      };\n    },\n\n    addNewTagFilter() {\n      this.resetTagFilterForm();\n      this.tagFilterForm.id = this.generateUUID();\n    },\n\n    editTagFilter(filter) {\n      this.editingTagFilter = filter.id;\n      this.tagFilterForm = { ...filter };\n    },\n\n    saveTagFilter() {\n      if (!this.tagFilterForm.name || !this.tagFilterForm.tagName) {\n        alert('');\n        return;\n      }\n\n      if (this.editingTagFilter) {\n        const index = this.tagFilters.findIndex(f => f.id === this.editingTagFilter);\n        if (index !== -1) {\n          this.tagFilters.splice(index, 1, { ...this.tagFilterForm });\n        }\n      } else {\n        this.tagFilters.push({ ...this.tagFilterForm });\n      }\n\n      this.saveTagFiltersToStorage();\n      this.resetTagFilterForm();\n    },\n\n    cancelEditTagFilter() {\n      this.resetTagFilterForm();\n    },\n\n    deleteTagFilter(id) {\n      if (confirm('')) {\n        this.tagFilters = this.tagFilters.filter(f => f.id !== id);\n        this.saveTagFiltersToStorage();\n      }\n    },\n\n    toggleTagFilter(filter) {\n      filter.disabled = !filter.disabled;\n      this.saveTagFiltersToStorage();\n    },\n\n    moveTagFilterUp(index) {\n      if (index > 0) {\n        const temp = this.tagFilters[index];\n        this.tagFilters.splice(index, 1);\n        this.tagFilters.splice(index - 1, 0, temp);\n        this.saveTagFiltersToStorage();\n      }\n    },\n\n    moveTagFilterDown(index) {\n      if (index < this.tagFilters.length - 1) {\n        const temp = this.tagFilters[index];\n        this.tagFilters.splice(index, 1);\n        this.tagFilters.splice(index + 1, 0, temp);\n        this.saveTagFiltersToStorage();\n      }\n    },\n\n    // \n    applyTagFilters(text) {\n      if (!text) return text;\n      \n      let result = text;\n      \n      for (const filter of this.tagFilters) {\n        if (filter.disabled) continue;\n        \n        try {\n          // \n          const tags = filter.tagName.split(',').map(t => t.trim()).filter(t => t);\n          \n          for (const tag of tags) {\n            // \n            const escapedTag = tag.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n            \n            if (filter.mode === 'remove') {\n              // \n              const regex = new RegExp(`<${escapedTag}[^>]*>[\\\\s\\\\S]*?<\\\\/${escapedTag}>`, 'gi');\n              result = result.replace(regex, '');\n              // \n              const selfClosingRegex = new RegExp(`<${escapedTag}[^>]*/?>`, 'gi');\n              result = result.replace(selfClosingRegex, '');\n            } else if (filter.mode === 'keep') {\n              // \n              const regex = new RegExp(`<${escapedTag}[^>]*>([\\\\s\\\\S]*?)<\\\\/${escapedTag}>`, 'gi');\n              const matches = [];\n              let match;\n              while ((match = regex.exec(text)) !== null) {\n                matches.push(match[1]);\n              }\n              if (matches.length > 0) {\n                result = matches.join('\\n\\n');\n              }\n            } else if (filter.mode === 'unwrap') {\n              // \n              const regex = new RegExp(`<${escapedTag}[^>]*>([\\\\s\\\\S]*?)<\\\\/${escapedTag}>`, 'gi');\n              result = result.replace(regex, '$1');\n              // \n              const selfClosingRegex = new RegExp(`<${escapedTag}[^>]*/?>`, 'gi');\n              result = result.replace(selfClosingRegex, '');\n            }\n          }\n        } catch (e) {\n          console.error(` \"${filter.name}\" :`, e);\n        }\n      }\n      \n      return result;\n    },\n\n    // ==========  ==========\n    \n    loadScriptsFromStorage() {\n      try {\n        const saved = localStorage.getItem('st_reader_regex_scripts');\n        if (saved) {\n          this.regexScripts = JSON.parse(saved);\n        }\n      } catch (e) {\n        console.error(':', e);\n      }\n    },\n\n    saveScriptsToStorage() {\n      try {\n        localStorage.setItem('st_reader_regex_scripts', JSON.stringify(this.regexScripts));\n      } catch (e) {\n        console.error(':', e);\n      }\n    },\n\n    toggleRegexManager() {\n      this.showRegexManager = !this.showRegexManager;\n      if (!this.showRegexManager) {\n        this.resetScriptForm();\n      }\n    },\n\n    resetScriptForm() {\n      this.editingScript = null;\n      this.scriptForm = {\n        id: '',\n        scriptName: '',\n        findRegex: '',\n        replaceString: '',\n        disabled: false\n      };\n    },\n\n    addNewScript() {\n      this.resetScriptForm();\n      this.scriptForm.id = this.generateUUID();\n    },\n\n    editScript(script) {\n      this.editingScript = script.id;\n      this.scriptForm = { ...script };\n    },\n\n    saveScript() {\n      if (!this.scriptForm.scriptName || !this.scriptForm.findRegex) {\n        alert('');\n        return;\n      }\n\n      if (this.editingScript) {\n        // \n        const index = this.regexScripts.findIndex(s => s.id === this.editingScript);\n        if (index !== -1) {\n          this.regexScripts.splice(index, 1, { ...this.scriptForm });\n        }\n      } else {\n        // \n        this.regexScripts.push({ ...this.scriptForm });\n      }\n\n      this.saveScriptsToStorage();\n      this.resetScriptForm();\n    },\n\n    cancelEdit() {\n      this.resetScriptForm();\n    },\n\n    deleteScript(id) {\n      if (confirm('')) {\n        this.regexScripts = this.regexScripts.filter(s => s.id !== id);\n        this.saveScriptsToStorage();\n      }\n    },\n\n    toggleScript(script) {\n      script.disabled = !script.disabled;\n      this.saveScriptsToStorage();\n    },\n\n    moveScriptUp(index) {\n      if (index > 0) {\n        const temp = this.regexScripts[index];\n        this.regexScripts.splice(index, 1);\n        this.regexScripts.splice(index - 1, 0, temp);\n        this.saveScriptsToStorage();\n      }\n    },\n\n    moveScriptDown(index) {\n      if (index < this.regexScripts.length - 1) {\n        const temp = this.regexScripts[index];\n        this.regexScripts.splice(index, 1);\n        this.regexScripts.splice(index + 1, 0, temp);\n        this.saveScriptsToStorage();\n      }\n    },\n\n    // \n    handleDragStart(index) {\n      this.dragIndex = index;\n    },\n\n    handleDragOver(e) {\n      e.preventDefault();\n    },\n\n    handleDrop(e, dropIndex) {\n      e.preventDefault();\n      if (this.dragIndex !== null && this.dragIndex !== dropIndex) {\n        const draggedScript = this.regexScripts[this.dragIndex];\n        this.regexScripts.splice(this.dragIndex, 1);\n        this.regexScripts.splice(dropIndex, 0, draggedScript);\n        this.saveScriptsToStorage();\n      }\n      this.dragIndex = null;\n    },\n\n    handleDragEnd() {\n      this.dragIndex = null;\n    },\n\n    generateUUID() {\n      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n        const r = Math.random() * 16 | 0;\n        const v = c === 'x' ? r : (r & 0x3 | 0x8);\n        return v.toString(16);\n      });\n    },\n\n    importScripts() {\n      const input = document.createElement('input');\n      input.type = 'file';\n      input.accept = '.json';\n      input.multiple = true; // <--- \n      \n      input.onchange = async (e) => {\n        const files = Array.from(e.target.files);\n        if (!files.length) return;\n        \n        let successCount = 0;\n        let scriptCount = 0;\n        \n        //  Promise\n        const readFile = (file) => {\n          return new Promise((resolve) => {\n            const reader = new FileReader();\n            reader.onload = (event) => {\n              try {\n                const data = JSON.parse(event.target.result);\n                resolve(data);\n              } catch (err) {\n                console.error(` ${file.name} :`, err);\n                resolve(null);\n              }\n            };\n            reader.readAsText(file);\n          });\n        };\n\n        // \n        const results = await Promise.all(files.map(file => readFile(file)));\n        \n        // \n        results.forEach(data => {\n          if (!data) return;\n          successCount++;\n          \n          //   \n          const scripts = Array.isArray(data) ? data : [data];\n          \n          scripts.forEach(script => {\n            // \n            if (script.findRegex) {\n              const newScript = {\n                id: script.id || this.generateUUID(),\n                scriptName: script.scriptName || '',\n                findRegex: script.findRegex,\n                replaceString: script.replaceString || '',\n                disabled: script.disabled || false\n              };\n              \n              // \n              const existingIndex = this.regexScripts.findIndex(s => s.id === newScript.id);\n              if (existingIndex !== -1) {\n                //  ID \n                this.regexScripts.splice(existingIndex, 1, newScript);\n              } else {\n                // \n                this.regexScripts.push(newScript);\n              }\n              scriptCount++;\n            }\n          });\n        });\n        \n        if (scriptCount > 0) {\n          this.saveScriptsToStorage();\n          alert(` ${successCount}  ${scriptCount} `);\n        } else {\n          alert('');\n        }\n      };\n      \n      input.click();\n    },\n    \n    exportScripts() {\n      const dataStr = JSON.stringify(this.regexScripts, null, 2);\n      const blob = new Blob([dataStr], { type: 'application/json' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'regex_scripts.json';\n      a.click();\n      URL.revokeObjectURL(url);\n    },\n\n    //  PNG \n    importFromPNG() {\n      const input = document.createElement('input');\n      input.type = 'file';\n      input.accept = '.png';\n      input.onchange = async (e) => {\n        const file = e.target.files[0];\n        if (!file) return;\n\n        try {\n          const arrayBuffer = await file.arrayBuffer();\n          const charData = this.extractPNGChara(arrayBuffer);\n          \n          if (!charData) {\n            alert(' PNG ');\n            return;\n          }\n\n          //  JSON\n          const cardData = JSON.parse(charData);\n          \n          // \n          let regexScripts = null;\n          \n          // \n          if (cardData.data?.extensions?.regex_scripts) {\n            regexScripts = cardData.data.extensions.regex_scripts;\n          } else if (cardData.extensions?.regex_scripts) {\n            regexScripts = cardData.extensions.regex_scripts;\n          } else if (cardData.regex_scripts) {\n            regexScripts = cardData.regex_scripts;\n          }\n\n          if (!regexScripts || !Array.isArray(regexScripts) || regexScripts.length === 0) {\n            alert('');\n            return;\n          }\n\n          // \n          let importCount = 0;\n          regexScripts.forEach(script => {\n            if (script.findRegex) {\n              const newScript = {\n                id: script.id || this.generateUUID(),\n                scriptName: script.scriptName || '',\n                findRegex: script.findRegex,\n                replaceString: script.replaceString || '',\n                disabled: script.disabled || false\n              };\n\n              //  id \n              const existingIndex = this.regexScripts.findIndex(\n                s => s.id === newScript.id || s.scriptName === newScript.scriptName\n              );\n              \n              if (existingIndex !== -1) {\n                // \n                if (confirm(` \"${newScript.scriptName}\" `)) {\n                  this.regexScripts.splice(existingIndex, 1, newScript);\n                  importCount++;\n                }\n              } else {\n                this.regexScripts.push(newScript);\n                importCount++;\n              }\n            }\n          });\n\n          this.saveScriptsToStorage();\n          alert(` ${importCount} `);\n          \n        } catch (err) {\n          console.error(':', err);\n          alert(': ' + err.message);\n        }\n      };\n      input.click();\n    },\n\n    //  PNG ArrayBuffer  chara \n    extractPNGChara(arrayBuffer) {\n      const bytes = new Uint8Array(arrayBuffer);\n      \n      // PNG : 89 50 4E 47 0D 0A 1A 0A\n      const pngSignature = [0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A];\n      for (let i = 0; i < 8; i++) {\n        if (bytes[i] !== pngSignature[i]) {\n          throw new Error(' PNG ');\n        }\n      }\n\n      let offset = 8;\n      \n      while (offset < bytes.length) {\n        //  chunk  (4 bytes, big-endian)\n        const length = (bytes[offset] << 24) | (bytes[offset + 1] << 16) | \n                       (bytes[offset + 2] << 8) | bytes[offset + 3];\n        offset += 4;\n\n        //  chunk  (4 bytes)\n        const type = String.fromCharCode(bytes[offset], bytes[offset + 1], \n                                         bytes[offset + 2], bytes[offset + 3]);\n        offset += 4;\n\n        //  tEXt chunk\n        if (type === 'tEXt') {\n          // \n          const data = bytes.slice(offset, offset + length);\n          \n          //  null \n          let nullIndex = -1;\n          for (let i = 0; i < data.length; i++) {\n            if (data[i] === 0) {\n              nullIndex = i;\n              break;\n            }\n          }\n\n          if (nullIndex !== -1) {\n            const keyword = new TextDecoder().decode(data.slice(0, nullIndex));\n            \n            //  chara \n            if (keyword === 'chara') {\n              const base64Data = new TextDecoder().decode(data.slice(nullIndex + 1));\n              // Base64  UTF-8 \n              try {\n                return this.decodeBase64UTF8(base64Data);\n              } catch (e) {\n                console.error('Base64 :', e);\n              }\n            }\n          }\n        }\n\n        //  CRC\n        offset += length + 4;\n\n        //  IEND chunk\n        if (type === 'IEND') break;\n      }\n\n      return null;\n    },\n\n    // Base64  UTF-8 \n    decodeBase64UTF8(base64) {\n      //  Base64 \n      const binaryString = atob(base64);\n      //  Uint8Array\n      const bytes = new Uint8Array(binaryString.length);\n      for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n      }\n      //  TextDecoder  UTF-8\n      return new TextDecoder('utf-8').decode(bytes);\n    },\n\n    // \n    applyRegexScripts(text) {\n      if (!text) return text;\n      \n      let result = text;\n      \n      for (const script of this.regexScripts) {\n        if (script.disabled) continue;\n        \n        try {\n          // \n          const regexMatch = script.findRegex.match(/^\\/(.*)\\/([gimsuy]*)$/);\n          let regex;\n          \n          if (regexMatch) {\n            //  /pattern/flags\n            regex = new RegExp(regexMatch[1], regexMatch[2]);\n          } else {\n            //  pattern\n            regex = new RegExp(script.findRegex, 'g');\n          }\n          \n          result = result.replace(regex, script.replaceString);\n        } catch (e) {\n          console.error(` \"${script.scriptName}\" :`, e);\n        }\n      }\n      \n      return result;\n    },\n\n    // ==========  ==========\n\n    openExportRangeDialog() {\n      this.exportDialog = {\n        show: true,\n        startFloor: 1,\n        endFloor: this.filteredMessages.length,\n        includeName: true,\n        includeTime: true\n      };\n    },\n\n    closeExportDialog() {\n      this.exportDialog.show = false;\n    },\n\n    // \n    getExportCount() {\n      const start = Math.max(1, Math.min(this.exportDialog.startFloor, this.filteredMessages.length));\n      const end = Math.max(1, Math.min(this.exportDialog.endFloor, this.filteredMessages.length));\n      return Math.max(0, end - start + 1);\n    },\n\n    // \n    formatMessageForExport(message, floorNum) {\n      let content = this.getMessageContent(message);\n      \n      // \n      content = this.applyTagFilters(content);\n      content = this.applyRegexScripts(content);\n      \n      //  HTML \n      content = this.stripHtmlTags(content);\n      \n      let result = '';\n      \n      // \n      result += `==========  ${floorNum}  ==========\\n`;\n      \n      if (this.exportDialog.includeName) {\n        result += `${message.name}`;\n      }\n      \n      if (this.exportDialog.includeTime && message.send_date) {\n        if (this.exportDialog.includeName) {\n          result += ` `;\n        }\n        result += `[${message.send_date}]`;\n      }\n      \n      if (this.exportDialog.includeName || this.exportDialog.includeTime) {\n        result += '\\n\\n';\n      }\n      \n      result += content;\n      \n      return result;\n    },\n\n    getExportPreview() {\n      const start = Math.max(1, Math.min(this.exportDialog.startFloor, this.filteredMessages.length));\n      const end = Math.max(1, Math.min(this.exportDialog.endFloor, this.filteredMessages.length));\n      \n      if (start > end || start < 1) return '';\n      \n      //  3 \n      const previewCount = Math.min(3, end - start + 1);\n      let result = '';\n      \n      for (let i = 0; i < previewCount; i++) {\n        const floorNum = start + i;\n        const message = this.filteredMessages[floorNum - 1];\n        if (message) {\n          if (i > 0) result += '\\n\\n';\n          result += this.formatMessageForExport(message, floorNum);\n        }\n      }\n      \n      if (end - start + 1 > 3) {\n        result += '\\n\\n...( ' + (end - start + 1 - 3) + ' )';\n      }\n      \n      // \n      if (result.length > 800) {\n        result = result.substring(0, 800) + '\\n...()';\n      }\n      \n      return result;\n    },\n\n    //  HTML \n    stripHtmlTags(html) {\n      if (!html) return '';\n      \n      //  DOM  HTML\n      const temp = document.createElement('div');\n      temp.innerHTML = html;\n      \n      // \n      let text = temp.textContent || temp.innerText || '';\n      \n      // \n      text = text.replace(/\\n{3,}/g, '\\n\\n');\n      \n      return text.trim();\n    },\n\n    doExportRange() {\n      const start = Math.max(1, Math.min(this.exportDialog.startFloor, this.filteredMessages.length));\n      const end = Math.max(1, Math.min(this.exportDialog.endFloor, this.filteredMessages.length));\n      \n      if (start > end || start < 1) {\n        alert('');\n        return;\n      }\n      \n      let result = '';\n      \n      for (let i = start; i <= end; i++) {\n        const message = this.filteredMessages[i - 1];\n        if (message) {\n          if (i > start) result += '\\n\\n\\n';\n          result += this.formatMessageForExport(message, i);\n        }\n      }\n      \n      // \n      const blob = new Blob([result], { type: 'text/plain;charset=utf-8' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      \n      // \n      const timestamp = new Date().toISOString().slice(0, 10);\n      const charName = this.metadata.character_name || '';\n      a.download = `${charName}_${start}-${end}_${timestamp}.txt`;\n      \n      a.click();\n      URL.revokeObjectURL(url);\n      \n      this.closeExportDialog();\n    },\n\n    // ==========  ==========\n\n    toggleStylePanel() {\n      this.showStylePanel = !this.showStylePanel;\n    },\n\n    loadStylesFromStorage() {\n      try {\n        const saved = localStorage.getItem('st_reader_text_styles');\n        if (saved) {\n          const savedStyles = JSON.parse(saved);\n          // \n          this.textStyles = { ...this.textStyles, ...savedStyles };\n        }\n      } catch (e) {\n        console.error(':', e);\n      }\n    },\n\n    saveStylesToStorage() {\n      try {\n        localStorage.setItem('st_reader_text_styles', JSON.stringify(this.textStyles));\n      } catch (e) {\n        console.error(':', e);\n      }\n    },\n    \n    // \n    handleStyleChange() {\n      this.saveStylesToStorage();\n      if (this.readingMode) {\n        // \n        this.handleResize();\n      }\n    },\n\n    resetStyles() {\n      this.textStyles = {\n        fontFamily: 'system',\n        fontSize: 16,\n        lineHeight: 1.8,\n        paragraphSpacing: 1,\n        textColor: '#1a1a1a',\n        textAlign: 'justify'\n      };\n      this.saveStylesToStorage();\n    },\n\n    setTextColor(color) {\n      this.textStyles.textColor = color;\n      this.saveStylesToStorage();\n    },\n\n    setTextAlign(align) {\n      this.textStyles.textAlign = align;\n      this.saveStylesToStorage();\n    },\n\n    // ==========  ==========\n    \n    loadCustomFonts() {\n      try {\n        const saved = localStorage.getItem('st_reader_custom_fonts');\n        if (saved) {\n          this.customFonts = JSON.parse(saved);\n          // \n          this.customFonts.forEach(font => {\n            this.registerFontFace(font);\n          });\n        }\n      } catch (e) {\n        console.error(':', e);\n      }\n    },\n    \n    saveCustomFonts() {\n      try {\n        localStorage.setItem('st_reader_custom_fonts', JSON.stringify(this.customFonts));\n      } catch (e) {\n        console.error(':', e);\n      }\n    },\n    \n    registerFontFace(font) {\n      const style = document.createElement('style');\n      style.id = `custom-font-${font.id}`;\n      style.textContent = `\n        @font-face {\n          font-family: \"${font.name}\";\n          src: url(\"${font.url}\") format(\"${font.format}\");\n          font-weight: normal;\n          font-style: normal;\n          font-display: swap;\n        }\n      `;\n      document.head.appendChild(style);\n    },\n    \n    unregisterFontFace(fontId) {\n      const style = document.getElementById(`custom-font-${fontId}`);\n      if (style) {\n        style.remove();\n      }\n    },\n    \n    async addCustomFont() {\n      if (!this.customFontForm.name) {\n        alert('');\n        return;\n      }\n      \n      let fontUrl = '';\n      let format = 'truetype';\n      \n      if (this.customFontForm.file) {\n        //  - Base64 Data URL\n        try {\n          fontUrl = await this.fileToDataUrl(this.customFontForm.file);\n          format = this.getFontFormat(this.customFontForm.file.name);\n        } catch (e) {\n          alert(': ' + e.message);\n          return;\n        }\n      } else if (this.customFontForm.url) {\n        // URL\n        fontUrl = this.customFontForm.url;\n        format = this.getFontFormat(this.customFontForm.url);\n      } else {\n        alert('URL');\n        return;\n      }\n      \n      const fontId = Date.now().toString();\n      const newFont = {\n        id: fontId,\n        name: this.customFontForm.name,\n        url: fontUrl,\n        format: format\n      };\n      \n      // \n      this.registerFontFace(newFont);\n      \n      // \n      this.customFonts.push(newFont);\n      this.saveCustomFonts();\n      \n      // \n      this.resetCustomFontForm();\n      this.showCustomFontDialog = false;\n      \n      // \n      this.textStyles.fontFamily = 'custom-' + fontId;\n      this.saveStylesToStorage();\n    },\n    \n    deleteCustomFont(fontId) {\n      if (!confirm('')) return;\n      \n      // \n      if (this.textStyles.fontFamily === 'custom-' + fontId) {\n        this.textStyles.fontFamily = 'system';\n        this.saveStylesToStorage();\n      }\n      \n      // \n      this.unregisterFontFace(fontId);\n      \n      // \n      this.customFonts = this.customFonts.filter(f => f.id !== fontId);\n      this.saveCustomFonts();\n    },\n    \n    fileToDataUrl(file) {\n      return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result);\n        reader.onerror = reject;\n        reader.readAsDataURL(file);\n      });\n    },\n    \n    getFontFormat(filename) {\n      const ext = filename.split('.').pop().toLowerCase();\n      const formatMap = {\n        'ttf': 'truetype',\n        'otf': 'opentype',\n        'woff': 'woff',\n        'woff2': 'woff2'\n      };\n      return formatMap[ext] || 'truetype';\n    },\n    \n    handleFontFileSelect(event) {\n      const file = event.target.files[0];\n      if (file) {\n        this.customFontForm.file = file;\n        // \n        if (!this.customFontForm.name) {\n          this.customFontForm.name = file.name.replace(/\\.(ttf|otf|woff2?|TTF|OTF|WOFF2?)$/, '');\n        }\n      }\n    },\n    \n    resetCustomFontForm() {\n      this.customFontForm = {\n        name: '',\n        url: '',\n        file: null\n      };\n      // \n      const fileInput = this.$refs.fontFileInput;\n      if (fileInput) {\n        fileInput.value = '';\n      }\n    },\n\n    getPreviewStyles() {\n      return {\n        fontFamily: this.getFontFamily(),\n        fontSize: this.textStyles.fontSize + 'px',\n        lineHeight: this.textStyles.lineHeight,\n        color: this.textStyles.textColor,\n        textAlign: this.textStyles.textAlign\n      };\n    },\n\n    getContentStyles() {\n      return {\n        fontFamily: this.getFontFamily(),\n        fontSize: this.textStyles.fontSize + 'px',\n        lineHeight: this.textStyles.lineHeight,\n        color: this.textStyles.textColor,\n        textAlign: this.textStyles.textAlign,\n        '--paragraph-spacing': this.textStyles.paragraphSpacing + 'em',\n        '--content-font': this.getFontFamily()\n      };\n    },\n\n    getFontFamily() {\n      const fontMap = {\n        'system': '-apple-system, BlinkMacSystemFont, \"Segoe UI\", \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", sans-serif',\n        'serif': '\"Noto Serif SC\", \"Source Han Serif SC\", \"SimSun\", \"\", serif',\n        'sans-serif': '\"Noto Sans SC\", \"Source Han Sans SC\", \"Microsoft YaHei\", \"\", sans-serif',\n        'kaiti': '\"KaiTi\", \"\", \"STKaiti\", \"\", serif',\n        'fangsong': '\"FangSong\", \"\", \"STFangsong\", \"\", serif',\n        'monospace': '\"Consolas\", \"Monaco\", \"Source Code Pro\", monospace',\n        // \n        'alegreya': '\"Alegreya\", serif',\n        'cangeryunhei': '\"\", sans-serif',\n        'huiwenmingchao': '\"\", serif',\n        'kongmingchao': '\"\", serif',\n        'pingxianzhensong': '\"\", serif',\n        'wenyueminguofangsong': '\"\", serif'\n      };\n      \n      // \n      if (this.textStyles.fontFamily.startsWith('custom-')) {\n        const fontId = this.textStyles.fontFamily.replace('custom-', '');\n        const customFont = this.customFonts.find(f => f.id === fontId);\n        if (customFont) {\n          return `\"${customFont.name}\", sans-serif`;\n        }\n      }\n      \n      return fontMap[this.textStyles.fontFamily] || fontMap['system'];\n    },\n\n    // ========== CSS Columns ==========\n\n    toggleReadingMode() {\n      this.readingMode = !this.readingMode;\n      \n      if (this.readingMode) {\n        // \n        this.toolbarVisible = false;\n        this.showSearchBar = false;\n        this.showRegexManager = false;\n        this.showTagFilterManager = false;\n        this.showFavoritesPanel = false;\n        this.showStylePanel = false;\n        this.selectionMenu.show = false;\n        \n        // \n        this.readingCurrentPage = 1;\n        \n        // \n        document.body.style.overflow = 'hidden';\n\n        // \n        this.generateReadingContent();\n        \n        // \n        window.addEventListener('resize', this.handleResize);\n        \n      } else {\n        // \n        document.body.style.overflow = '';\n        this.toolbarVisible = false;\n        window.removeEventListener('resize', this.handleResize);\n      }\n    },\n\n    generateReadingContent() {\n      let fullContent = '';\n      \n      for (let i = 0; i < this.filteredMessages.length; i++) {\n        const message = this.filteredMessages[i];\n        let content = this.getMessageContent(message);\n        \n        //  renderContent  HTML  Markdown\n        // renderContent  HTML  Markdown \n        content = this.renderContent(content, i);\n        \n        //  ()\n        if (i > 0) {\n          fullContent += '<div class=\"reading-separator\"></div>';\n        }\n        \n        //  div  data-floor \n        fullContent += `<div class=\"reading-message\" data-floor=\"${i}\">`;\n        \n        // \n        if (message.name) {\n          fullContent += `<p class=\"reading-speaker-name\">${message.name}</p>`;\n        }\n        \n        fullContent += content;\n        fullContent += '</div>';\n      }\n      \n      // \n      const currentPage = this.readingCurrentPage || 1;\n      \n      this.readingFullHtml = fullContent;\n      \n      // \n      this.$nextTick(() => {\n        //  CSS columns \n        const contentEl = this.$refs.readingContentEl;\n        if (contentEl) {\n          contentEl.style.width = '';\n        }\n        \n        this.updateColumnWidth();\n        //  CSS columns \n        this.$nextTick(() => {\n          setTimeout(() => {\n            this.calculateTotalPages();\n            // \n            this.readingCurrentPage = Math.min(currentPage, this.readingTotalPages);\n          }, 50);\n        });\n      });\n    },\n    \n    updateColumnWidth() {\n      const contentEl = this.$refs.readingContentEl;\n      if (contentEl) {\n        contentEl.style.columnWidth = `${window.innerWidth}px`;\n      }\n    },\n\n    calculateTotalPages() {\n      const contentEl = this.$refs.readingContentEl;\n      if (!contentEl) return;\n\n      //  window.innerWidth \n      const pageWidth = window.innerWidth;\n      \n      // scrollWidth \n      const contentWidth = contentEl.scrollWidth;\n      \n      //  scrollWidth translateX \n      if (contentWidth > contentEl.offsetWidth) {\n        contentEl.style.width = `${contentWidth}px`;\n      }\n      \n      // \n      this.windowWidth = pageWidth;\n      \n      // \n      this.readingTotalPages = Math.max(1, Math.ceil(contentWidth / pageWidth));\n      \n      // \n      if (this.readingCurrentPage > this.readingTotalPages) {\n        this.readingCurrentPage = this.readingTotalPages;\n      }\n    },\n    \n    handleResize() {\n      // \n      if (this.resizeTimer) clearTimeout(this.resizeTimer);\n      this.resizeTimer = setTimeout(() => {\n        const contentEl = this.$refs.readingContentEl;\n        if (contentEl) {\n          //  auto CSS columns \n          contentEl.style.width = '';\n        }\n        this.updateColumnWidth();\n        this.$nextTick(() => {\n          setTimeout(() => {\n            this.calculateTotalPages();\n          }, 50);\n        });\n      }, 100);\n    },\n\n    getReadingTransform() {\n      //  translateX \n      const offset = (this.readingCurrentPage - 1) * this.windowWidth;\n      \n      return {\n        transform: `translateX(-${offset}px)`,\n        // \n        ...this.getContentStyles()\n      };\n    },\n\n    getReadingFloorRange() {\n      //  IntersectionObserver\n      return `${this.readingCurrentPage} / ${this.readingTotalPages}`;\n    },\n\n    readingPrevPage() {\n      if (this.readingCurrentPage > 1) {\n        this.readingCurrentPage--;\n      }\n    },\n\n    readingNextPage() {\n      if (this.readingCurrentPage < this.readingTotalPages) {\n        this.readingCurrentPage++;\n      }\n    },\n\n    // \n    handleReadingClick(e) {\n      const width = window.innerWidth;\n      const clickX = e.clientX;\n      \n      //  30% \n      if (clickX < width * 0.3) {\n        this.readingPrevPage();\n      } \n      //  30% \n      else if (clickX > width * 0.7) {\n        this.readingNextPage();\n      } \n      //  40% \n      else {\n        this.toolbarVisible = !this.toolbarVisible;\n        \n        if (this.toolbarVisible) {\n          if (this.toolbarTimeout) clearTimeout(this.toolbarTimeout);\n          this.toolbarTimeout = setTimeout(() => {\n            this.toolbarVisible = false;\n          }, 3000);\n        }\n      }\n    },\n\n    onReadingTouchStart(e) {\n      this.readingTouchStartX = e.touches[0].clientX;\n      this.readingTouchStartY = e.touches[0].clientY;\n    },\n\n    onReadingTouchEnd(e) {\n      const touchEndX = e.changedTouches[0].clientX;\n      const touchEndY = e.changedTouches[0].clientY;\n      const deltaX = touchEndX - this.readingTouchStartX;\n      const deltaY = touchEndY - this.readingTouchStartY;\n      \n      // \n      if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > 50) {\n        if (deltaX > 0) {\n          this.readingPrevPage();\n        } else {\n          this.readingNextPage();\n        }\n      }\n    },\n\n    // \n    onReadingMouseUp(event) {\n      const selection = window.getSelection();\n      const selectedText = selection.toString().trim();\n      \n      if (selectedText.length > 0) {\n        // \n        let messageIndex = null;\n        const range = selection.getRangeAt(0);\n        const container = range.commonAncestorContainer;\n        \n        //  data-floor  .reading-message \n        let el = container.nodeType === 3 ? container.parentElement : container;\n        while (el && el !== document.body) {\n          if (el.classList && el.classList.contains('reading-message') && el.hasAttribute('data-floor')) {\n            messageIndex = parseInt(el.getAttribute('data-floor'));\n            break;\n          }\n          el = el.parentElement;\n        }\n        \n        // \n        this.selectionMenu = {\n          show: true,\n          x: event.clientX,\n          y: event.clientY - 40,\n          text: selectedText,\n          messageIndex: messageIndex,\n          speaker: messageIndex !== null && this.filteredMessages[messageIndex] \n            ? this.filteredMessages[messageIndex].name \n            : ''\n        };\n      }\n    },\n\n    toggleToolbar() {\n      this.toolbarVisible = !this.toolbarVisible;\n      \n      if (this.toolbarVisible) {\n        if (this.toolbarTimeout) clearTimeout(this.toolbarTimeout);\n        this.toolbarTimeout = setTimeout(() => {\n          this.toolbarVisible = false;\n        }, 3000);\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.st-reader {\n  min-height: 100vh;\n  background-color: #fafafa;\n  background-image: url('https://sazankaze.neocities.org/bg_pic/whitish-grain-wall-template.jpg');\n  background-repeat: repeat;\n  background-attachment: fixed;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n}\n\n/*  */\n.upload-area {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-height: 100vh;\n  padding: 2rem;\n}\n\n.upload-container {\n  width: 100%;\n  max-width: 400px;\n}\n\n.file-input {\n  display: none;\n}\n\n.upload-label {\n  display: block;\n  padding: 4rem 2rem;\n  background: rgba(255, 255, 255, 0.9);\n  border: 2px solid #000;\n  cursor: pointer;\n  transition: all 0.2s;\n  text-align: center;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n}\n\n.upload-label:hover {\n  background: #000;\n  color: #fff;\n}\n\n.upload-text {\n  font-size: 1.25rem;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n}\n\n.upload-hint {\n  font-size: 0.875rem;\n  opacity: 0.6;\n}\n\n.upload-label:hover .upload-hint {\n  opacity: 1;\n}\n\n/*  */\n.chat-container {\n  max-width: 800px;\n  margin: 0 auto;\n  background: rgba(255, 255, 255, 0.85);\n  min-height: 100vh;\n  box-shadow: 0 0 40px rgba(0, 0, 0, 0.08);\n}\n\n/*  */\n.chat-header {\n  padding: 3rem 3rem 2rem;\n  border-bottom: 2px solid #000;\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n}\n\n.header-content {\n  flex: 1;\n}\n\n.chat-title {\n  font-size: 2rem;\n  font-weight: 700;\n  margin: 0 0 0.75rem 0;\n  letter-spacing: -0.02em;\n  text-align: left;\n}\n\n.chat-meta {\n  display: flex;\n  gap: 1.5rem;\n  font-size: 0.875rem;\n  color: #666;\n}\n\n.message-count {\n  font-weight: 600;\n}\n\n.header-actions {\n  display: flex;\n  gap: 0.5rem;\n  /* --- / --- */\n  flex-wrap: wrap;           /*  */\n  justify-content: flex-end; /*  */\n  max-width: 380px;          /*  */\n                             /*  ( 350px  400px) */\n}\n\n.action-button,\n.reset-button {\n  padding: 0.25rem 0.5rem;\n  background: #fff;\n  border: 1px solid #000;\n  cursor: pointer;\n  font-size: 0.75rem;\n  font-weight: 500;\n  transition: all 0.2s;\n}\n\n.action-button:hover,\n.reset-button:hover {\n  background: #000;\n  color: #fff;\n}\n\n.regex-button {\n  background: #f5f5f5;\n}\n\n.search-toggle.active {\n  background: #000;\n  color: #fff;\n}\n\n/*  */\n.search-bar {\n  padding: 1rem 3rem;\n  background: #f9f9f9;\n  border-bottom: 1px solid #e0e0e0;\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n\n.search-input-wrapper {\n  flex: 1;\n  position: relative;\n  max-width: 500px;\n}\n\n.search-input {\n  width: 100%;\n  padding: 0.625rem 2.5rem 0.625rem 1rem;\n  font-size: 0.9375rem;\n  border: 1px solid #ddd;\n  background: #fff;\n  transition: border-color 0.2s;\n}\n\n.search-input:focus {\n  outline: none;\n  border-color: #000;\n}\n\n.search-input::placeholder {\n  color: #999;\n}\n\n.search-clear {\n  position: absolute;\n  right: 0.5rem;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 24px;\n  height: 24px;\n  padding: 0;\n  border: none;\n  background: transparent;\n  color: #999;\n  cursor: pointer;\n  font-size: 0.75rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.search-clear:hover {\n  color: #000;\n}\n\n.search-info {\n  font-size: 0.875rem;\n  color: #666;\n  white-space: nowrap;\n}\n\n.filter-hint {\n  color: #999;\n  font-size: 0.75rem;\n}\n\n/*  */\n:deep(.search-highlight) {\n  background: #ffeb3b;\n  color: #000;\n  padding: 0 0.125rem;\n}\n\n/*  */\n.regex-manager {\n  border-bottom: 2px solid #000;\n  background: #fafafa;\n  padding: 1.5rem 3rem;\n}\n\n.regex-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1rem;\n}\n\n.regex-header h2 {\n  font-size: 1.25rem;\n  font-weight: 700;\n  margin: 0;\n}\n\n.regex-actions {\n  display: flex;\n  gap: 0.5rem;\n}\n\n.btn {\n  padding: 0.25rem 0.5rem;\n  font-size: 0.75rem;\n  font-weight: 500;\n  cursor: pointer;\n  border: 1px solid #000;\n  transition: all 0.2s;\n}\n\n.btn-primary {\n  background: #000;\n  color: #fff;\n}\n\n.btn-primary:hover {\n  background: #333;\n}\n\n.btn-secondary {\n  background: #fff;\n  color: #000;\n}\n\n.btn-secondary:hover {\n  background: #f0f0f0;\n}\n\n.btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n/*  */\n.script-form {\n  background: #fff;\n  border: 1px solid #ddd;\n  padding: 1.5rem;\n  margin-bottom: 1rem;\n}\n\n.form-group {\n  margin-bottom: 1rem;\n}\n\n.form-group:last-of-type {\n  margin-bottom: 0;\n}\n\n.form-group label {\n  display: block;\n  font-size: 0.875rem;\n  font-weight: 600;\n  margin-bottom: 0.375rem;\n}\n\n.form-group input[type=\"text\"],\n.form-group textarea {\n  width: 100%;\n  padding: 0.5rem;\n  font-size: 0.875rem;\n  border: 1px solid #ccc;\n  font-family: 'Consolas', 'Monaco', monospace;\n}\n\n.form-group textarea {\n  resize: vertical;\n}\n\n.form-select {\n  width: 100%;\n  padding: 0.5rem;\n  font-size: 0.875rem;\n  border: 1px solid #ccc;\n  background: #fff;\n  cursor: pointer;\n}\n\n.form-hint {\n  font-size: 0.75rem;\n  color: #666;\n  margin-top: 0.25rem;\n}\n\n.checkbox-group label {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  cursor: pointer;\n  font-weight: normal;\n}\n\n.checkbox-group input[type=\"checkbox\"] {\n  width: auto;\n}\n\n.form-buttons {\n  display: flex;\n  justify-content: flex-end;\n  gap: 0.5rem;\n  margin-top: 1rem;\n  padding-top: 1rem;\n  border-top: 1px solid #eee;\n}\n\n/*  */\n.script-list {\n  max-height: 400px;\n  overflow-y: auto;\n}\n\n.no-scripts {\n  padding: 2rem;\n  text-align: center;\n  color: #666;\n  font-size: 0.875rem;\n}\n\n.script-item {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  padding: 0.75rem;\n  background: #fff;\n  border: 1px solid #ddd;\n  margin-bottom: 0.5rem;\n  cursor: grab;\n  transition: all 0.2s;\n}\n\n.script-item:hover {\n  border-color: #000;\n}\n\n.script-item.disabled {\n  opacity: 0.5;\n  background: #f5f5f5;\n}\n\n.script-item.dragging {\n  opacity: 0.5;\n  border-style: dashed;\n}\n\n.script-drag-handle {\n  color: #999;\n  font-size: 1rem;\n  cursor: grab;\n  user-select: none;\n}\n\n.script-info {\n  flex: 1;\n  min-width: 0;\n}\n\n.script-name {\n  font-weight: 600;\n  font-size: 0.875rem;\n  margin-bottom: 0.25rem;\n}\n\n.script-regex {\n  font-size: 0.75rem;\n  font-family: 'Consolas', 'Monaco', monospace;\n  color: #666;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.script-controls {\n  display: flex;\n  align-items: center;\n  gap: 0.375rem;\n}\n\n.btn-icon {\n  width: 22px;\n  height: 22px;\n  padding: 0;\n  border: 1px solid #ddd;\n  background: #fff;\n  cursor: pointer;\n  font-size: 0.7rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n}\n\n.btn-icon:hover:not(:disabled) {\n  border-color: #000;\n  background: #f0f0f0;\n}\n\n.btn-icon:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n\n.btn-icon.btn-danger:hover:not(:disabled) {\n  background: #ff4444;\n  color: #fff;\n  border-color: #ff4444;\n}\n\n.btn-toggle {\n  padding: 0.125rem 0.375rem;\n  font-size: 0.65rem;\n  font-weight: 500;\n  border: 1px solid #ddd;\n  background: #f5f5f5;\n  color: #666;\n  cursor: pointer;\n  transition: all 0.2s;\n  min-width: 50px;\n}\n\n.btn-toggle.active {\n  background: #000;\n  color: #fff;\n  border-color: #000;\n}\n\n/*  */\n.pagination-bar {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 3rem;\n  background: rgba(255, 255, 255, 0.95);\n  border-top: 2px solid #000;\n  position: fixed;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 100%;\n  max-width: 800px;\n  z-index: 100;\n  box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.1);\n}\n\n.pagination-info {\n  font-size: 0.875rem;\n  color: #666;\n}\n\n.pagination-controls {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.page-btn {\n  width: 24px;\n  height: 24px;\n  padding: 0;\n  border: 1px solid #ddd;\n  background: #fff;\n  cursor: pointer;\n  font-size: 0.75rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n}\n\n.page-btn:hover:not(:disabled) {\n  border-color: #000;\n  background: #f0f0f0;\n}\n\n.page-btn:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n\n.page-indicator {\n  font-size: 0.875rem;\n  font-weight: 600;\n  padding: 0 0.75rem;\n  min-width: 80px;\n  text-align: center;\n}\n\n.page-size-select {\n  padding: 0.375rem 0.5rem;\n  border: 1px solid #ddd;\n  background: #fff;\n  font-size: 0.875rem;\n  cursor: pointer;\n  margin-left: 0.5rem;\n}\n\n.page-size-select:hover {\n  border-color: #000;\n}\n\n/*  */\n.messages-wrapper {\n  padding: 0;\n  padding-bottom: 80px; /*  */\n}\n\n.message-block {\n  padding: 2.5rem 3rem;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n  background: transparent;\n}\n\n.message-block:last-child {\n  border-bottom: none;\n}\n\n/*  -  */\n.user-message {\n  background: rgba(0, 0, 0, 0.06) !important;\n  border-left: 6px solid #000 !important;\n}\n\n.user-message .speaker-name {\n  font-weight: 800;\n  color: #000;\n}\n\n/* AI/ -  */\n.message-block:not(.user-message) {\n  background: transparent;\n}\n\n.message-block:not(.user-message) .speaker-name {\n  color: #333;\n}\n\n/*  */\n.message-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: baseline;\n  margin-bottom: 1rem;\n}\n\n.speaker-name {\n  font-size: 0.875rem;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n}\n\n.message-info {\n  display: flex;\n  gap: 1rem;\n  align-items: center;\n}\n\n.timestamp {\n  font-size: 0.75rem;\n  color: #999;\n  font-variant-numeric: tabular-nums;\n}\n\n.model-tag {\n  font-size: 0.75rem;\n  padding: 0.125rem 0.5rem;\n  background: #000;\n  color: #fff;\n  font-weight: 500;\n}\n\n/*  */\n.message-content {\n  font-size: 1rem;\n  line-height: 1.8;\n  color: #1a1a1a;\n  text-align: justify;\n}\n\n/*  */\n.message-content :deep(p),\n.message-content :deep(span),\n.message-content :deep(strong),\n.message-content :deep(em),\n.message-content :deep(blockquote),\n.message-content :deep(li),\n.message-content :deep(h1),\n.message-content :deep(h2),\n.message-content :deep(h3),\n.message-content :deep(h4),\n.message-content :deep(h5),\n.message-content :deep(h6),\n.message-content :deep(a),\n.message-content :deep(td),\n.message-content :deep(th) {\n  font-family: var(--content-font);\n}\n\n/*  */\n.message-content :deep(code),\n.message-content :deep(pre),\n.message-content :deep(pre code) {\n  font-family: 'Consolas', 'Monaco', monospace !important;\n}\n\n/* HTML  */\n.message-content-html {\n  font-size: 1rem;\n  line-height: 1.8;\n  color: #1a1a1a;\n}\n\n.html-preview-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1rem;\n  padding-bottom: 0.5rem;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.html-tag {\n  font-size: 0.75rem;\n  padding: 0.125rem 0.5rem;\n  background: #000;\n  color: #fff;\n  font-weight: 500;\n}\n\n.preview-toggle {\n  padding: 0.25rem 0.75rem;\n  background: #fff;\n  border: 1px solid #000;\n  cursor: pointer;\n  font-size: 0.75rem;\n  font-weight: 500;\n  transition: all 0.2s;\n}\n\n.preview-toggle:hover {\n  background: #000;\n  color: #fff;\n}\n\n.message-content-mixed {\n  font-size: 1rem;\n  line-height: 1.8;\n  color: #1a1a1a;\n}\n\n/*  */\n.message-content-mixed :deep(p),\n.message-content-mixed :deep(span),\n.message-content-mixed :deep(strong),\n.message-content-mixed :deep(em),\n.message-content-mixed :deep(blockquote),\n.message-content-mixed :deep(li),\n.message-content-mixed :deep(h1),\n.message-content-mixed :deep(h2),\n.message-content-mixed :deep(h3),\n.message-content-mixed :deep(h4),\n.message-content-mixed :deep(a),\n.message-content-mixed :deep(td),\n.message-content-mixed :deep(th) {\n  font-family: var(--content-font);\n}\n\n.message-content-mixed :deep(code),\n.message-content-mixed :deep(pre),\n.message-content-mixed :deep(pre code) {\n  font-family: 'Consolas', 'Monaco', monospace !important;\n}\n\n.html-preview-section {\n  margin-bottom: 1.5rem;\n}\n\n.html-iframe {\n  width: 100%;\n  min-height: 400px;\n  border: 1px solid #e0e0e0;\n  background: #fff;\n}\n\n.html-code {\n  font-family: 'Consolas', 'Monaco', monospace;\n  font-size: 0.875rem;\n  background: #f5f5f5;\n  padding: 1rem;\n  overflow-x: auto;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  border: 1px solid #e0e0e0;\n  margin: 0;\n  line-height: 1.5;\n  color: #333;\n}\n\n.message-content :deep(p) {\n  margin: 0 0 var(--paragraph-spacing, 1em) 0;\n}\n\n.message-content :deep(p:last-child) {\n  margin-bottom: 0;\n}\n\n.message-content :deep(strong) {\n  font-weight: 700;\n}\n\n.message-content :deep(em) {\n  font-style: italic;\n}\n\n.message-content :deep(code) {\n  font-family: 'Consolas', 'Monaco', monospace;\n  background: #f0f0f0;\n  padding: 0.125rem 0.375rem;\n  font-size: 0.9em;\n}\n\n.message-content :deep(pre) {\n  background: #f0f0f0;\n  padding: 1rem;\n  overflow-x: auto;\n  margin: 1rem 0;\n}\n\n.message-content :deep(pre code) {\n  background: none;\n  padding: 0;\n}\n\n.message-content :deep(blockquote) {\n  border-left: 3px solid #000;\n  padding-left: 1rem;\n  margin: 1rem 0;\n  color: #666;\n}\n\n.message-content :deep(a) {\n  color: #000;\n  text-decoration: underline;\n}\n\n.message-content :deep(img) {\n  max-width: 100%;\n  height: auto;\n  display: block;\n  margin: 1rem 0;\n}\n\n.message-content :deep(h1),\n.message-content :deep(h2),\n.message-content :deep(h3),\n.message-content :deep(h4) {\n  font-weight: 700;\n  margin: 1.5rem 0 0.75rem 0;\n  line-height: 1.3;\n}\n\n.message-content :deep(ul),\n.message-content :deep(ol) {\n  margin: 1rem 0;\n  padding-left: 1.5rem;\n}\n\n.message-content :deep(li) {\n  margin: 0.25rem 0;\n}\n\n/* Swipe  */\n.swipe-controls {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 1rem;\n  margin-top: 1.5rem;\n  padding-top: 1rem;\n  border-top: 1px dashed #ddd;\n}\n\n.swipe-btn {\n  width: 26px;\n  height: 26px;\n  padding: 0;\n  border: 1px solid #ddd;\n  background: #fff;\n  cursor: pointer;\n  font-size: 0.7rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n  border-radius: 50%;\n}\n\n.swipe-btn:hover:not(:disabled) {\n  border-color: #000;\n  background: #f0f0f0;\n}\n\n.swipe-btn:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n\n.swipe-indicator {\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: #666;\n  min-width: 60px;\n  text-align: center;\n}\n\n/*  */\n.edit-btn {\n  width: 20px;\n  height: 20px;\n  padding: 0;\n  border: 1px solid #ddd;\n  background: #fff;\n  cursor: pointer;\n  font-size: 0.65rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 2px;\n  transition: all 0.2s;\n  opacity: 0.6;\n}\n\n.edit-btn:hover {\n  opacity: 1;\n  border-color: #000;\n  background: #f0f0f0;\n}\n\n/*  */\n.message-edit-form {\n  margin-top: 1rem;\n}\n\n.edit-textarea {\n  width: 100%;\n  padding: 0.75rem;\n  font-size: 0.9375rem;\n  font-family: 'Consolas', 'Monaco', monospace;\n  border: 1px solid #ddd;\n  background: #fafafa;\n  resize: vertical;\n  line-height: 1.6;\n  min-height: 200px;\n}\n\n.edit-textarea:focus {\n  outline: none;\n  border-color: #000;\n  background: #fff;\n}\n\n.edit-actions {\n  display: flex;\n  justify-content: flex-end;\n  gap: 0.5rem;\n  margin-top: 0.75rem;\n}\n\n/*  */\n.edit-btn.favorited {\n  color: #f5a623;\n  border-color: #f5a623;\n  opacity: 1;\n}\n\n/*  */\n.favorites-list {\n  max-height: 500px;\n}\n\n.favorite-item {\n  display: flex;\n  align-items: flex-start;\n  gap: 0.75rem;\n  padding: 0.75rem;\n  background: #fff;\n  border: 1px solid #ddd;\n  margin-bottom: 0.5rem;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.favorite-item:hover {\n  border-color: #000;\n  background: #f9f9f9;\n}\n\n.favorite-content {\n  flex: 1;\n  min-width: 0;\n  text-align: left;\n}\n\n.favorite-type {\n  font-size: 0.75rem;\n  color: #666;\n  margin-bottom: 0.25rem;\n}\n\n.favorite-text {\n  font-size: 0.875rem;\n  line-height: 1.5;\n  color: #333;\n  word-break: break-word;\n  text-align: left;\n}\n\n.favorite-meta {\n  font-size: 0.75rem;\n  color: #999;\n  margin-top: 0.5rem;\n  display: flex;\n  gap: 1rem;\n}\n\n.favorite-actions {\n  display: flex;\n  gap: 0.25rem;\n}\n\n/*  */\n.selection-menu {\n  position: fixed;\n  z-index: 1000;\n  background: #fff;\n  border: 1px solid #000;\n  box-shadow: 0 2px 10px rgba(0,0,0,0.2);\n  display: flex;\n  gap: 0;\n}\n\n.selection-btn {\n  padding: 0.25rem 0.5rem;\n  border: none;\n  background: #fff;\n  cursor: pointer;\n  font-size: 0.7rem;\n  white-space: nowrap;\n  transition: all 0.2s;\n}\n\n.selection-btn:hover {\n  background: #000;\n  color: #fff;\n}\n\n.selection-btn:not(:last-child) {\n  border-right: 1px solid #ddd;\n}\n\n/*  */\n:deep(.user-highlight) {\n  text-decoration: none;\n  background-image: linear-gradient(to right, #87ceeb 60%, transparent 40%);\n  background-position: 0 100%;\n  background-size: 10px 1.5px;\n  background-repeat: repeat-x;\n  padding-bottom: 3px;\n  cursor: pointer;\n  transition: background-color 0.2s;\n}\n\n:deep(.user-highlight:hover) {\n  background-color: rgba(135, 206, 235, 0.2);\n}\n\n/*  */\n.highlight-menu {\n  position: fixed;\n  z-index: 1000;\n  background: #fff;\n  border: 1px solid #000;\n  box-shadow: 0 2px 10px rgba(0,0,0,0.2);\n}\n\n/*  */\n@keyframes highlight-flash {\n  0%, 100% { background-color: inherit; }\n  25%, 75% { background-color: rgba(255, 235, 59, 0.3); }\n  50% { background-color: rgba(255, 235, 59, 0.5); }\n}\n\n.message-block.highlight-flash {\n  animation: highlight-flash 2s ease-in-out;\n}\n\n/*  */\n.highlights-list {\n  max-height: 300px;\n}\n\n.highlight-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.5rem 0.75rem;\n  border-bottom: 1px solid #eee;\n  gap: 0.5rem;\n}\n\n.highlight-item:last-child {\n  border-bottom: none;\n}\n\n.highlight-content {\n  flex: 1;\n  min-width: 0;\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n}\n\n.highlight-text-preview {\n  font-size: 0.85rem;\n  color: #333;\n  word-break: break-word;\n  border-bottom: 2px dashed #87ceeb;\n  display: inline;\n}\n\n.highlight-meta {\n  font-size: 0.75rem;\n  color: #888;\n}\n\n/*  */\n.export-dialog-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n}\n\n.export-dialog {\n  background: #fff;\n  border: 2px solid #000;\n  width: 90%;\n  max-width: 500px;\n  max-height: 80vh;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);\n}\n\n.export-dialog-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 1.5rem;\n  border-bottom: 1px solid #ddd;\n}\n\n.export-dialog-header h3 {\n  margin: 0;\n  font-size: 1.125rem;\n  font-weight: 700;\n}\n\n.export-dialog-body {\n  padding: 1.5rem;\n  overflow-y: auto;\n  flex: 1;\n}\n\n.export-options {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n  margin-bottom: 1.5rem;\n}\n\n.export-option {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.9375rem;\n  cursor: pointer;\n}\n\n.export-option input[type=\"checkbox\"] {\n  width: 16px;\n  height: 16px;\n  cursor: pointer;\n}\n\n.export-preview {\n  background: #f9f9f9;\n  border: 1px solid #ddd;\n  padding: 1rem;\n}\n\n.export-preview-label {\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: #666;\n  margin-bottom: 0.5rem;\n}\n\n.export-preview-content {\n  font-size: 0.875rem;\n  line-height: 1.6;\n  font-family: 'Consolas', 'Monaco', monospace;\n  white-space: pre-wrap;\n  word-break: break-word;\n  margin: 0;\n  max-height: 200px;\n  overflow-y: auto;\n  color: #333;\n}\n\n.export-dialog-footer {\n  display: flex;\n  justify-content: flex-end;\n  gap: 0.5rem;\n  padding: 1rem 1.5rem;\n  border-top: 1px solid #ddd;\n  background: #fafafa;\n}\n\n/*  */\n.export-range {\n  margin-bottom: 1.5rem;\n  padding-bottom: 1.5rem;\n  border-bottom: 1px solid #eee;\n}\n\n.range-inputs {\n  display: flex;\n  align-items: flex-end;\n  gap: 1rem;\n}\n\n.range-input-group {\n  display: flex;\n  flex-direction: column;\n  gap: 0.375rem;\n}\n\n.range-input-group label {\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: #333;\n}\n\n.range-input {\n  width: 100px;\n  padding: 0.5rem 0.75rem;\n  font-size: 1rem;\n  border: 1px solid #ddd;\n  text-align: center;\n  font-weight: 600;\n}\n\n.range-input:focus {\n  outline: none;\n  border-color: #000;\n}\n\n.range-separator {\n  font-size: 1rem;\n  color: #666;\n  padding-bottom: 0.5rem;\n}\n\n.range-hint {\n  margin-top: 0.75rem;\n  font-size: 0.875rem;\n  color: #666;\n}\n\n/*  */\n.style-panel {\n  background: #fafafa;\n}\n\n.style-settings {\n  display: flex;\n  flex-direction: column;\n  gap: 1.25rem;\n  padding: 1rem 0;\n}\n\n.style-group {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n\n.style-label {\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: #333;\n}\n\n.style-select {\n  width: 100%;\n  max-width: 300px;\n  padding: 0.5rem 0.75rem;\n  font-size: 0.875rem;\n  border: 1px solid #ddd;\n  background: #fff;\n  cursor: pointer;\n  transition: border-color 0.2s;\n}\n\n.style-select:hover {\n  border-color: #999;\n}\n\n.style-select:focus {\n  outline: none;\n  border-color: #000;\n}\n\n.style-slider-row {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n\n.style-slider {\n  flex: 1;\n  max-width: 250px;\n  height: 4px;\n  -webkit-appearance: none;\n  appearance: none;\n  background: #ddd;\n  border-radius: 2px;\n  outline: none;\n  cursor: pointer;\n}\n\n.style-slider::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 16px;\n  height: 16px;\n  background: #000;\n  border-radius: 50%;\n  cursor: pointer;\n  transition: transform 0.2s;\n}\n\n.style-slider::-webkit-slider-thumb:hover {\n  transform: scale(1.1);\n}\n\n.style-slider::-moz-range-thumb {\n  width: 16px;\n  height: 16px;\n  background: #000;\n  border: none;\n  border-radius: 50%;\n  cursor: pointer;\n}\n\n.style-value {\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: #666;\n  min-width: 50px;\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n.color-options {\n  display: flex;\n  gap: 0.5rem;\n  flex-wrap: wrap;\n}\n\n.color-btn {\n  width: 28px;\n  height: 28px;\n  border: 2px solid transparent;\n  border-radius: 4px;\n  cursor: pointer;\n  transition: all 0.2s;\n  position: relative;\n}\n\n.color-btn:hover {\n  transform: scale(1.1);\n}\n\n.color-btn.active {\n  border-color: #000;\n  box-shadow: 0 0 0 2px #fff, 0 0 0 4px #000;\n}\n\n.align-options {\n  display: flex;\n  gap: 0.5rem;\n}\n\n.align-btn {\n  width: 36px;\n  height: 36px;\n  border: 1px solid #ddd;\n  background: #fff;\n  cursor: pointer;\n  font-size: 1rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n}\n\n.align-btn:hover {\n  border-color: #000;\n  background: #f5f5f5;\n}\n\n.align-btn.active {\n  background: #000;\n  color: #fff;\n  border-color: #000;\n}\n\n.style-preview {\n  margin-top: 1.5rem;\n  padding-top: 1.5rem;\n  border-top: 1px solid #ddd;\n}\n\n.style-preview-label {\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: #666;\n  margin-bottom: 0.75rem;\n}\n\n.style-preview-content {\n  padding: 1rem;\n  background: #fff;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n}\n\n/*  */\n.custom-fonts-section {\n  margin-top: 1.5rem;\n  padding-top: 1.5rem;\n  border-top: 1px solid #eee;\n}\n\n.custom-font-list {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  margin-top: 0.75rem;\n}\n\n.custom-font-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.5rem 0.75rem;\n  background: #f8f8f8;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n}\n\n.custom-font-name {\n  font-size: 0.875rem;\n  color: #333;\n}\n\n.add-font-btn {\n  margin-top: 0.5rem;\n  font-size: 0.75rem;\n  padding: 0.25rem 0.5rem;\n}\n\n/*  */\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10000;\n}\n\n.modal-dialog {\n  background: #fff;\n  border-radius: 8px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n  max-width: 500px;\n  width: 90%;\n  max-height: 90vh;\n  overflow: auto;\n}\n\n.modal-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1rem 1.25rem;\n  border-bottom: 1px solid #eee;\n}\n\n.modal-header h3 {\n  margin: 0;\n  font-size: 1.125rem;\n  font-weight: 600;\n}\n\n.modal-close {\n  background: none;\n  border: none;\n  font-size: 1.25rem;\n  cursor: pointer;\n  color: #666;\n  padding: 0.25rem;\n  line-height: 1;\n}\n\n.modal-close:hover {\n  color: #000;\n}\n\n.modal-body {\n  padding: 1.25rem;\n}\n\n.modal-footer {\n  display: flex;\n  justify-content: flex-end;\n  gap: 0.75rem;\n  padding: 1rem 1.25rem;\n  border-top: 1px solid #eee;\n}\n\n.form-input {\n  width: 100%;\n  padding: 0.5rem 0.75rem;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  font-size: 0.875rem;\n  box-sizing: border-box;\n}\n\n.form-input:focus {\n  outline: none;\n  border-color: #666;\n}\n\n.form-input:disabled {\n  background: #f5f5f5;\n  color: #999;\n}\n\n.form-file-input {\n  width: 100%;\n  padding: 0.5rem 0;\n  font-size: 0.875rem;\n}\n\n.file-selected {\n  margin-top: 0.5rem;\n  font-size: 0.75rem;\n  color: #666;\n}\n\n.required {\n  color: #e53935;\n}\n\n.import-tabs {\n  margin-top: 1rem;\n}\n\n.import-method {\n  margin-bottom: 1rem;\n}\n\n.import-method-header {\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: #333;\n  margin-bottom: 0.5rem;\n}\n\n.import-divider {\n  text-align: center;\n  color: #999;\n  font-size: 0.875rem;\n  margin: 1rem 0;\n  position: relative;\n}\n\n.import-divider::before,\n.import-divider::after {\n  content: '';\n  position: absolute;\n  top: 50%;\n  width: 40%;\n  height: 1px;\n  background: #ddd;\n}\n\n.import-divider::before {\n  left: 0;\n}\n\n.import-divider::after {\n  right: 0;\n}\n\n.btn-sm {\n  padding: 0.375rem 0.625rem;\n  font-size: 0.75rem;\n}\n\n/*  */\n.action-button.active {\n  background: #000;\n  color: #fff;\n}\n\n/*  */\n.reading-mode-btn {\n  background: #f0f7ff;\n  border-color: #4a90d9;\n  color: #4a90d9;\n}\n\n.reading-mode-btn:hover {\n  background: #4a90d9;\n  color: #fff;\n}\n\n.reading-mode-btn.active {\n  background: #4a90d9;\n  color: #fff;\n  border-color: #4a90d9;\n}\n\n/* =======  ======= */\n/*  */\n.reading-view {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: #fefefe;\n  z-index: 500;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden; /*  */\n}\n\n/*  CSS Columns  */\n.reading-content {\n  height: calc(100vh - 3rem); /*  */\n  /* width  JS  scrollWidth */\n  min-width: 100vw;           /*  */\n  box-sizing: border-box;\n  \n  /* CSS Columns  - column-width  JS  */\n  column-gap: 0;              /* 0padding */\n  column-fill: auto;          /*  */\n  \n  /* paddingpadding */\n  padding: 2rem 0 3rem 0;\n  \n  text-align: justify;\n  overflow: visible;          /* scrollWidth  */\n  \n  /*  */\n  transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n  \n  /*  */\n  word-wrap: break-word;\n  word-break: break-all;\n  \n  /*  */\n  user-select: text;\n  -webkit-user-select: text;\n  cursor: text;\n}\n\n/*  */\n.reading-content :deep(p),\n.reading-content :deep(span),\n.reading-content :deep(strong),\n.reading-content :deep(em),\n.reading-content :deep(blockquote),\n.reading-content :deep(li),\n.reading-content :deep(h1),\n.reading-content :deep(h2),\n.reading-content :deep(h3),\n.reading-content :deep(h4),\n.reading-content :deep(h5),\n.reading-content :deep(h6),\n.reading-content :deep(a),\n.reading-content :deep(td),\n.reading-content :deep(th) {\n  font-family: var(--content-font);\n}\n\n.reading-content :deep(code),\n.reading-content :deep(pre),\n.reading-content :deep(pre code) {\n  font-family: 'Consolas', 'Monaco', monospace !important;\n}\n\n/*  */\n.reading-content :deep(p),\n.reading-content :deep(div),\n.reading-content :deep(li),\n.reading-content :deep(h1),\n.reading-content :deep(h2),\n.reading-content :deep(h3),\n.reading-content :deep(h4),\n.reading-content :deep(h5),\n.reading-content :deep(h6),\n.reading-content :deep(blockquote),\n.reading-content :deep(pre) {\n  padding-left: 1.5rem;\n  padding-right: 1.5rem;\n  box-sizing: border-box;\n  break-inside: avoid; \n  page-break-inside: avoid;\n  margin: 0 0 var(--paragraph-spacing, 1em) 0;\n}\n\n/*  */\n.reading-content :deep(.reading-message) {\n  display: block;\n}\n\n/*  */\n.reading-content :deep(.reading-speaker-name) {\n  font-weight: bold; \n  font-size: 0.9em; \n  color:#666;\n  margin-top: 1rem;\n  padding-left: 1.5rem;\n  padding-right: 1.5rem;\n}\n\n.reading-content :deep(img) {\n  max-width: calc(100% - 3rem);\n  max-height: 90%; \n  height: auto;\n  display: block;\n  margin: 1rem auto;\n  padding-left: 1.5rem;\n  padding-right: 1.5rem;\n  box-sizing: border-box;\n}\n\n/*  */\n.reading-content :deep(.reading-separator) {\n  height: 2rem;\n  margin: 1rem 1.5rem;\n  border-bottom: 1px dashed #eee;\n}\n\n/*  -  */\n.reading-nav-left {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 20%;\n  height: calc(100% - 60px);\n  z-index: 504;\n  cursor: w-resize;\n  -webkit-tap-highlight-color: transparent;\n}\n\n/*  -  */\n.reading-nav-right {\n  position: fixed;\n  top: 0;\n  right: 0;\n  width: 20%;\n  height: calc(100% - 60px);\n  z-index: 504;\n  cursor: e-resize;\n  -webkit-tap-highlight-color: transparent;\n}\n\n/*  -  */\n.reading-nav-center {\n  position: fixed;\n  top: 0;\n  left: 20%;\n  width: 60%;\n  height: 60px;\n  z-index: 504;\n  cursor: pointer;\n  -webkit-tap-highlight-color: transparent;\n}\n\n/*  */\n.reading-footer {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: rgba(255, 255, 255, 0.98);\n  border-top: 1px solid #e0e0e0;\n  padding: 0.75rem 1.5rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  transform: translateY(100%);\n  opacity: 0;\n  transition: transform 0.3s ease, opacity 0.3s ease;\n  z-index: 520;\n}\n\n.reading-footer.visible {\n  transform: translateY(0);\n  opacity: 1;\n}\n\n.reading-progress {\n  font-size: 0.875rem;\n  color: #666;\n  display: flex;\n  gap: 1.5rem;\n}\n\n.reading-floor {\n  color: #999;\n}\n\n.reading-controls {\n  display: flex;\n  gap: 0.5rem;\n}\n\n.reading-btn {\n  padding: 0.375rem 0.75rem;\n  font-size: 0.8125rem;\n  border: 1px solid #ddd;\n  background: #fff;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.reading-btn:hover:not(:disabled) {\n  border-color: #000;\n  background: #f5f5f5;\n}\n\n.reading-btn:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n}\n\n.reading-btn.reading-exit {\n  background: #f5f5f5;\n  border-color: #ccc;\n}\n\n.reading-btn.reading-exit:hover {\n  background: #e0e0e0;\n}\n\n/*  */\n@media (max-width: 768px) {\n  .chat-header {\n    padding: 2rem 1.5rem 1.5rem;\n    flex-direction: column;\n    gap: 1rem;\n  }\n\n  .header-actions {\n    width: 100%;\n    flex-direction: row;\n    flex-wrap: wrap;\n    justify-content: flex-start;\n    gap: 0.375rem;\n  }\n\n  .action-button,\n  .reset-button {\n    width: auto;\n    flex: 0 0 auto;\n    padding: 0.25rem 0.5rem;\n    font-size: 0.7rem;\n  }\n\n  .chat-title {\n    font-size: 1.5rem;\n  }\n\n  .message-block {\n    padding: 2rem 1.5rem;\n  }\n\n  .message-header {\n    flex-direction: column;\n    gap: 0.5rem;\n    align-items: flex-start;\n  }\n\n  .upload-area {\n    padding: 1rem;\n  }\n\n  .upload-label {\n    padding: 3rem 1.5rem;\n  }\n\n  /*  */\n  .search-bar {\n    flex-direction: column;\n    padding: 0.75rem 1.5rem;\n    gap: 0.5rem;\n  }\n\n  .search-input-wrapper {\n    max-width: none;\n  }\n\n  /*  */\n  .pagination-bar {\n    flex-direction: column;\n    gap: 0.75rem;\n    padding: 0.75rem 1.5rem;\n  }\n\n  .pagination-controls {\n    flex-wrap: wrap;\n    justify-content: center;\n  }\n\n  /*  */\n  .regex-manager {\n    padding: 1rem 1.5rem;\n  }\n\n  .regex-header {\n    flex-direction: column;\n    gap: 1rem;\n    align-items: flex-start;\n  }\n\n  .regex-actions {\n    width: 100%;\n    flex-wrap: wrap;\n  }\n\n  .regex-actions .btn {\n    flex: 1;\n    min-width: 80px;\n  }\n\n  .script-item {\n    flex-wrap: wrap;\n  }\n\n  .script-controls {\n    width: 100%;\n    justify-content: flex-end;\n    margin-top: 0.5rem;\n    padding-top: 0.5rem;\n    border-top: 1px solid #eee;\n  }\n}\n</style>\n\n<style>\n/*  - scoped */\n@font-face {\n  font-family: 'Alegreya';\n  src: url('https://sazankaze.neocities.org/fonts/Alegreya.ttf') format('truetype');\n  font-weight: normal;\n  font-style: normal;\n  font-display: swap;\n}\n\n@font-face {\n  font-family: '';\n  src: url('https://sazankaze.neocities.org/fonts/cangeryunhei.ttf') format('truetype');\n  font-weight: normal;\n  font-style: normal;\n  font-display: swap;\n}\n\n@font-face {\n  font-family: '';\n  src: url('https://sazankaze.neocities.org/fonts/huiwenmingchao.otf') format('opentype');\n  font-weight: normal;\n  font-style: normal;\n  font-display: swap;\n}\n\n@font-face {\n  font-family: '';\n  src: url('https://sazankaze.neocities.org/fonts/kongmingchao.ttf') format('truetype');\n  font-weight: normal;\n  font-style: normal;\n  font-display: swap;\n}\n\n@font-face {\n  font-family: '';\n  src: url('https://sazankaze.neocities.org/fonts/pingxianzhensong.ttf') format('truetype');\n  font-weight: normal;\n  font-style: normal;\n  font-display: swap;\n}\n\n@font-face {\n  font-family: '';\n  src: url('https://sazankaze.neocities.org/fonts/wenyueminguofangsong.otf') format('opentype');\n  font-weight: normal;\n  font-style: normal;\n  font-display: swap;\n}\n</style>","import { render } from \"./App.vue?vue&type=template&id=456beb98&scoped=true\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=456beb98&scoped=true&lang=css\"\nimport \"./App.vue?vue&type=style&index=1&id=456beb98&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-456beb98\"]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\n\ncreateApp(App).mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkst_reader\"] = self[\"webpackChunkst_reader\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(5796); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["class","label","ref","_createElementBlock","_hoisted_1","$data","messages","length","_hoisted_4","_createElementVNode","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","metadata","character_name","_hoisted_8","create_date","_hoisted_9","_hoisted_10","_hoisted_11","onClick","_cache","args","$options","toggleSearchBar","_normalizeClass","showSearchBar","toggleTagFilterManager","showTagFilterManager","tagFilters","_hoisted_12","filter","f","disabled","toggleRegexManager","regexScripts","_hoisted_13","s","toggleFavoritesPanel","showFavoritesPanel","favorites","_hoisted_14","openExportRangeDialog","toggleStylePanel","showStylePanel","toggleReadingMode","readingMode","resetReader","_hoisted_15","_hoisted_16","searchQuery","$event","onInput","onSearchInput","type","placeholder","clearSearch","title","_hoisted_17","_hoisted_18","filteredMessages","_hoisted_19","_hoisted_20","_hoisted_21","addNewTagFilter","tagFilterForm","id","_hoisted_22","_hoisted_23","name","_hoisted_24","tagName","_hoisted_25","mode","value","_hoisted_26","_hoisted_27","cancelEditTagFilter","saveTagFilter","_hoisted_28","_hoisted_29","_Fragment","_renderList","index","key","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","moveTagFilterUp","_hoisted_34","moveTagFilterDown","_hoisted_35","toggleTagFilter","_hoisted_36","editTagFilter","_hoisted_37","deleteTagFilter","_hoisted_38","showRegexManager","_hoisted_39","_hoisted_40","_hoisted_41","importScripts","importFromPNG","exportScripts","_hoisted_42","addNewScript","scriptForm","_hoisted_43","_hoisted_44","scriptName","_hoisted_45","findRegex","rows","_hoisted_46","replaceString","_hoisted_47","_hoisted_48","cancelEdit","saveScript","_hoisted_49","_hoisted_50","script","dragIndex","draggable","onDragstart","handleDragStart","onDragover","handleDragOver","onDrop","e","handleDrop","onDragend","handleDragEnd","_hoisted_52","_hoisted_53","_hoisted_54","substring","_hoisted_55","moveScriptUp","_hoisted_56","moveScriptDown","_hoisted_57","toggleScript","_hoisted_58","editScript","_hoisted_59","deleteScript","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","exportFavorites","_hoisted_64","clearAllFavorites","_hoisted_65","_hoisted_66","_hoisted_67","fav","navigateToFavorite","_hoisted_69","_hoisted_70","messageIndex","_hoisted_71","text","_hoisted_72","speaker","_hoisted_73","formatFavoriteTime","createdAt","_hoisted_74","_withModifiers","copyFavorite","_hoisted_75","deleteFavorite","_hoisted_76","_hoisted_77","_hoisted_78","_hoisted_79","resetStyles","_hoisted_80","_hoisted_81","textStyles","fontFamily","onChange","saveStylesToStorage","customFonts","_hoisted_82","font","_hoisted_83","showCustomFontDialog","_hoisted_84","_hoisted_85","fontSize","handleStyleChange","min","max","step","number","_hoisted_86","_hoisted_87","_hoisted_88","lineHeight","_hoisted_89","toFixed","_hoisted_90","_hoisted_91","paragraphSpacing","_hoisted_92","_hoisted_93","_hoisted_94","colorOptions","color","setTextColor","textColor","style","_normalizeStyle","backgroundColor","_hoisted_96","_hoisted_97","setTextAlign","textAlign","_hoisted_98","getPreviewStyles","_hoisted_99","_hoisted_100","_hoisted_101","deleteCustomFont","_hoisted_102","_hoisted_103","_hoisted_104","_hoisted_105","_hoisted_106","customFontForm","_hoisted_107","_hoisted_108","url","file","_hoisted_110","accept","handleFontFileSelect","_hoisted_112","_hoisted_113","resetCustomFontForm","addCustomFont","highlightMenu","show","left","x","top","y","removeHighlightFromMenu","_hoisted_114","paginatedMessages","message","currentRange","start","is_user","_hoisted_115","_hoisted_116","_hoisted_117","send_date","_hoisted_118","model","_hoisted_119","toggleFavoriteMessage","getGlobalMessageIndex","isMessageFavorited","_hoisted_120","toggleEditMessage","editingMessageIndex","_hoisted_121","_hoisted_122","editingContent","_hoisted_123","cancelEditMessage","saveEditMessage","hasHTMLCodeBlock","getMessageContent","getContentStyles","onMouseup","handleTextSelection","innerHTML","renderContentWithHTMLPlaceholder","isFullHTML","_hoisted_126","_hoisted_127","toggleHTMLPreview","showPreview","_hoisted_128","srcdoc","sandbox","_hoisted_130","renderContent","swipes","_hoisted_132","prevSwipe","currentSwipeIndex","_hoisted_133","_hoisted_134","nextSwipe","_hoisted_135","_hoisted_136","getReadingTransform","readingFullHtml","onReadingMouseUp","onTouchstart","onReadingTouchStart","onTouchend","onReadingTouchEnd","readingPrevPage","readingNextPage","toggleToolbar","toolbarVisible","_hoisted_138","readingCurrentPage","readingTotalPages","_hoisted_139","getReadingFloorRange","_hoisted_140","_hoisted_141","_hoisted_142","_hoisted_143","_hoisted_144","end","_hoisted_145","_hoisted_146","goToPage","currentPage","_hoisted_147","prevPage","_hoisted_148","_hoisted_149","totalPages","nextPage","_hoisted_150","_hoisted_151","pageSize","onPageSizeChange","_hoisted_2","_hoisted_3","handleFileUpload","for","selectionMenu","favoriteSelectedText","highlightSelectedText","copySelectedText","exportDialog","closeExportDialog","_hoisted_152","_hoisted_153","_hoisted_154","_hoisted_155","_hoisted_156","_hoisted_157","startFloor","_hoisted_159","endFloor","_hoisted_161","getExportCount","_hoisted_162","_hoisted_163","includeName","_hoisted_164","includeTime","_hoisted_165","_hoisted_166","getExportPreview","_hoisted_167","doExportRange","data","rawData","editingScript","searchResults","currentSearchIndex","editingTagFilter","highlights","highlightId","readingTouchStartX","readingTouchStartY","toolbarTimeout","windowWidth","resizeTimer","computed","this","trim","query","toLowerCase","msg","content","matches","includes","_originalIndex","Math","ceil","slice","mounted","document","body","overflow","loadScriptsFromStorage","loadTagFiltersFromStorage","loadFavoritesFromStorage","loadHighlightsFromStorage","loadStylesFromStorage","loadCustomFonts","replaceHTMLPlaceholders","addEventListener","hideSelectionMenu","updated","hideHighlightMenu","onHighlightClick","beforeUnmount","removeEventListener","window","handleResize","clearTimeout","methods","event","target","files","reader","FileReader","onload","parseJSONL","result","readAsText","lines","split","forEach","line","JSON","parse","mes","isUser","Array","isArray","extra","force_avatar","swipe_id","push","error","console","codeBlockPattern","match","codeContent","hasDoctype","test","hasHtmlTag","extractHTMLFromCodeBlock","renderContentWithoutCodeBlock","processedContent","applyTagFilters","applyRegexScripts","withoutCodeBlock","replace","renderMarkdown","htmlContent","base64Html","btoa","unescape","encodeURIComponent","withPlaceholder","placeholders","$el","querySelectorAll","getAttribute","parentNode","decodeURIComponent","escape","atob","iframe","createElement","className","setAttribute","wrapper","appendChild","replaceChild","marked","setOptions","breaks","gfm","sanitize","mangle","headerIds","html","DOMPurify","getDOMPurifyConfig","ALLOWED_TAGS","ALLOWED_ATTR","ALLOW_DATA_ATTR","trimmed","startsWithHtml","localIndex","globalIndex","htmlBlocks","tempContent","i","styleIndex","indexOf","htmlEnd","afterStyle","lastDivEnd","divEnd","afterLastDiv","startsWith","htmlBlock","block","ph","undefined","applyHighlights","highlight","escapedText","regex","RegExp","formatDate","timestamp","date","Date","isNaN","getTime","parseInt","year","getFullYear","month","String","getMonth","padStart","day","getDate","hours","getHours","minutes","getMinutes","$refs","fileInput","scrollToTop","page","$nextTick","querySelector","scrollIntoView","behavior","input","focus","saved","localStorage","getItem","saveFavoritesToStorage","setItem","stringify","saveHighlightsToStorage","existingIndex","findIndex","splice","unshift","generateUUID","now","some","selection","getSelection","selectedText","toString","clientX","clientY","closest","removeAllRanges","generateReadingContent","deleteHighlight","h","dataset","preventDefault","stopPropagation","targetPage","floor","messageBlocks","classList","add","setTimeout","remove","navigator","clipboard","writeText","then","confirm","dataStr","blob","Blob","URL","createObjectURL","a","href","download","click","revokeObjectURL","saveTagFiltersToStorage","resetTagFilterForm","alert","temp","tags","map","t","tag","escapedTag","selfClosingRegex","exec","join","saveScriptsToStorage","resetScriptForm","dropIndex","draggedScript","c","r","random","v","multiple","onchange","async","from","successCount","scriptCount","readFile","Promise","resolve","err","results","all","scripts","newScript","arrayBuffer","charData","extractPNGChara","cardData","extensions","regex_scripts","importCount","bytes","Uint8Array","pngSignature","Error","offset","fromCharCode","nullIndex","keyword","TextDecoder","decode","base64Data","decodeBase64UTF8","base64","binaryString","charCodeAt","regexMatch","formatMessageForExport","floorNum","stripHtmlTags","previewCount","textContent","innerText","toISOString","charName","savedStyles","align","registerFontFace","saveCustomFonts","format","head","unregisterFontFace","fontId","getElementById","fontUrl","fileToDataUrl","getFontFormat","newFont","reject","onerror","readAsDataURL","filename","ext","pop","formatMap","fontFileInput","getFontFamily","fontMap","customFont","find","fullContent","contentEl","readingContentEl","width","updateColumnWidth","calculateTotalPages","columnWidth","innerWidth","pageWidth","contentWidth","scrollWidth","offsetWidth","transform","handleReadingClick","clickX","touches","touchEndX","changedTouches","touchEndY","deltaX","deltaY","abs","range","getRangeAt","container","commonAncestorContainer","el","nodeType","parentElement","contains","hasAttribute","__exports__","render","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","keys","every","d","definition","o","defineProperty","enumerable","get","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"ignoreList":[],"sourceRoot":""}